<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Working with Route Data | Visualising WRC Rally Stages With rayshader and R</title>
  <meta name="description" content="Rally stage maps often appear on rally websites displayed via interactive web maps. The data used to generate the routes is often available as a digital data file of some sort. This book takes one such file and embarks on an adventure into the wilds of geocomputing using the R programming language to see just where such a file may take us. From web maps and elevation maps to interactive 3D displays, let the exploration commence…" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Working with Route Data | Visualising WRC Rally Stages With rayshader and R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Rally stage maps often appear on rally websites displayed via interactive web maps. The data used to generate the routes is often available as a digital data file of some sort. This book takes one such file and embarks on an adventure into the wilds of geocomputing using the R programming language to see just where such a file may take us. From web maps and elevation maps to interactive 3D displays, let the exploration commence…" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Working with Route Data | Visualising WRC Rally Stages With rayshader and R" />
  
  <meta name="twitter:description" content="Rally stage maps often appear on rally websites displayed via interactive web maps. The data used to generate the routes is often available as a digital data file of some sort. This book takes one such file and embarks on an adventure into the wilds of geocomputing using the R programming language to see just where such a file may take us. From web maps and elevation maps to interactive 3D displays, let the exploration commence…" />
  

<meta name="author" content="Tony Hirst" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="importing-the-stage-route-data.html"/>
<link rel="next" href="introducing-map-projections.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3.9000/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3.9000/leaflet-providers-plugin.js"></script>
<link href="libs/leaflet-minimap-3.3.1/Control.MiniMap.min.css" rel="stylesheet" />
<script src="libs/leaflet-minimap-3.3.1/Control.MiniMap.min.js"></script>
<script src="libs/leaflet-minimap-3.3.1/Minimap-binding.js"></script>
<script src="libs/FlatGeoBuf-3.3.3/fgb.js"></script>
<script src="libs/FlatGeoBuf-3.3.3/flatgeobuf-geojson.min.js"></script>
<script src="libs/chromajs-2.1.0/chroma.min.js"></script>
<link id="geojson_sf-1-attachment" rel="attachment" href="libs/geojson_sf-0.0.1/geojson_sf_layer.fgb"/>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<link href="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet" />
<script src="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script>
<link href="libs/fontawesome-4.7.0/font-awesome.min.css" rel="stylesheet" />
<link href="libs/style-1/style.css" rel="stylesheet" />
<script src="libs/plainView-binding-2.9.0/plainView.js"></script>
<link id="image-1-attachment" rel="attachment" href="libs/image-1/img.png"/>
<script src="libs/elev_img-1/data_stars_elev_imgdacf38.txt"></script>
<script src="libs/joda-0.0.1/joda.js"></script>
<script src="libs/joda-0.0.1/addImageQuery-bindings.js"></script>
<script src="libs/rglWebGL-binding-0.105.14/rglWebGL.js"></script>
<link href="libs/rglwidgetClass-0.105.14/rgl.css" rel="stylesheet" />
<script src="libs/rglwidgetClass-0.105.14/rglClass.src.js"></script>
<script src="libs/rglwidgetClass-0.105.14/utils.src.js"></script>
<script src="libs/rglwidgetClass-0.105.14/subscenes.src.js"></script>
<script src="libs/rglwidgetClass-0.105.14/shaders.src.js"></script>
<script src="libs/rglwidgetClass-0.105.14/textures.src.js"></script>
<script src="libs/rglwidgetClass-0.105.14/projection.src.js"></script>
<script src="libs/rglwidgetClass-0.105.14/mouse.src.js"></script>
<script src="libs/rglwidgetClass-0.105.14/init.src.js"></script>
<script src="libs/rglwidgetClass-0.105.14/pieces.src.js"></script>
<script src="libs/rglwidgetClass-0.105.14/draw.src.js"></script>
<script src="libs/rglwidgetClass-0.105.14/controls.src.js"></script>
<script src="libs/rglwidgetClass-0.105.14/selection.src.js"></script>
<script src="libs/rglwidgetClass-0.105.14/rglTimer.src.js"></script>
<script src="libs/CanvasMatrix4-0.105.14/CanvasMatrix.src.js"></script>
<link href="libs/vembedr-0.1.4/css/vembedr.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Index</a></li>
<li class="chapter" data-level="" data-path="in-the-beginning.html"><a href="in-the-beginning.html"><i class="fa fa-check"></i>In the beginning…</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#who-this-book-is-for"><i class="fa fa-check"></i><b>1.1</b> Who This Book Is For</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#what-this-book-isnt"><i class="fa fa-check"></i><b>1.2</b> What This Book Isn’t</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#structure-of-the-book"><i class="fa fa-check"></i><b>1.3</b> Structure of the Book</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#further-reading"><i class="fa fa-check"></i><b>1.4</b> Further Reading</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html#setting-up-a-working-code-execution-environment"><i class="fa fa-check"></i><b>2.1</b> Setting Up a Working Code Execution Environment</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="getting-started.html"><a href="getting-started.html#installing-the-docker-environment"><i class="fa fa-check"></i><b>2.1.1</b> Installing the Docker Environment</a></li>
<li class="chapter" data-level="2.1.2" data-path="getting-started.html"><a href="getting-started.html#installing-the-required-r-packages-manually"><i class="fa fa-check"></i><b>2.1.2</b> Installing the Required R Packages Manually</a></li>
<li class="chapter" data-level="2.1.3" data-path="getting-started.html"><a href="getting-started.html#other-installation-dependencies"><i class="fa fa-check"></i><b>2.1.3</b> Other Installation Dependencies</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="getting-started.html"><a href="getting-started.html#using-the-rstudio-environment"><i class="fa fa-check"></i><b>2.2</b> Using the RStudio Environment</a></li>
<li class="chapter" data-level="2.3" data-path="getting-started.html"><a href="getting-started.html#using-a-jupyter-notebook-environment"><i class="fa fa-check"></i><b>2.3</b> Using a Jupyter Notebook Environment</a></li>
<li class="chapter" data-level="2.4" data-path="getting-started.html"><a href="getting-started.html#exploring-the-book-as-an-online-interactive-textbook-not-yet"><i class="fa fa-check"></i><b>2.4</b> Exploring the Book as an Online Interactive Textbook (Not Yet!)</a></li>
<li class="chapter" data-level="2.5" data-path="getting-started.html"><a href="getting-started.html#serving-your-own-map-tiles-and-elevation-raster-images"><i class="fa fa-check"></i><b>2.5</b> Serving Your Own Map Tiles and Elevation Raster Images</a></li>
<li class="chapter" data-level="2.6" data-path="getting-started.html"><a href="getting-started.html#donate"><i class="fa fa-check"></i><b>2.6</b> Donate</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="importing-the-stage-route-data.html"><a href="importing-the-stage-route-data.html"><i class="fa fa-check"></i><b>3</b> Importing the Stage Route Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="importing-the-stage-route-data.html"><a href="importing-the-stage-route-data.html#downloading-the-stage-data-file"><i class="fa fa-check"></i><b>3.1</b> Downloading the Stage Data File</a></li>
<li class="chapter" data-level="3.2" data-path="importing-the-stage-route-data.html"><a href="importing-the-stage-route-data.html#opening-kml-geodata-files"><i class="fa fa-check"></i><b>3.2</b> Opening KML Geodata Files</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="importing-the-stage-route-data.html"><a href="importing-the-stage-route-data.html#using-rgdal-and-sp-to-open-geodata-files"><i class="fa fa-check"></i><b>3.2.1</b> Using <code>rgdal</code> and <code>sp</code> to Open Geodata Files</a></li>
<li class="chapter" data-level="3.2.2" data-path="importing-the-stage-route-data.html"><a href="importing-the-stage-route-data.html#using-sf-to-open-geodata-files"><i class="fa fa-check"></i><b>3.2.2</b> Using <code>sf</code> to Open Geodata Files</a></li>
<li class="chapter" data-level="3.2.3" data-path="importing-the-stage-route-data.html"><a href="importing-the-stage-route-data.html#accessing-route-data-as-a-geojson-string"><i class="fa fa-check"></i><b>3.2.3</b> Accessing Route Data as a geojson String</a></li>
<li class="chapter" data-level="3.2.4" data-path="importing-the-stage-route-data.html"><a href="importing-the-stage-route-data.html#saving-simple-features-data-to-various-geodata-file-formats"><i class="fa fa-check"></i><b>3.2.4</b> Saving Simple Features Data to Various Geodata File Formats</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="importing-the-stage-route-data.html"><a href="importing-the-stage-route-data.html#important-geodata-file-formats"><i class="fa fa-check"></i><b>3.3</b> Important Geodata File Formats</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="importing-the-stage-route-data.html"><a href="importing-the-stage-route-data.html#loading-geojson-data"><i class="fa fa-check"></i><b>3.3.1</b> Loading geojson Data</a></li>
<li class="chapter" data-level="3.3.2" data-path="importing-the-stage-route-data.html"><a href="importing-the-stage-route-data.html#loading-gpx-data"><i class="fa fa-check"></i><b>3.3.2</b> Loading GPX Data</a></li>
<li class="chapter" data-level="3.3.3" data-path="importing-the-stage-route-data.html"><a href="importing-the-stage-route-data.html#loading-flight-data-using-igc-format-gps-files"><i class="fa fa-check"></i><b>3.3.3</b> Loading Flight Data Using IGC format GPS Files</a></li>
<li class="chapter" data-level="3.3.4" data-path="importing-the-stage-route-data.html"><a href="importing-the-stage-route-data.html#reading-data-from-gps-devices"><i class="fa fa-check"></i><b>3.3.4</b> Reading Data from GPS Devices</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="working-with-route-data.html"><a href="working-with-route-data.html"><i class="fa fa-check"></i><b>4</b> Working with Route Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="working-with-route-data.html"><a href="working-with-route-data.html#loading-in-the-route-data"><i class="fa fa-check"></i><b>4.1</b> Loading in the Route Data</a></li>
<li class="chapter" data-level="4.2" data-path="working-with-route-data.html"><a href="working-with-route-data.html#access-a-specific-stage"><i class="fa fa-check"></i><b>4.2</b> Access a specific stage</a></li>
<li class="chapter" data-level="4.3" data-path="working-with-route-data.html"><a href="working-with-route-data.html#visual-preview-of-route-geodata"><i class="fa fa-check"></i><b>4.3</b> Visual Preview of Route Geodata</a></li>
<li class="chapter" data-level="4.4" data-path="working-with-route-data.html"><a href="working-with-route-data.html#previews-using-ggplot2"><i class="fa fa-check"></i><b>4.4</b> Previews using <code>ggplot2</code></a></li>
<li class="chapter" data-level="4.5" data-path="working-with-route-data.html"><a href="working-with-route-data.html#identifying-the-start-and-end-of-the-stage"><i class="fa fa-check"></i><b>4.5</b> Identifying the Start and End of the Stage</a></li>
<li class="chapter" data-level="4.6" data-path="working-with-route-data.html"><a href="working-with-route-data.html#extracting-route-fragments"><i class="fa fa-check"></i><b>4.6</b> Extracting Route Fragments</a></li>
<li class="chapter" data-level="4.7" data-path="working-with-route-data.html"><a href="working-with-route-data.html#previews-using-leaflet-interactive-maps"><i class="fa fa-check"></i><b>4.7</b> Previews Using <code>leaflet</code> Interactive Maps</a></li>
<li class="chapter" data-level="4.8" data-path="working-with-route-data.html"><a href="working-with-route-data.html#creating-buffer-regions-around-features"><i class="fa fa-check"></i><b>4.8</b> Creating Buffer regions around features</a></li>
<li class="chapter" data-level="4.9" data-path="working-with-route-data.html"><a href="working-with-route-data.html#adding-additional-features-to-leaflet-maps"><i class="fa fa-check"></i><b>4.9</b> Adding Additional Features to <code>leaflet</code> maps</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="working-with-route-data.html"><a href="working-with-route-data.html#add-minimap-navigation"><i class="fa fa-check"></i><b>4.9.1</b> Add “minimap” navigation</a></li>
<li class="chapter" data-level="4.9.2" data-path="working-with-route-data.html"><a href="working-with-route-data.html#add-custom-symbol-legends"><i class="fa fa-check"></i><b>4.9.2</b> Add Custom Symbol Legends</a></li>
<li class="chapter" data-level="4.9.3" data-path="working-with-route-data.html"><a href="working-with-route-data.html#adding-mini-charts-to-maps"><i class="fa fa-check"></i><b>4.9.3</b> Adding Mini-Charts to Maps</a></li>
<li class="chapter" data-level="4.9.4" data-path="working-with-route-data.html"><a href="working-with-route-data.html#adding-html-content-to-popups"><i class="fa fa-check"></i><b>4.9.4</b> Adding HTML content to popups</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="working-with-route-data.html"><a href="working-with-route-data.html#using-mapview-to-create-leaflet-maps"><i class="fa fa-check"></i><b>4.10</b> Using <code>mapview</code> To Create <em>leaflet</em> Maps</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="introducing-map-projections.html"><a href="introducing-map-projections.html"><i class="fa fa-check"></i><b>5</b> Introducing Map Projections</a>
<ul>
<li class="chapter" data-level="5.1" data-path="introducing-map-projections.html"><a href="introducing-map-projections.html#load-in-the-route-data"><i class="fa fa-check"></i><b>5.1</b> Load in the Route Data</a></li>
<li class="chapter" data-level="5.2" data-path="introducing-map-projections.html"><a href="introducing-map-projections.html#previewing-a-map-route"><i class="fa fa-check"></i><b>5.2</b> Previewing a Map Route</a></li>
<li class="chapter" data-level="5.3" data-path="introducing-map-projections.html"><a href="introducing-map-projections.html#plotting-latlong-naively"><i class="fa fa-check"></i><b>5.3</b> Plotting LatLong Naively</a></li>
<li class="chapter" data-level="5.4" data-path="introducing-map-projections.html"><a href="introducing-map-projections.html#using-the-utm-co-ordinate-reference-system"><i class="fa fa-check"></i><b>5.4</b> Using the UTM Co-ordinate Reference System</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="introducing-map-projections.html"><a href="introducing-map-projections.html#using-st_transform-for-projection-transformations"><i class="fa fa-check"></i><b>5.4.1</b> Using <code>st_transform</code> for Projection Transformations</a></li>
<li class="chapter" data-level="5.4.2" data-path="introducing-map-projections.html"><a href="introducing-map-projections.html#using-ggplot2coord_sf-to-render-projections"><i class="fa fa-check"></i><b>5.4.2</b> Using <code>ggplot2::coord_sf</code> to Render Projections</a></li>
<li class="chapter" data-level="5.4.3" data-path="introducing-map-projections.html"><a href="introducing-map-projections.html#exporting-the-route-data-as-a-dataframe"><i class="fa fa-check"></i><b>5.4.3</b> Exporting the Route Data As a Dataframe</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="introducing-map-projections.html"><a href="introducing-map-projections.html#alternative-crs-projections"><i class="fa fa-check"></i><b>5.5</b> Alternative CRS Projections</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="stage-route-annotations.html"><a href="stage-route-annotations.html"><i class="fa fa-check"></i><b>6</b> Stage Route Annotations</a>
<ul>
<li class="chapter" data-level="6.1" data-path="stage-route-annotations.html"><a href="stage-route-annotations.html#load-in-the-route-data-1"><i class="fa fa-check"></i><b>6.1</b> Load in the Route Data</a></li>
<li class="chapter" data-level="6.2" data-path="stage-route-annotations.html"><a href="stage-route-annotations.html#adding-split-point-locations"><i class="fa fa-check"></i><b>6.2</b> Adding Split Point Locations</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="stage-route-annotations.html"><a href="stage-route-annotations.html#using-geojson-to-find-the-distance-along-a-route"><i class="fa fa-check"></i><b>6.2.1</b> Using geojson to Find the Distance Along a Route</a></li>
<li class="chapter" data-level="6.2.2" data-path="stage-route-annotations.html"><a href="stage-route-annotations.html#using-rgeosginterpolate-to-find-the-distance-along-a-route"><i class="fa fa-check"></i><b>6.2.2</b> Using <code>rgeos::gInterpolate</code> to Find the Distance Along a Route</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="stage-route-annotations.html"><a href="stage-route-annotations.html#parallel-routes"><i class="fa fa-check"></i><b>6.3</b> Parallel Routes</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html"><i class="fa fa-check"></i><b>7</b> Accessing and Working With Elevation Data Raster Files</a>
<ul>
<li class="chapter" data-level="7.1" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#introducing-digital-elevation-model-dem-raster-images"><i class="fa fa-check"></i><b>7.1</b> Introducing Digital Elevation Model (DEM) Raster Images</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#what-is-raster-data"><i class="fa fa-check"></i><b>7.1.1</b> What Is Raster Data?</a></li>
<li class="chapter" data-level="7.1.2" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#what-are-digital-elevation-models-dems"><i class="fa fa-check"></i><b>7.1.2</b> What Are Digital Elevation Models (DEMs)?</a></li>
<li class="chapter" data-level="7.1.3" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#the-r-raster-package"><i class="fa fa-check"></i><b>7.1.3</b> The R <code>raster</code> Package</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#downloading-elevation-data"><i class="fa fa-check"></i><b>7.2</b> Downloading Elevation Data</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#loading-in-some-stage-data"><i class="fa fa-check"></i><b>7.2.1</b> Loading in some stage data</a></li>
<li class="chapter" data-level="7.2.2" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#obtaining-relief-elevation-raster-data-using-elevatr"><i class="fa fa-check"></i><b>7.2.2</b> Obtaining relief / elevation raster data using <code>elevatr</code></a></li>
<li class="chapter" data-level="7.2.3" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#plotting-rasters-as-ggplot-objects"><i class="fa fa-check"></i><b>7.2.3</b> Plotting Rasters As <code>ggplot</code> Objects</a></li>
<li class="chapter" data-level="7.2.4" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#interactive-raster-previews-with-plainview"><i class="fa fa-check"></i><b>7.2.4</b> Interactive Raster Previews with <code>plainview</code></a></li>
<li class="chapter" data-level="7.2.5" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#saving-the-image-raster-data-to-a-local-file"><i class="fa fa-check"></i><b>7.2.5</b> Saving the Image Raster Data to a Local File</a></li>
<li class="chapter" data-level="7.2.6" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#from-raster-to-terra"><i class="fa fa-check"></i><b>7.2.6</b> From <code>raster</code> to <code>terra</code></a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#overlaying-raster-images-on-leaflet-maps"><i class="fa fa-check"></i><b>7.3</b> Overlaying Raster Images on Leaflet Maps</a></li>
<li class="chapter" data-level="7.4" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#retrieving-descriptive-information-about-the-raster"><i class="fa fa-check"></i><b>7.4</b> Retrieving Descriptive Information About the Raster</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#using-mapzen-to-retrieve-dem-raster-data"><i class="fa fa-check"></i><b>7.4.1</b> Using Mapzen to Retrieve DEM raster data</a></li>
<li class="chapter" data-level="7.4.2" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#additional-elevation-data-downloading-tools"><i class="fa fa-check"></i><b>7.4.2</b> Additional Elevation Data Downloading Tools</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#manipulating-raster-images"><i class="fa fa-check"></i><b>7.5</b> Manipulating Raster Images</a></li>
<li class="chapter" data-level="7.6" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#ridge-maps"><i class="fa fa-check"></i><b>7.6</b> Ridge maps</a></li>
<li class="chapter" data-level="7.7" data-path="accessing-and-working-with-elevation-data-raster-files.html"><a href="accessing-and-working-with-elevation-data-raster-files.html#further-information"><i class="fa fa-check"></i><b>7.7</b> Further Information</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="determining-terrain-features-from-raster-data.html"><a href="determining-terrain-features-from-raster-data.html"><i class="fa fa-check"></i><b>8</b> Determining Terrain Features from Raster Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="determining-terrain-features-from-raster-data.html"><a href="determining-terrain-features-from-raster-data.html#load-in-base-data"><i class="fa fa-check"></i><b>8.1</b> Load in Base Data</a></li>
<li class="chapter" data-level="8.2" data-path="determining-terrain-features-from-raster-data.html"><a href="determining-terrain-features-from-raster-data.html#rendering-terrain-over-raster-images"><i class="fa fa-check"></i><b>8.2</b> Rendering Terrain Over Raster Images</a></li>
<li class="chapter" data-level="8.3" data-path="determining-terrain-features-from-raster-data.html"><a href="determining-terrain-features-from-raster-data.html#adding-contours-to-raster-images"><i class="fa fa-check"></i><b>8.3</b> Adding Contours to <code>raster</code> Images</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="using-rayshader-to-render-2d-elevation-and-shade-views.html"><a href="using-rayshader-to-render-2d-elevation-and-shade-views.html"><i class="fa fa-check"></i><b>9</b> Using <code>rayshader</code> to Render 2D Elevation and Shade Views</a>
<ul>
<li class="chapter" data-level="9.1" data-path="using-rayshader-to-render-2d-elevation-and-shade-views.html"><a href="using-rayshader-to-render-2d-elevation-and-shade-views.html#load-in-base-data-1"><i class="fa fa-check"></i><b>9.1</b> Load in Base Data</a></li>
<li class="chapter" data-level="9.2" data-path="using-rayshader-to-render-2d-elevation-and-shade-views.html"><a href="using-rayshader-to-render-2d-elevation-and-shade-views.html#rendering-imagery-from-the-dem-raster"><i class="fa fa-check"></i><b>9.2</b> Rendering imagery from the DEM raster</a></li>
<li class="chapter" data-level="9.3" data-path="using-rayshader-to-render-2d-elevation-and-shade-views.html"><a href="using-rayshader-to-render-2d-elevation-and-shade-views.html#roundtripping-rayshader-rasters-and-matrices"><i class="fa fa-check"></i><b>9.3</b> Roundtripping <code>rayshader</code> Rasters and Matrices</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="overlaying-2d-rayshader-maps.html"><a href="overlaying-2d-rayshader-maps.html"><i class="fa fa-check"></i><b>10</b> Overlaying 2D <code>rayshader</code> Maps</a>
<ul>
<li class="chapter" data-level="10.1" data-path="overlaying-2d-rayshader-maps.html"><a href="overlaying-2d-rayshader-maps.html#load-in-base-data-2"><i class="fa fa-check"></i><b>10.1</b> Load in Base Data</a></li>
<li class="chapter" data-level="10.2" data-path="overlaying-2d-rayshader-maps.html"><a href="overlaying-2d-rayshader-maps.html#adding-overlays"><i class="fa fa-check"></i><b>10.2</b> Adding overlays</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="overlaying-2d-rayshader-maps.html"><a href="overlaying-2d-rayshader-maps.html#adding-shadows-to-rayshader-maps"><i class="fa fa-check"></i><b>10.2.1</b> Adding Shadows to <code>rayshader</code> Maps</a></li>
<li class="chapter" data-level="10.2.2" data-path="overlaying-2d-rayshader-maps.html"><a href="overlaying-2d-rayshader-maps.html#adding-water-features"><i class="fa fa-check"></i><b>10.2.2</b> Adding Water Features</a></li>
<li class="chapter" data-level="10.2.3" data-path="overlaying-2d-rayshader-maps.html"><a href="overlaying-2d-rayshader-maps.html#overlaying-map-tiles"><i class="fa fa-check"></i><b>10.2.3</b> Overlaying Map Tiles</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="overlaying-2d-rayshader-maps.html"><a href="overlaying-2d-rayshader-maps.html#adding-a-stage-route-layer"><i class="fa fa-check"></i><b>10.3</b> Adding a Stage Route Layer</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="overlaying-2d-rayshader-maps.html"><a href="overlaying-2d-rayshader-maps.html#buffering-the-stage-route-view"><i class="fa fa-check"></i><b>10.3.1</b> Buffering the Stage Route View</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="overlaying-2d-rayshader-maps.html"><a href="overlaying-2d-rayshader-maps.html#modeling-increased-water-levels"><i class="fa fa-check"></i><b>10.4</b> Modeling Increased Water Levels</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="annotating-rayshader-maps.html"><a href="annotating-rayshader-maps.html"><i class="fa fa-check"></i><b>11</b> Annotating <code>rayshader</code> maps</a>
<ul>
<li class="chapter" data-level="11.1" data-path="annotating-rayshader-maps.html"><a href="annotating-rayshader-maps.html#load-in-base-data-3"><i class="fa fa-check"></i><b>11.1</b> Load in Base Data</a></li>
<li class="chapter" data-level="11.2" data-path="annotating-rayshader-maps.html"><a href="annotating-rayshader-maps.html#adding-a-title-to-a-map"><i class="fa fa-check"></i><b>11.2</b> Adding a Title to a Map</a></li>
<li class="chapter" data-level="11.3" data-path="annotating-rayshader-maps.html"><a href="annotating-rayshader-maps.html#adding-contours-to-rayshader-stage-maps"><i class="fa fa-check"></i><b>11.3</b> Adding Contours to <code>rayshader</code> Stage Maps</a></li>
<li class="chapter" data-level="11.4" data-path="annotating-rayshader-maps.html"><a href="annotating-rayshader-maps.html#overlaying-image-tiles"><i class="fa fa-check"></i><b>11.4</b> Overlaying Image Tiles</a></li>
<li class="chapter" data-level="11.5" data-path="annotating-rayshader-maps.html"><a href="annotating-rayshader-maps.html#plotting-route-layers-on-rayshader-maps"><i class="fa fa-check"></i><b>11.5</b> Plotting Route Layers on <code>rayshader</code> Maps</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="an-aside-the-penny-red.html"><a href="an-aside-the-penny-red.html"><i class="fa fa-check"></i>An Aside - The Penny Red</a>
<ul>
<li><a href="an-aside-the-penny-red.html#d-rendering-of-colour-images-using-rayshader">3D Rendering of Colour Images Using <code>rayshader</code></a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="an-aside-the-penny-red.html"><a href="an-aside-the-penny-red.html#rendering-the-image-directly-from-ggplot2"><i class="fa fa-check"></i><b>11.5.1</b> Rendering the image directly from <code>ggplot2</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="an-aside-the-penny-red.html"><a href="an-aside-the-penny-red.html#rendering-a-movie"><i class="fa fa-check"></i>Rendering a Movie</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="introducing-3d-rayshader-models.html"><a href="introducing-3d-rayshader-models.html"><i class="fa fa-check"></i><b>12</b> Introducing 3D <code>rayshader</code> Models</a>
<ul>
<li class="chapter" data-level="12.1" data-path="introducing-3d-rayshader-models.html"><a href="introducing-3d-rayshader-models.html#rendering-the-3d-maps-in-rstudio-and-knitrable-rmd-documents"><i class="fa fa-check"></i><b>12.1</b> Rendering the 3D Maps in <em>RStudio&amp; and <code>knitr</code>able </em>Rmd* Documents</a></li>
<li class="chapter" data-level="12.2" data-path="introducing-3d-rayshader-models.html"><a href="introducing-3d-rayshader-models.html#rendering-a-3d-view"><i class="fa fa-check"></i><b>12.2</b> Rendering a 3D View</a></li>
<li class="chapter" data-level="12.3" data-path="introducing-3d-rayshader-models.html"><a href="introducing-3d-rayshader-models.html#the-rayshader-3d-model-plinth"><i class="fa fa-check"></i><b>12.3</b> The <code>rayshader</code> 3D Model Plinth</a></li>
<li class="chapter" data-level="12.4" data-path="introducing-3d-rayshader-models.html"><a href="introducing-3d-rayshader-models.html#saving-the-widget-as-an-html-file"><i class="fa fa-check"></i><b>12.4</b> Saving the Widget as an HTML File</a></li>
<li class="chapter" data-level="12.5" data-path="introducing-3d-rayshader-models.html"><a href="introducing-3d-rayshader-models.html#rendering-the-model-to-an-image-file"><i class="fa fa-check"></i><b>12.5</b> Rendering the Model to an Image File</a></li>
<li class="chapter" data-level="12.6" data-path="introducing-3d-rayshader-models.html"><a href="introducing-3d-rayshader-models.html#rendering-high-quality-models"><i class="fa fa-check"></i><b>12.6</b> Rendering High Quality Models</a></li>
<li class="chapter" data-level="12.7" data-path="introducing-3d-rayshader-models.html"><a href="introducing-3d-rayshader-models.html#making-a-3d-print-file"><i class="fa fa-check"></i><b>12.7</b> Making a 3D Print File</a></li>
<li class="chapter" data-level="12.8" data-path="introducing-3d-rayshader-models.html"><a href="introducing-3d-rayshader-models.html#saving-a-movie-of-a-3d-model"><i class="fa fa-check"></i><b>12.8</b> Saving a Movie of a 3D Model</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="rendering-3d-rayshader-stage-route-maps.html"><a href="rendering-3d-rayshader-stage-route-maps.html"><i class="fa fa-check"></i><b>13</b> Rendering 3D <code>rayshader</code> Stage Route Maps</a>
<ul>
<li class="chapter" data-level="13.1" data-path="rendering-3d-rayshader-stage-route-maps.html"><a href="rendering-3d-rayshader-stage-route-maps.html#load-in-base-data-4"><i class="fa fa-check"></i><b>13.1</b> Load in Base Data</a></li>
<li class="chapter" data-level="13.2" data-path="rendering-3d-rayshader-stage-route-maps.html"><a href="rendering-3d-rayshader-stage-route-maps.html#setting-up-3d-embedded-plots"><i class="fa fa-check"></i><b>13.2</b> Setting Up 3D Embedded Plots</a></li>
<li class="chapter" data-level="13.3" data-path="rendering-3d-rayshader-stage-route-maps.html"><a href="rendering-3d-rayshader-stage-route-maps.html#rendering-a-simple-stage-route-model"><i class="fa fa-check"></i><b>13.3</b> Rendering a Simple Stage Route Model</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="rendering-3d-rayshader-stage-route-maps.html"><a href="rendering-3d-rayshader-stage-route-maps.html#decorating-3d-views-with-map-tile-overlays"><i class="fa fa-check"></i><b>13.3.1</b> Decorating 3D Views With Map Tile Overlays</a></li>
<li class="chapter" data-level="13.3.2" data-path="rendering-3d-rayshader-stage-route-maps.html"><a href="rendering-3d-rayshader-stage-route-maps.html#adding-labels-to-3d-rayshader-maps"><i class="fa fa-check"></i><b>13.3.2</b> Adding Labels to 3D <code>rayshader</code> Maps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="creating-cropped-3d-rayshader-models.html"><a href="creating-cropped-3d-rayshader-models.html"><i class="fa fa-check"></i><b>14</b> Creating Cropped 3d <code>rayshader</code> Models</a>
<ul>
<li class="chapter" data-level="14.1" data-path="creating-cropped-3d-rayshader-models.html"><a href="creating-cropped-3d-rayshader-models.html#load-in-base-data-5"><i class="fa fa-check"></i><b>14.1</b> Load in Base Data</a></li>
<li class="chapter" data-level="14.2" data-path="creating-cropped-3d-rayshader-models.html"><a href="creating-cropped-3d-rayshader-models.html#cropping-the-rendered-3d-view"><i class="fa fa-check"></i><b>14.2</b> Cropping the Rendered 3D View</a></li>
<li class="chapter" data-level="14.3" data-path="creating-cropped-3d-rayshader-models.html"><a href="creating-cropped-3d-rayshader-models.html#cropping-3d-models-to-a-buffered-region"><i class="fa fa-check"></i><b>14.3</b> Cropping 3D Models to a Buffered Region</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="obtaining-shadows-for-a-particular-date-and-time.html"><a href="obtaining-shadows-for-a-particular-date-and-time.html"><i class="fa fa-check"></i><b>15</b> Obtaining Shadows for a Particular Date and Time</a>
<ul>
<li class="chapter" data-level="15.1" data-path="obtaining-shadows-for-a-particular-date-and-time.html"><a href="obtaining-shadows-for-a-particular-date-and-time.html#load-in-base-data-6"><i class="fa fa-check"></i><b>15.1</b> Load in Base Data</a></li>
<li class="chapter" data-level="15.2" data-path="obtaining-shadows-for-a-particular-date-and-time.html"><a href="obtaining-shadows-for-a-particular-date-and-time.html#sunlight-times-vocabulary"><i class="fa fa-check"></i><b>15.2</b> Sunlight Times Vocabulary</a></li>
<li class="chapter" data-level="15.3" data-path="obtaining-shadows-for-a-particular-date-and-time.html"><a href="obtaining-shadows-for-a-particular-date-and-time.html#finding-sunrise-and-sunset-times"><i class="fa fa-check"></i><b>15.3</b> Finding Sunrise and Sunset Times</a></li>
<li class="chapter" data-level="15.4" data-path="obtaining-shadows-for-a-particular-date-and-time.html"><a href="obtaining-shadows-for-a-particular-date-and-time.html#animating-shade"><i class="fa fa-check"></i><b>15.4</b> Animating Shade</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="composing-rayshader-stills-and-movies.html"><a href="composing-rayshader-stills-and-movies.html"><i class="fa fa-check"></i><b>16</b> Composing <code>rayshader</code> Stills and Movies</a>
<ul>
<li class="chapter" data-level="16.1" data-path="composing-rayshader-stills-and-movies.html"><a href="composing-rayshader-stills-and-movies.html#load-in-base-data-7"><i class="fa fa-check"></i><b>16.1</b> Load in Base Data</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="composing-rayshader-stills-and-movies.html"><a href="composing-rayshader-stills-and-movies.html#adding-complications"><i class="fa fa-check"></i><b>16.1.1</b> Adding Complications…</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="composing-rayshader-stills-and-movies.html"><a href="composing-rayshader-stills-and-movies.html#setting-up-the-camera-shots-in-rayshader"><i class="fa fa-check"></i><b>16.2</b> Setting Up the Camera Shots in <code>rayshader</code></a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="composing-rayshader-stills-and-movies.html"><a href="composing-rayshader-stills-and-movies.html#depth-of-field"><i class="fa fa-check"></i><b>16.2.1</b> Depth of Field</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="composing-rayshader-stills-and-movies.html"><a href="composing-rayshader-stills-and-movies.html#camera-positioning"><i class="fa fa-check"></i><b>16.3</b> Camera Positioning</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="composing-rayshader-stills-and-movies.html"><a href="composing-rayshader-stills-and-movies.html#lighting-effects"><i class="fa fa-check"></i><b>16.3.1</b> Lighting Effects</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="composing-rayshader-stills-and-movies.html"><a href="composing-rayshader-stills-and-movies.html#making-3d-video-tracking-shots"><i class="fa fa-check"></i><b>16.4</b> Making 3D Video Tracking Shots</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html"><i class="fa fa-check"></i><b>17</b> Stage Route Analysis</a>
<ul>
<li class="chapter" data-level="17.1" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#load-in-base-data-8"><i class="fa fa-check"></i><b>17.1</b> Load in Base Data</a></li>
<li class="chapter" data-level="17.2" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#generating-stage-route-profiles"><i class="fa fa-check"></i><b>17.2</b> Generating Stage Route Profiles</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#an-aside---twists-and-turns-of-rally-stages"><i class="fa fa-check"></i><b>17.2.1</b> An Aside - Twists and Turns of Rally Stages</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#finding-stage-route-lengths"><i class="fa fa-check"></i><b>17.3</b> Finding Stage Route Lengths</a></li>
<li class="chapter" data-level="17.4" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#using-ecological-movement-analysis-tools-to-analyse-stage-routes"><i class="fa fa-check"></i><b>17.4</b> Using Ecological Movement Analysis Tools to Analyse Stage Routes</a></li>
<li class="chapter" data-level="17.5" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#using-trajr-for-stage-route-profiling"><i class="fa fa-check"></i><b>17.5</b> Using <code>trajr</code> for Stage Route Profiling</a>
<ul>
<li class="chapter" data-level="17.5.1" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#smoothing-a-trajectory"><i class="fa fa-check"></i><b>17.5.1</b> Smoothing a Trajectory</a></li>
<li class="chapter" data-level="17.5.2" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#resampling-locations"><i class="fa fa-check"></i><b>17.5.2</b> Resampling Locations</a></li>
<li class="chapter" data-level="17.5.3" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#resampling-against-distance"><i class="fa fa-check"></i><b>17.5.3</b> Resampling Against Distance</a></li>
<li class="chapter" data-level="17.5.4" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#splitting-a-trajectory"><i class="fa fa-check"></i><b>17.5.4</b> Splitting a Trajectory</a></li>
<li class="chapter" data-level="17.5.5" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#rotating-the-stage-trajectory"><i class="fa fa-check"></i><b>17.5.5</b> Rotating the Stage Trajectory</a></li>
<li class="chapter" data-level="17.5.6" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#straightness-and-sinuosity"><i class="fa fa-check"></i><b>17.5.6</b> Straightness and Sinuosity</a></li>
<li class="chapter" data-level="17.5.7" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#directional-change"><i class="fa fa-check"></i><b>17.5.7</b> Directional Change</a></li>
<li class="chapter" data-level="17.5.8" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#tracking-turning-angles"><i class="fa fa-check"></i><b>17.5.8</b> Tracking Turning Angles</a></li>
<li class="chapter" data-level="17.5.9" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#visualising-trajectory-direction-changes"><i class="fa fa-check"></i><b>17.5.9</b> Visualising Trajectory Direction Changes</a></li>
<li class="chapter" data-level="17.5.10" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#using-amt-for-stage-route-profiling"><i class="fa fa-check"></i><b>17.5.10</b> Using <code>amt</code> for Stage Route Profiling</a></li>
<li class="chapter" data-level="17.5.11" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#creating-tracks"><i class="fa fa-check"></i><b>17.5.11</b> Creating Tracks</a></li>
<li class="chapter" data-level="17.5.12" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#converting-to-other-track-formats"><i class="fa fa-check"></i><b>17.5.12</b> Converting to Other Track Formats</a></li>
<li class="chapter" data-level="17.5.13" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#using-amt-for-stage-route-analysis"><i class="fa fa-check"></i><b>17.5.13</b> Using <code>amt</code> for Stage Route Analysis</a></li>
<li class="chapter" data-level="17.5.14" data-path="stage-route-analysis.html"><a href="stage-route-analysis.html#using-rlft-for-profiling-along-a-stage-route"><i class="fa fa-check"></i><b>17.5.14</b> Using `rLFT`` for Profiling Along a Stage Route</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html"><i class="fa fa-check"></i><b>18</b> Elevation Data Revisited</a>
<ul>
<li class="chapter" data-level="18.1" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html#load-in-base-data-9"><i class="fa fa-check"></i><b>18.1</b> Load in Base Data</a></li>
<li class="chapter" data-level="18.2" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html#generating-elevation-maps"><i class="fa fa-check"></i><b>18.2</b> Generating Elevation Maps</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html#accessing-elevation-values-along-a-route-from-an-elevation-raster"><i class="fa fa-check"></i><b>18.2.1</b> Accessing Elevation Values Along a Route from an Elevation Raster</a></li>
<li class="chapter" data-level="18.2.2" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html#using-geospheredistgeo-to-find-distance-along-a-route"><i class="fa fa-check"></i><b>18.2.2</b> Using <code>geosphere::distGeo</code> to Find Distance Along a Route</a></li>
<li class="chapter" data-level="18.2.3" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html#using-spspdists-to-find-distance-along-a-route"><i class="fa fa-check"></i><b>18.2.3</b> Using <code>sp::spDists</code> to Find Distance Along a Route</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html#generating-a-3d-ribbon-plot-of-the-stage-route"><i class="fa fa-check"></i><b>18.3</b> Generating a 3D Ribbon Plot of the Stage Route</a></li>
<li class="chapter" data-level="18.4" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html#identifying-road-type"><i class="fa fa-check"></i><b>18.4</b> Identifying Road Type</a></li>
<li class="chapter" data-level="18.5" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html#displaying-route-twistiness-and-elevation"><i class="fa fa-check"></i><b>18.5</b> Displaying Route Twistiness and Elevation</a>
<ul>
<li class="chapter" data-level="18.5.1" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html#making-a-3d-print-file-of-the-model"><i class="fa fa-check"></i><b>18.5.1</b> Making a 3D Print File of the Model</a></li>
<li class="chapter" data-level="18.5.2" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html#rendering-a-3d-movie-of-the-model"><i class="fa fa-check"></i><b>18.5.2</b> Rendering a 3D movie of the Model</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html#using-the-slopes-package-to-analyse-stage-elevation-data"><i class="fa fa-check"></i><b>18.6</b> Using the <code>slopes</code> Package to Analyse Stage Elevation Data</a></li>
<li class="chapter" data-level="18.7" data-path="elevation-data-revisited.html"><a href="elevation-data-revisited.html#analysing-route-elevation-from-first-principles"><i class="fa fa-check"></i><b>18.7</b> Analysing Route Elevation from First Principles</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="adding-openstreetmap-data.html"><a href="adding-openstreetmap-data.html"><i class="fa fa-check"></i><b>19</b> Adding <em>OpenStreetMap</em> Data</a>
<ul>
<li class="chapter" data-level="19.1" data-path="adding-openstreetmap-data.html"><a href="adding-openstreetmap-data.html#load-in-base-data-10"><i class="fa fa-check"></i><b>19.1</b> Load in Base Data</a></li>
<li class="chapter" data-level="19.2" data-path="adding-openstreetmap-data.html"><a href="adding-openstreetmap-data.html#adding-detail-and-features-from-openstreetmap"><i class="fa fa-check"></i><b>19.2</b> Adding Detail and Features from OpenStreetMap</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="adding-openstreetmap-data.html"><a href="adding-openstreetmap-data.html#plotting-osm-highways"><i class="fa fa-check"></i><b>19.2.1</b> Plotting OSM Highways</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="adding-openstreetmap-data.html"><a href="adding-openstreetmap-data.html#viewing-roads-in-the-vicinity-of-a-route"><i class="fa fa-check"></i><b>19.3</b> Viewing Roads in the Vicinity of a Route</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="adding-openstreetmap-data.html"><a href="adding-openstreetmap-data.html#using-sfst_buffer-to-create-buffered-areas"><i class="fa fa-check"></i><b>19.3.1</b> Using <code>sf::st_buffer</code> to Create Buffered Areas</a></li>
<li class="chapter" data-level="19.3.2" data-path="adding-openstreetmap-data.html"><a href="adding-openstreetmap-data.html#using-rgeosgbuffer-to-create-buffered-areas"><i class="fa fa-check"></i><b>19.3.2</b> Using <code>rgeos::gBuffer</code> to Create Buffered Areas</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="adding-openstreetmap-data.html"><a href="adding-openstreetmap-data.html#adding-additional-data-from-osm"><i class="fa fa-check"></i><b>19.4</b> Adding Additional Data From OSM</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="adding-openstreetmap-data.html"><a href="adding-openstreetmap-data.html#adding-building-layers-from-openstreetmap"><i class="fa fa-check"></i><b>19.4.1</b> Adding Building Layers from <em>OpenStreetMap</em></a></li>
<li class="chapter" data-level="19.4.2" data-path="adding-openstreetmap-data.html"><a href="adding-openstreetmap-data.html#the-wide-variety-of-osm-features"><i class="fa fa-check"></i><b>19.4.2</b> The Wide Variety of OSM Features</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="creating-a-road-book.html"><a href="creating-a-road-book.html"><i class="fa fa-check"></i><b>20</b> Creating A Road Book</a>
<ul>
<li class="chapter" data-level="20.1" data-path="creating-a-road-book.html"><a href="creating-a-road-book.html#load-in-base-data-11"><i class="fa fa-check"></i><b>20.1</b> Load in Base Data</a></li>
<li class="chapter" data-level="20.2" data-path="creating-a-road-book.html"><a href="creating-a-road-book.html#using-sfnetworks-to-represent-routes-and-road-networks"><i class="fa fa-check"></i><b>20.2</b> Using <code>sfnetworks</code> to Represent Routes and Road Networks</a></li>
<li class="chapter" data-level="20.3" data-path="creating-a-road-book.html"><a href="creating-a-road-book.html#analysing-road-networks-with-sfnetworks"><i class="fa fa-check"></i><b>20.3</b> Analysing Road Networks with <code>sfnetworks</code></a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="creating-a-road-book.html"><a href="creating-a-road-book.html#creating-an-sfnetworks-graph"><i class="fa fa-check"></i><b>20.3.1</b> Creating an <code>sfnetworks</code> Graph</a></li>
<li class="chapter" data-level="20.3.2" data-path="creating-a-road-book.html"><a href="creating-a-road-book.html#filtering-an-sfnetworks-graph"><i class="fa fa-check"></i><b>20.3.2</b> Filtering an <code>sfnetworks</code> Graph</a></li>
<li class="chapter" data-level="20.3.3" data-path="creating-a-road-book.html"><a href="creating-a-road-book.html#viewing-a-buffered-area-around-a-junction-node"><i class="fa fa-check"></i><b>20.3.3</b> Viewing a Buffered Area Around a Junction Node</a></li>
<li class="chapter" data-level="20.3.4" data-path="creating-a-road-book.html"><a href="creating-a-road-book.html#snapping-a-route-to-a-road-network"><i class="fa fa-check"></i><b>20.3.4</b> Snapping a Route to a Road Network</a></li>
<li class="chapter" data-level="20.3.5" data-path="creating-a-road-book.html"><a href="creating-a-road-book.html#snapping-a-full-stage-route-to-the-road-network"><i class="fa fa-check"></i><b>20.3.5</b> Snapping a Full Stage Route to the Road Network</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="creating-a-road-book.html"><a href="creating-a-road-book.html#using-dodgr-to-represent-routes-and-road-networks"><i class="fa fa-check"></i><b>20.4</b> Using <code>dodgr</code> to Represent Routes and Road Networks</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="where-next.html"><a href="where-next.html"><i class="fa fa-check"></i><b>21</b> Where Next?</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Visualising WRC Rally Stages With <code>rayshader</code> and R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="working-with-route-data" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Working with Route Data</h1>
<p>Having learned how to load in the route data in the previous chapter, we’ll use this chapter to explore in a little bit more detail what we can actually do with it.</p>
<div id="loading-in-the-route-data" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Loading in the Route Data</h2>
<p>Each chapter in this book is intended to be self-contained in terms of the code contained within the chapter. So we’ll need to start by loading the data in.</p>
<p>For convenience, I’ll load the data in from the geojson file that we created from the original KML data file in the previous chapter.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="working-with-route-data.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb40-2"><a href="working-with-route-data.html#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="working-with-route-data.html#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co"># We previously converted the KML file to a geojson file</span></span>
<span id="cb40-4"><a href="working-with-route-data.html#cb40-4" aria-hidden="true" tabindex="-1"></a>geojson_filename <span class="ot">=</span> <span class="st">&#39;montecarlo_2021.geojson&#39;</span></span>
<span id="cb40-5"><a href="working-with-route-data.html#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="working-with-route-data.html#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co"># The geojson file contains essentially the same data (except the zeroed Z values)</span></span>
<span id="cb40-7"><a href="working-with-route-data.html#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co"># as the original KML file</span></span>
<span id="cb40-8"><a href="working-with-route-data.html#cb40-8" aria-hidden="true" tabindex="-1"></a>geojson_sf <span class="ot">=</span> <span class="fu">st_read</span>(geojson_filename)</span></code></pre></div>
<pre><code>## Reading layer `montecarlo_2021&#39; from data source `/Users/tonyhirst/Documents/GitHub/visualising-rally-stages/montecarlo_2021.geojson&#39; using driver `GeoJSON&#39;
## Simple feature collection with 9 features and 2 fields
## geometry type:  LINESTRING
## dimension:      XY
## bbox:           xmin: 5.243488 ymin: 43.87633 xmax: 6.951953 ymax: 44.81973
## geographic CRS: WGS 84</code></pre>
<p>Howsoever we have loaded in the data, we should have some sort of data structure that contains one or more routes. In the case of our loaded in KML file, or the geojson object, each route is presented in the form of a linestring, made up as a list of consecutive co-ordinate pairs along the route.</p>
<p>To simplify the view of the data we might expect to see, let’s cast the original KML object obtained from the WRC KML file directly into a dataframe:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="working-with-route-data.html#cb42-1" aria-hidden="true" tabindex="-1"></a>kml_df <span class="ot">=</span> <span class="fu">as.data.frame</span>(geojson_sf)</span>
<span id="cb42-2"><a href="working-with-route-data.html#cb42-2" aria-hidden="true" tabindex="-1"></a>kml_df</span></code></pre></div>
<pre><code>##       Name Description                       geometry
## 1     SS 1             LINESTRING (5.894486 44.735...
## 2     SS 2             LINESTRING (6.09604 44.8040...
## 3   SS 3/6             LINESTRING (5.722938 44.487...
## 4   SS 4/7             LINESTRING (5.355052 44.500...
## 5     SS 5             LINESTRING (5.518181 44.283...
## 6  SS 9/11             LINESTRING (6.30413 44.4428...
## 7    SS 10             LINESTRING (6.57791 44.6499...
## 8 SS 12/14             LINESTRING (6.900294 43.950...
## 9 SS 13/15             LINESTRING (6.77335 43.8763...</code></pre>
</div>
<div id="access-a-specific-stage" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Access a specific stage</h2>
<p>We can access a specific stage, which is to say, a specific row of the features dataframe, by direct indexing:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="working-with-route-data.html#cb44-1" aria-hidden="true" tabindex="-1"></a>geojson_sf[<span class="dv">3</span>,]</span></code></pre></div>
<pre><code>## Simple feature collection with 1 feature and 2 fields
## geometry type:  LINESTRING
## dimension:      XY
## bbox:           xmin: 5.615949 ymin: 44.45972 xmax: 5.722938 ymax: 44.5148
## geographic CRS: WGS 84
##     Name Description                       geometry
## 3 SS 3/6             LINESTRING (5.722938 44.487...</code></pre>
<p>We can find the length of each stage route using the <code>sf::st_length()</code> function:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="working-with-route-data.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_length</span>(geojson_sf)</span></code></pre></div>
<pre><code>## Units: [m]
## [1] 21069.62 21343.85 20378.19 21983.22 22858.86 18649.37 21220.66 13185.96
## [9] 14850.85</code></pre>
<p>Or the length of a specific stage:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="working-with-route-data.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_length</span>(geojson_sf[<span class="dv">1</span>,])</span></code></pre></div>
<pre><code>## 21069.62 [m]</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="working-with-route-data.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 21069.62</span></span></code></pre></div>
<p>Note that you may need to take this distances with a pinch of salt. The WRC website gives the stage length of SS1 as 20.58 km, for example, not 21.07 km, so it’s not clear whether the route in the KML file is the competitive route, or whether is starts and finishes with time controls at either end of the route. It may be that the stage distance also follows the racing line, which is likely to be shorter than than the piecewise linear route we access from the KML file.</p>
<p>There are also several different ways in which we can calculate the distance each of which may have slightly different parameter settings baked in, such as the distance round the equator, that are likely to influence the result of any distance calculations we perform.</p>
<p>It is also worth noting that elevation changes mean that the actual route length is likely to be <em>greater</em> than the distance measured over a 2 dimensional route in the XY (longitude-latitude) plane.</p>
</div>
<div id="visual-preview-of-route-geodata" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Visual Preview of Route Geodata</h2>
<p>Let’s generate a quick preview of all the stages. The dataframe contains a column of encoded linestrings. We can preview these directly with a simple plot:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="working-with-route-data.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(geojson_sf))</span></code></pre></div>
<p><img src="images/stage-route-preview-kml_peview-1.png" width="672" /></p>
<p>This shows the rough outline of each stage, and their relative positions, but represents little more than a back of a napkin sketch.</p>
</div>
<div id="previews-using-ggplot2" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Previews using <code>ggplot2</code></h2>
<p>In some circumstances, we may want to work with the route data in <code>ggplot2</code>.</p>
<p>The <code>ggplot2</code> package is aware of simple features (<code>sf</code>) representations, although we need to inform it that such a dataset has been provided via the <a href="https://ggplot2.tidyverse.org/reference/ggsf.html"><code>ggplot2::geom_sf()</code> function</a>.</p>
<p>We can preview the data as follows, firstly over all features:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="working-with-route-data.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># https://ggplot2.tidyverse.org/reference/ggsf.html</span></span>
<span id="cb52-2"><a href="working-with-route-data.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb52-3"><a href="working-with-route-data.html#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="working-with-route-data.html#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>geojson_sf) <span class="sc">+</span> <span class="fu">geom_sf</span>()</span></code></pre></div>
<p><img src="images/stage-route-preview-gg-preview-1.png" width="672" /></p>
<p>Note how the co-ordinate axes are rendered in degrees longitude (x coordinate) and degrees latitude (y co-ordinate) using a familiar projection (that is, the x and y axes are in a proportion that you are likely to recognise from most atlases and (web) maps).</p>
<p>The <code>ggpubr::ggarrange()</code> function allows us to create an arrangement of plots made up from a list separate plot for each stage. We can also take the opportunity to demonstrate how we might start styling the x-tick labels using the <code>axis.text.x</code> parameter to the <code>ggplot::theme()</code>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="working-with-route-data.html#cb53-1" aria-hidden="true" tabindex="-1"></a>stageplot <span class="ot">=</span> <span class="cf">function</span>(x, output) {</span>
<span id="cb53-2"><a href="working-with-route-data.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data=</span>x) <span class="sc">+</span> <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb53-3"><a href="working-with-route-data.html#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>,</span>
<span id="cb53-4"><a href="working-with-route-data.html#cb53-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">face=</span><span class="st">&#39;italic&#39;</span>,  <span class="at">size =</span> <span class="dv">7</span>),</span>
<span id="cb53-5"><a href="working-with-route-data.html#cb53-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">&#39;italic&#39;</span>,  <span class="at">size =</span> <span class="dv">7</span>))</span>
<span id="cb53-6"><a href="working-with-route-data.html#cb53-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb53-7"><a href="working-with-route-data.html#cb53-7" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb53-8"><a href="working-with-route-data.html#cb53-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-9"><a href="working-with-route-data.html#cb53-9" aria-hidden="true" tabindex="-1"></a>stages_kml <span class="ot">=</span> kml_df<span class="sc">$</span>geometry</span>
<span id="cb53-10"><a href="working-with-route-data.html#cb53-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-11"><a href="working-with-route-data.html#cb53-11" aria-hidden="true" tabindex="-1"></a><span class="co">#apply(X, MARGIN, FUN, …)</span></span>
<span id="cb53-12"><a href="working-with-route-data.html#cb53-12" aria-hidden="true" tabindex="-1"></a>ggpubr<span class="sc">::</span><span class="fu">ggarrange</span>(<span class="at">plotlist=</span><span class="fu">lapply</span>(stages_kml, stageplot))</span></code></pre></div>
<p><img src="images/stage-route-preview-gg-pubr-1.png" width="672" /></p>
<p>We can visualise the data for just a single route by limiting the data we pass to the <code>ggplot()</code> function:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="working-with-route-data.html#cb54-1" aria-hidden="true" tabindex="-1"></a>g <span class="ot">=</span> <span class="fu">ggplot</span>(<span class="at">data=</span>geojson_sf[<span class="dv">1</span>,]) <span class="sc">+</span> <span class="fu">geom_sf</span>()</span>
<span id="cb54-2"><a href="working-with-route-data.html#cb54-2" aria-hidden="true" tabindex="-1"></a>g</span></code></pre></div>
<p><img src="images/stage-route-preview-gg-single-route-1.png" width="672" />
In rendering this map, note how we can assign the plot to a variable (<code>g</code>) and then display the map by referencing the variable.</p>
</div>
<div id="identifying-the-start-and-end-of-the-stage" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Identifying the Start and End of the Stage</h2>
<p>We can grab the co-ordinates of locations at the start and end of the stage, assuming that the linestrings are presented in the order <em>start-finish</em>:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="working-with-route-data.html#cb55-1" aria-hidden="true" tabindex="-1"></a>stage_coords <span class="ot">=</span> <span class="fu">as.data.frame</span>(<span class="fu">st_coordinates</span>(kml_df[<span class="dv">1</span>, ]<span class="sc">$</span>geometry))</span>
<span id="cb55-2"><a href="working-with-route-data.html#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="working-with-route-data.html#cb55-3" aria-hidden="true" tabindex="-1"></a>stage_start_coords <span class="ot">=</span> stage_coords[<span class="dv">1</span>, ]</span>
<span id="cb55-4"><a href="working-with-route-data.html#cb55-4" aria-hidden="true" tabindex="-1"></a>stage_end_coords <span class="ot">=</span> stage_coords[<span class="fu">nrow</span>(stage_coords), ]</span>
<span id="cb55-5"><a href="working-with-route-data.html#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="working-with-route-data.html#cb55-6" aria-hidden="true" tabindex="-1"></a>first_and_last <span class="ot">=</span> stage_coords[<span class="fu">c</span>(<span class="dv">1</span>,<span class="fu">nrow</span>(stage_coords)),]</span>
<span id="cb55-7"><a href="working-with-route-data.html#cb55-7" aria-hidden="true" tabindex="-1"></a>first_and_last<span class="sc">$</span>label<span class="ot">=</span><span class="fu">c</span>(<span class="st">&#39;SS1 stage start&#39;</span>, <span class="st">&#39;SS1 stage end&#39;</span>)</span>
<span id="cb55-8"><a href="working-with-route-data.html#cb55-8" aria-hidden="true" tabindex="-1"></a>first_and_last<span class="sc">$</span>typ<span class="ot">=</span><span class="fu">c</span>(<span class="st">&#39;start&#39;</span>, <span class="st">&#39;stop&#39;</span>)</span>
<span id="cb55-9"><a href="working-with-route-data.html#cb55-9" aria-hidden="true" tabindex="-1"></a>first_and_last<span class="sc">$</span>color<span class="ot">=</span><span class="fu">c</span>(<span class="st">&#39;green&#39;</span>, <span class="st">&#39;red&#39;</span>)</span>
<span id="cb55-10"><a href="working-with-route-data.html#cb55-10" aria-hidden="true" tabindex="-1"></a>first_and_last</span></code></pre></div>
<pre><code>##            X        Y L1           label   typ color
## 1   5.894486 44.73562  1 SS1 stage start start green
## 419 5.940715 44.81912  1   SS1 stage end  stop   red</code></pre>
<p>We can then highlight these features on our stage plot:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="working-with-route-data.html#cb57-1" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span> </span>
<span id="cb57-2"><a href="working-with-route-data.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>X, <span class="at">y=</span>Y,  <span class="at">color =</span> typ),<span class="at">size =</span><span class="dv">5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb57-3"><a href="working-with-route-data.html#cb57-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">data=</span>first_and_last) <span class="sc">+</span></span>
<span id="cb57-4"><a href="working-with-route-data.html#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;red&quot;</span>))</span></code></pre></div>
<p><img src="images/stage-route-preview-gg-route-start-stop-1.png" width="672" /></p>
</div>
<div id="extracting-route-fragments" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Extracting Route Fragments</h2>
<p>We can readily extract a fragment from a line by indexing against the line segment indices. For example, to gran the first 10 straighline segments from the linestring we can extract just those coordinates and build a new linestring from them:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="working-with-route-data.html#cb58-1" aria-hidden="true" tabindex="-1"></a>cc <span class="ot">=</span> <span class="fu">as.data.frame</span>(<span class="fu">st_coordinates</span>(geojson_sf[<span class="dv">1</span>,]))[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span>
<span id="cb58-2"><a href="working-with-route-data.html#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="working-with-route-data.html#cb58-3" aria-hidden="true" tabindex="-1"></a>route_segment <span class="ot">=</span> <span class="fu">st_linestring</span>(<span class="fu">cbind</span>(<span class="at">x=</span>cc[,<span class="dv">1</span>], <span class="at">y=</span>cc[,<span class="dv">2</span>]))</span>
<span id="cb58-4"><a href="working-with-route-data.html#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="working-with-route-data.html#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co"># We can plot the linestring using the same sort of geo projection</span></span>
<span id="cb58-6"><a href="working-with-route-data.html#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co"># as was applied to the original route</span></span>
<span id="cb58-7"><a href="working-with-route-data.html#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(route_segment) <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">crs=</span><span class="fu">st_crs</span>(geojson_sf[<span class="dv">1</span>,]))</span></code></pre></div>
<p><img src="images/stage-route-preview-unnamed-chunk-30-1.png" width="672" /></p>
</div>
<div id="previews-using-leaflet-interactive-maps" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> Previews Using <code>leaflet</code> Interactive Maps</h2>
<p>Simple plots of the route gives us a snapshot of the shapes of various routes and their relative positioning, but it’s far more useful to preview the routes over a simple map background, such as an interactive OpenStreetMap map.</p>
<p>The <a href="https://rstudio.github.io/leaflet/"><code>leaflet</code> package</a> provides a range of tools for working with the <em>leaflet</em> Javascript package to visualise such maps.</p>
<p>The <code>leaflet::leaflet</code> function creates interactive maps based around map tiles that can be retrieved from a variety of map tile providers. Some providers may require an API key or access credentials. For moderate use, we can freely access <em>OpenStreetMap</em> or <a href="http://maps.stamen.com/"><em>Stamen</em></a> tiles in a variety of themes without any form of authentication:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="working-with-route-data.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb59-2"><a href="working-with-route-data.html#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="working-with-route-data.html#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternatively, we might set:</span></span>
<span id="cb59-4"><a href="working-with-route-data.html#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># stages_kml = kml[,&#39;geometry&#39;]</span></span>
<span id="cb59-5"><a href="working-with-route-data.html#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="working-with-route-data.html#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that leaflet seems to requires us to to have dropped </span></span>
<span id="cb59-7"><a href="working-with-route-data.html#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co"># the Z and M dimensions from the linestrings</span></span>
<span id="cb59-8"><a href="working-with-route-data.html#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>(stages_kml) <span class="sc">%&gt;%</span> </span>
<span id="cb59-9"><a href="working-with-route-data.html#cb59-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(<span class="st">&quot;Stamen.TonerLite&quot;</span>,</span>
<span id="cb59-10"><a href="working-with-route-data.html#cb59-10" aria-hidden="true" tabindex="-1"></a>                   <span class="co"># Other themes include:</span></span>
<span id="cb59-11"><a href="working-with-route-data.html#cb59-11" aria-hidden="true" tabindex="-1"></a>                   <span class="co"># Stamen.TonerLite, Stamen.Terrain, OpenStreetMap.Mapnik</span></span>
<span id="cb59-12"><a href="working-with-route-data.html#cb59-12" aria-hidden="true" tabindex="-1"></a>                   <span class="co"># Stamen.TerrainBackground, OpenTopoMap</span></span>
<span id="cb59-13"><a href="working-with-route-data.html#cb59-13" aria-hidden="true" tabindex="-1"></a>                   <span class="at">group =</span> <span class="st">&quot;OSM&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-14"><a href="working-with-route-data.html#cb59-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolylines</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">weight =</span> <span class="dv">3</span>)</span></code></pre></div>
<div id="htmlwidget-9cdbd387efa452c814ad" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-9cdbd387efa452c814ad">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Stamen.TonerLite",null,"OSM",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolylines","args":[[[[{"lng":[5.894486,5.894618,5.894778,5.894805,5.894672,5.894407,5.893912,5.893578,5.89172,5.891433,5.891298,5.891362,5.891597,5.891862,5.892002,5.892008,5.891335,5.891103,5.890532,5.890608,5.890752,5.890765,5.890347,5.890073,5.889517,5.888297,5.888073,5.887965,5.887875,5.887657,5.88689,5.88652,5.886002,5.885592,5.885238,5.885072,5.88518,5.885023,5.884815,5.884872,5.885,5.884995,5.884855,5.884797,5.884568,5.883923,5.883837,5.883753,5.883783,5.88435,5.884825,5.885332,5.8858,5.886523,5.886617,5.886647,5.886798,5.887068,5.88712,5.887133,5.88729,5.887937,5.888073,5.888083,5.888248,5.888592,5.88934,5.889938,5.890837,5.891675,5.892485,5.893257,5.89399,5.89436,5.894845,5.895225,5.895593,5.896387,5.897093,5.897828,5.898207,5.898468,5.898717,5.900633,5.901327,5.901892,5.902313,5.90256,5.903095,5.903202,5.903262,5.90323,5.90317,5.903258,5.90362,5.903788,5.904052,5.904285,5.904627,5.905452,5.906387,5.907607,5.907985,5.908453,5.908712,5.909033,5.909068,5.908958,5.909072,5.909323,5.90987,5.910563,5.911877,5.912927,5.913292,5.91384,5.914295,5.9149,5.915582,5.915852,5.916025,5.916333,5.916562,5.91679,5.917125,5.9179,5.9184,5.918885,5.919097,5.919548,5.919783,5.920475,5.920688,5.92087,5.920875,5.920827,5.920995,5.921395,5.921412,5.920982,5.921027,5.921287,5.92148,5.921745,5.922175,5.922148,5.921965,5.9214,5.92114,5.92095,5.920675,5.9202,5.919993,5.919103,5.918942,5.918908,5.91899,5.919562,5.919752,5.92002,5.921048,5.92208,5.922703,5.922657,5.922437,5.92197,5.921622,5.920627,5.920498,5.920517,5.920718,5.920915,5.920888,5.920757,5.920453,5.920268,5.920187,5.92016,5.920012,5.918987,5.91837,5.918117,5.917647,5.91742,5.917013,5.916813,5.916697,5.91671,5.916878,5.917182,5.917687,5.918422,5.91845,5.918353,5.918148,5.917752,5.917443,5.91733,5.91714,5.916813,5.91629,5.915897,5.914883,5.914543,5.914068,5.913522,5.913033,5.912768,5.912445,5.912283,5.912147,5.912072,5.912133,5.912568,5.912832,5.912825,5.912773,5.91281,5.912988,5.913285,5.913622,5.913927,5.914192,5.914358,5.91436,5.914188,5.913967,5.913828,5.913823,5.913948,5.91417,5.914197,5.914305,5.91427,5.914095,5.91375,5.913197,5.913027,5.913002,5.913017,5.912968,5.912898,5.912798,5.912717,5.912788,5.913113,5.912883,5.912682,5.912222,5.911108,5.910588,5.910152,5.90938,5.90938,5.909433,5.909318,5.908048,5.908023,5.908007,5.908057,5.909883,5.909967,5.91064,5.910868,5.911248,5.91177,5.911905,5.912322,5.912872,5.912878,5.912767,5.912632,5.912555,5.912577,5.912693,5.91328,5.913268,5.913135,5.912285,5.91167,5.910647,5.910585,5.910753,5.91095,5.910808,5.908725,5.908577,5.908197,5.90758,5.907173,5.90739,5.907838,5.907972,5.90799,5.907885,5.905927,5.905868,5.905638,5.905362,5.900993,5.901082,5.903422,5.9037,5.90425,5.904528,5.904733,5.90656,5.90689,5.908113,5.90843,5.908685,5.908988,5.909205,5.909415,5.909985,5.910178,5.910315,5.910322,5.910107,5.909825,5.90947,5.909243,5.90924,5.909368,5.909533,5.909942,5.9103,5.91113,5.911322,5.91144,5.911567,5.911702,5.911883,5.912622,5.912777,5.912923,5.912922,5.912788,5.912355,5.911995,5.911683,5.911475,5.911032,5.910925,5.910842,5.910702,5.910555,5.910327,5.910068,5.909375,5.907205,5.907203,5.907607,5.907998,5.90805,5.907942,5.907455,5.907487,5.907668,5.908275,5.908487,5.910033,5.911102,5.91225,5.91285,5.913228,5.91413,5.914372,5.914657,5.915142,5.915562,5.915683,5.915785,5.915827,5.91597,5.916547,5.917078,5.917288,5.917522,5.917802,5.918248,5.918513,5.919397,5.920775,5.921145,5.922952,5.924433,5.926068,5.926332,5.926693,5.927,5.927723,5.928357,5.929227,5.930022,5.93052,5.931418,5.931788,5.932423,5.933035,5.933205,5.933252,5.93317,5.93295,5.932512,5.932275,5.932185,5.932282,5.93308,5.934547,5.935048,5.935415,5.935765,5.935815,5.936858,5.937347,5.938643,5.93957,5.940715],"lat":[44.735616,44.735796,44.73602,44.736208,44.736365,44.736417,44.73641,44.736497,44.737378,44.737608,44.737893,44.738188,44.738433,44.738658,44.738918,44.739387,44.741625,44.741962,44.742657,44.74279,44.742898,44.743062,44.74377,44.743987,44.744232,44.74453,44.744737,44.745003,44.745667,44.745898,44.746435,44.746815,44.747272,44.74733,44.747517,44.748068,44.748778,44.749218,44.749597,44.749812,44.750048,44.750315,44.750867,44.750932,44.750988,44.751062,44.751127,44.751353,44.751575,44.753332,44.753957,44.754798,44.75512,44.755598,44.755822,44.756077,44.756328,44.756687,44.756955,44.75802,44.758138,44.758372,44.75855,44.759195,44.75932,44.759498,44.760225,44.76047,44.760835,44.76128,44.76183,44.762027,44.762045,44.762152,44.76235,44.76246,44.762647,44.763272,44.763717,44.764305,44.764535,44.764783,44.764887,44.765207,44.765412,44.765695,44.76592,44.765963,44.765932,44.765985,44.766065,44.766243,44.766387,44.766508,44.766705,44.766948,44.767515,44.76774,44.767895,44.768142,44.768365,44.768782,44.768843,44.768835,44.768937,44.769163,44.769257,44.76962,44.769793,44.769933,44.770123,44.770462,44.770788,44.771277,44.77134,44.771315,44.771228,44.771043,44.770973,44.771028,44.771188,44.771963,44.772965,44.77316,44.77328,44.773465,44.773702,44.773825,44.773983,44.774365,44.774362,44.774198,44.774252,44.774432,44.774467,44.774512,44.774672,44.775088,44.775253,44.776207,44.777338,44.777908,44.77814,44.778312,44.778505,44.778628,44.77868,44.77858,44.778478,44.7783,44.777967,44.777552,44.777358,44.776912,44.776952,44.777008,44.777157,44.777622,44.778018,44.778758,44.77972,44.781063,44.781725,44.781883,44.781998,44.782127,44.78215,44.782042,44.782128,44.782252,44.782398,44.782522,44.782598,44.782627,44.782563,44.782457,44.7823,44.781642,44.781512,44.781063,44.78094,44.780973,44.781227,44.781407,44.781885,44.781898,44.781787,44.781712,44.781588,44.78139,44.780877,44.780423,44.780263,44.780123,44.780053,44.780027,44.779868,44.779863,44.779973,44.780237,44.78046,44.780543,44.780592,44.780512,44.780267,44.780218,44.779988,44.779862,44.77955,44.779287,44.779275,44.77937,44.779522,44.779962,44.780192,44.780358,44.780543,44.780757,44.780927,44.781007,44.780978,44.780932,44.780993,44.781143,44.781225,44.78133,44.781453,44.781653,44.781892,44.78233,44.782543,44.782932,44.78315,44.783198,44.78321,44.78316,44.783293,44.783433,44.783637,44.783867,44.783905,44.783902,44.783795,44.783398,44.783165,44.782805,44.782575,44.782473,44.782417,44.782327,44.78216,44.781902,44.7811,44.780938,44.780742,44.780678,44.780717,44.780727,44.780783,44.781145,44.79076,44.790812,44.790758,44.790833,44.791168,44.791373,44.791545,44.792348,44.793062,44.793258,44.793328,44.793388,44.793523,44.793947,44.79429,44.795408,44.795598,44.795728,44.796073,44.796227,44.796453,44.796518,44.79795,44.79971,44.799782,44.80001,44.799948,44.799553,44.799285,44.799187,44.799322,44.799532,44.799738,44.799898,44.80007,44.802173,44.804155,44.809063,44.80906,44.809308,44.80942,44.811205,44.811485,44.812413,44.812887,44.81303,44.813443,44.813468,44.813323,44.813375,44.81352,44.813737,44.813768,44.813678,44.813305,44.81325,44.813323,44.813395,44.813653,44.813977,44.814555,44.814698,44.814817,44.81489,44.814838,44.814518,44.814175,44.81372,44.813743,44.813867,44.814092,44.81409,44.813998,44.813553,44.813527,44.813592,44.813657,44.813743,44.813948,44.814327,44.814623,44.814665,44.814595,44.814623,44.814687,44.815028,44.815663,44.815937,44.816035,44.81612,44.816173,44.816267,44.816475,44.816692,44.816845,44.817043,44.817663,44.817827,44.817975,44.818295,44.818302,44.818165,44.818338,44.818103,44.818068,44.818143,44.818452,44.818645,44.819067,44.819351,44.819288,44.819158,44.818613,44.81839,44.818192,44.817657,44.817015,44.816947,44.817012,44.817302,44.81782,44.817922,44.818122,44.818235,44.818285,44.81815,44.818208,44.818157,44.818283,44.818502,44.818532,44.818432,44.818453,44.818528,44.818495,44.818455,44.818573,44.818555,44.818448,44.818557,44.818683,44.818867,44.819062,44.819217,44.819327,44.81937,44.819463,44.819537,44.819582,44.819732,44.819687,44.819545,44.819312,44.819283,44.818918,44.818875,44.81897,44.818925,44.819117]}]],[[{"lng":[6.09604,6.09614,6.096473,6.096618,6.097015,6.097267,6.097862,6.098257,6.098562,6.09925,6.099775,6.10022,6.100605,6.101337,6.101763,6.1026,6.103063,6.104747,6.105628,6.105978,6.106105,6.106345,6.106512,6.106932,6.107183,6.107375,6.107658,6.10784,6.108015,6.108117,6.108352,6.108575,6.108855,6.109147,6.109555,6.109482,6.109127,6.108812,6.107918,6.107288,6.107232,6.107207,6.107037,6.107083,6.107337,6.108457,6.108932,6.10893,6.108758,6.10849,6.10794,6.107675,6.107195,6.106615,6.10631,6.105283,6.104653,6.103713,6.103362,6.103102,6.102068,6.101362,6.100483,6.100213,6.099992,6.099967,6.0999,6.099247,6.098875,6.098555,6.09803,6.09779,6.097242,6.096812,6.096275,6.095085,6.094635,6.092412,6.092083,6.091828,6.091552,6.091367,6.091223,6.090288,6.090013,6.089463,6.088098,6.08691,6.086452,6.085732,6.085195,6.084868,6.084462,6.083753,6.082938,6.082483,6.081672,6.080648,6.07984,6.0782,6.077538,6.076168,6.075833,6.075347,6.074952,6.073945,6.073695,6.072792,6.0725,6.071747,6.069805,6.06913,6.06847,6.06831,6.066868,6.066822,6.066953,6.067148,6.067113,6.066875,6.066625,6.066315,6.065752,6.065385,6.065032,6.064837,6.064383,6.064377,6.064428,6.064265,6.064087,6.063953,6.063603,6.062775,6.062393,6.062062,6.061552,6.061197,6.059467,6.058338,6.056993,6.056085,6.055882,6.05553,6.055195,6.055017,6.054832,6.054242,6.053808,6.053362,6.051687,6.051392,6.050478,6.050058,6.0497,6.049427,6.048167,6.046688,6.045867,6.044865,6.044,6.042663,6.042463,6.04228,6.041992,6.040788,6.0402,6.038863,6.038445,6.037215,6.035298,6.03433,6.033933,6.034425,6.034873,6.03545,6.03649,6.037332,6.037917,6.038355,6.03865,6.038967,6.039268,6.039348,6.039365,6.039223,6.038545,6.037965,6.037547,6.036717,6.03647,6.036435,6.036558,6.036442,6.036248,6.035988,6.035725,6.035308,6.034735,6.034128,6.033807,6.033143,6.03303,6.032805,6.032392,6.032278,6.032295,6.032527,6.033122,6.033485,6.033705,6.03368,6.03353,6.03328,6.032632,6.032252,6.03201,6.031778,6.0314,6.03121,6.03102,6.03018,6.029017,6.028235,6.026415,6.026135,6.025752,6.024967,6.024692,6.023625,6.02342,6.023235,6.022985,6.02206,6.021228,6.019712,6.018442,6.017377,6.017157,6.016915,6.016783,6.016707,6.016603,6.01633,6.015625,6.014948,6.014885,6.014137,6.01377,6.013737,6.014178,6.01439,6.014443,6.014453,6.014577,6.01494,6.016003,6.016175,6.016248,6.016223,6.01674,6.016837,6.017072,6.017353,6.018255,6.018452,6.01856,6.018533,6.018355,6.018442,6.018628,6.019127,6.019353,6.019662,6.020222,6.021048,6.022732,6.023475,6.024717,6.026278,6.026575,6.026888,6.02723,6.027422,6.028063,6.028705,6.029237,6.029767,6.029922,6.030035,6.030545,6.030655,6.03065,6.0305,6.030068,6.029975,6.02982,6.029427,6.02905,6.02856,6.027693,6.027688,6.027798,6.027708,6.02758,6.027615,6.027732,6.027742,6.027972,6.02822,6.028975,6.030377,6.030915,6.031435,6.033032,6.033565,6.03458,6.034892,6.03546,6.036158,6.03671,6.037815,6.038083,6.03842,6.03885,6.039476,6.040029,6.040474,6.040689,6.040994,6.041048,6.041102,6.041112,6.041257,6.041461,6.042223,6.043564,6.043639,6.043687,6.043789,6.044224,6.044658,6.045302,6.045495,6.045758,6.046042,6.04615,6.046686,6.046987,6.047212,6.047695,6.047941,6.048215,6.048644,6.049089,6.049749,6.049932,6.050264,6.050774,6.050886,6.050838,6.050951,6.050988,6.051004,6.050951,6.051047,6.050919,6.050688,6.049218,6.049266,6.049674,6.050184,6.051074,6.051165,6.05123,6.051616,6.051938,6.052378,6.052464,6.052506,6.05263,6.052651,6.052678,6.053064,6.053016,6.052748,6.05256,6.052426,6.052324,6.052324,6.052388,6.052421,6.052571,6.053177,6.053708,6.053896,6.054438,6.054588,6.054878,6.055226,6.055462,6.055618,6.055816,6.055972,6.056235,6.056846,6.057426,6.058107,6.058413,6.058515,6.058676,6.058949,6.059126,6.05977,6.060011,6.060247,6.060451,6.060918,6.061202,6.061559],"lat":[44.804064,44.804262,44.804737,44.804907,44.805317,44.805447,44.805678,44.805875,44.80592,44.805912,44.806025,44.806233,44.806408,44.806532,44.806683,44.806872,44.807097,44.808187,44.808565,44.808647,44.808575,44.808103,44.808018,44.807907,44.807778,44.807778,44.80791,44.807993,44.808,44.807922,44.807338,44.807015,44.806837,44.806667,44.806283,44.806202,44.8061,44.806033,44.805622,44.805345,44.805212,44.80501,44.804753,44.804638,44.804543,44.804195,44.803802,44.803708,44.803573,44.80352,44.803467,44.803352,44.803043,44.802892,44.802965,44.802808,44.802898,44.802695,44.802533,44.802408,44.8018,44.801633,44.801425,44.801398,44.801445,44.801555,44.801538,44.800952,44.800603,44.800425,44.8002,44.799978,44.799305,44.798937,44.798645,44.7982,44.79815,44.798087,44.798012,44.797875,44.797537,44.797308,44.797228,44.796937,44.796715,44.795875,44.794632,44.793807,44.793463,44.793207,44.793098,44.793013,44.792763,44.792152,44.79175,44.791582,44.791368,44.790953,44.790403,44.7895,44.789228,44.788857,44.788643,44.788287,44.788115,44.787853,44.787653,44.786292,44.786022,44.78555,44.784658,44.784427,44.784332,44.784303,44.78379,44.783632,44.783313,44.782943,44.782803,44.782655,44.782605,44.782578,44.782332,44.78233,44.782183,44.782022,44.781242,44.781002,44.78068,44.780328,44.780117,44.78004,44.779975,44.779917,44.779805,44.77964,44.779225,44.77911,44.778855,44.778765,44.778663,44.778678,44.778645,44.77848,44.778325,44.7783,44.778317,44.778457,44.778437,44.778293,44.777628,44.777463,44.777175,44.777095,44.776983,44.777015,44.77736,44.777535,44.777558,44.777497,44.77732,44.77696,44.776768,44.77657,44.776428,44.776108,44.775837,44.775048,44.77491,44.774703,44.77443,44.774103,44.77396,44.773942,44.773857,44.773993,44.773915,44.773695,44.773455,44.773227,44.773178,44.773218,44.773293,44.773263,44.773177,44.772972,44.772337,44.771987,44.771748,44.771047,44.770527,44.770243,44.769133,44.768963,44.76886,44.768848,44.768922,44.769117,44.769147,44.76915,44.76923,44.769458,44.769453,44.76934,44.768857,44.76863,44.768212,44.767283,44.766508,44.765717,44.764987,44.764733,44.764497,44.764313,44.764053,44.763805,44.763483,44.763147,44.762682,44.762398,44.762365,44.762312,44.762057,44.76206,44.761358,44.761165,44.760852,44.760458,44.76021,44.759615,44.759407,44.758962,44.758815,44.758595,44.758087,44.757332,44.756507,44.755958,44.755718,44.75529,44.754953,44.754888,44.754858,44.754905,44.755092,44.75517,44.755158,44.754685,44.753103,44.752895,44.752757,44.752538,44.752323,44.751733,44.751497,44.75117,44.75034,44.74985,44.749467,44.74862,44.745908,44.745213,44.744678,44.744295,44.74347,44.742947,44.742475,44.74232,44.74148,44.741368,44.741308,44.741215,44.741097,44.740887,44.740713,44.740613,44.739775,44.739462,44.739237,44.738828,44.738578,44.738187,44.737812,44.737415,44.736848,44.735998,44.734757,44.734195,44.733777,44.733518,44.732992,44.732793,44.732707,44.732562,44.732278,44.732082,44.731078,44.730237,44.729732,44.729167,44.727773,44.727402,44.726917,44.726527,44.726275,44.726098,44.725825,44.72545,44.725417,44.725482,44.725807,44.726133,44.7262,44.726177,44.72596,44.726033,44.726275,44.726262,44.726067,44.726007,44.726068,44.726262,44.726247,44.726107,44.725922,44.725894,44.725953,44.726093,44.725969,44.725637,44.725562,44.72547,44.725449,44.725336,44.725283,44.725251,44.725304,44.725267,44.725197,44.724961,44.724499,44.724382,44.723952,44.723781,44.723684,44.723647,44.723588,44.723094,44.722745,44.722643,44.722547,44.72245,44.722268,44.722043,44.721855,44.721742,44.721528,44.721056,44.720525,44.720331,44.719452,44.719081,44.718963,44.718706,44.717939,44.717547,44.717424,44.717359,44.716861,44.716721,44.716769,44.71678,44.716721,44.71671,44.716705,44.716641,44.716501,44.716335,44.716356,44.716126,44.715954,44.715906,44.715697,44.715713,44.715584,44.715353,44.715182,44.714988,44.714634,44.71427,44.714114,44.714071,44.714044,44.714361,44.71479,44.714962,44.715155,44.715165,44.715117,44.715031,44.715042,44.715171,44.715359,44.715418,44.715439,44.71553,44.715203,44.714677,44.714447,44.714291,44.714152,44.714012,44.71391,44.713277,44.713116,44.713009,44.712869,44.712451,44.712204,44.711947]}]],[[{"lng":[5.722938,5.722681,5.722321,5.722337,5.722445,5.722139,5.72193,5.721645,5.721275,5.720825,5.720707,5.719124,5.718904,5.718754,5.718282,5.718228,5.717499,5.716957,5.716683,5.71619,5.715964,5.715766,5.715685,5.714854,5.714741,5.714484,5.713384,5.712236,5.711786,5.711549,5.709763,5.708948,5.706861,5.705643,5.705042,5.704538,5.702387,5.701357,5.701309,5.701153,5.700917,5.700145,5.699748,5.699099,5.69868,5.698568,5.698391,5.698342,5.697865,5.697725,5.697682,5.697677,5.697779,5.698074,5.69868,5.698814,5.698938,5.698938,5.698793,5.698407,5.698364,5.698417,5.698423,5.698289,5.698053,5.697677,5.697597,5.697543,5.697178,5.697007,5.697012,5.697677,5.698444,5.698589,5.698771,5.698809,5.699297,5.699324,5.699292,5.698466,5.69772,5.696835,5.695875,5.695483,5.69485,5.694716,5.694426,5.694281,5.693337,5.693214,5.692935,5.690371,5.689571,5.68948,5.687286,5.687147,5.686369,5.68513,5.685097,5.684153,5.682008,5.681578,5.681466,5.68057,5.680098,5.679916,5.679486,5.678456,5.677968,5.677239,5.676198,5.676042,5.675227,5.674889,5.673478,5.673119,5.671493,5.670957,5.670555,5.669396,5.668344,5.668173,5.66777,5.667642,5.666805,5.666478,5.666247,5.665823,5.665743,5.665351,5.665094,5.664836,5.663989,5.663897,5.663624,5.66335,5.662985,5.662878,5.662739,5.662562,5.662503,5.662363,5.662079,5.661376,5.658667,5.657369,5.656902,5.65562,5.655282,5.657267,5.657777,5.658313,5.658683,5.658946,5.659032,5.659193,5.659391,5.659429,5.659515,5.659885,5.660266,5.660625,5.66062,5.660443,5.659584,5.659257,5.658914,5.658935,5.65878,5.658774,5.658823,5.658404,5.658479,5.658393,5.658292,5.658216,5.658415,5.658898,5.65827,5.65937,5.659649,5.659557,5.659445,5.659461,5.659595,5.659783,5.659863,5.660126,5.660314,5.660748,5.660818,5.661167,5.661338,5.661376,5.661628,5.661634,5.661585,5.66158,5.661778,5.661859,5.661757,5.661784,5.661746,5.661263,5.661097,5.661086,5.661162,5.661086,5.66077,5.660679,5.660598,5.660266,5.660319,5.660416,5.660679,5.661006,5.661467,5.661451,5.661542,5.661601,5.661778,5.662251,5.662674,5.662835,5.663506,5.66371,5.66401,5.66415,5.664305,5.664444,5.664509,5.664509,5.664439,5.66415,5.664085,5.66386,5.663758,5.663661,5.663431,5.663404,5.663506,5.663286,5.663237,5.663264,5.663125,5.663366,5.663699,5.663983,5.663946,5.662969,5.662621,5.662395,5.662111,5.661462,5.661285,5.660416,5.659901,5.659724,5.659456,5.659397,5.659359,5.658737,5.658431,5.65768,5.657342,5.657208,5.655802,5.655556,5.655465,5.655164,5.654783,5.654311,5.654145,5.654064,5.654016,5.653678,5.653421,5.652927,5.652632,5.65245,5.652375,5.652337,5.65224,5.652267,5.652257,5.651865,5.651752,5.651624,5.651506,5.65105,5.650889,5.650352,5.65024,5.650009,5.649918,5.649864,5.649816,5.649853,5.649843,5.649762,5.649231,5.649145,5.649204,5.64921,5.64929,5.649317,5.649236,5.648925,5.648791,5.64848,5.648019,5.64753,5.647429,5.64693,5.646484,5.646307,5.645787,5.645637,5.645471,5.645336,5.645015,5.644913,5.643979,5.64384,5.643824,5.643851,5.643931,5.644435,5.64495,5.645058,5.64517,5.645213,5.645208,5.645063,5.644671,5.644483,5.643749,5.643421,5.642692,5.642509,5.642349,5.641619,5.641034,5.640744,5.639908,5.639178,5.63906,5.638288,5.636909,5.636759,5.636598,5.636566,5.636303,5.636083,5.636035,5.635981,5.636008,5.636153,5.636174,5.636077,5.636077,5.636576,5.636641,5.636657,5.63663,5.635954,5.635922,5.635943,5.63612,5.636394,5.636592,5.637553,5.637783,5.638137,5.638272,5.638384,5.638599,5.638577,5.638384,5.637987,5.637467,5.637188,5.636501,5.636346,5.635756,5.635563,5.634516,5.634355,5.63398,5.633127,5.631974,5.631083,5.630397,5.629629,5.629125,5.627682,5.627248,5.6261,5.625139,5.624748,5.624372,5.624056,5.623927,5.623863,5.624088,5.624168,5.624168,5.624109,5.623943,5.623895,5.623841,5.62324,5.623139,5.623117,5.623417,5.623476,5.623423,5.623037,5.622758,5.622328,5.622345,5.622323,5.622119,5.621926,5.621765,5.621454,5.620429,5.620129,5.619528,5.618273,5.617163,5.616739,5.616642,5.615949],"lat":[44.487328,44.487296,44.487135,44.486979,44.486271,44.485579,44.485171,44.48456,44.483916,44.483004,44.48295,44.482639,44.482602,44.482495,44.481416,44.481336,44.481019,44.480687,44.480644,44.480697,44.480644,44.480424,44.480204,44.479319,44.479163,44.478777,44.478133,44.477811,44.477693,44.47764,44.476948,44.476583,44.476127,44.475827,44.475666,44.475515,44.4747,44.474636,44.47462,44.474544,44.474121,44.473085,44.472758,44.471809,44.47087,44.470103,44.469303,44.469234,44.468949,44.468831,44.468767,44.468627,44.468579,44.468606,44.46837,44.468268,44.467769,44.467635,44.467394,44.467324,44.467281,44.466712,44.466058,44.465843,44.465656,44.465457,44.465382,44.465248,44.464792,44.464352,44.464266,44.463505,44.462968,44.462829,44.462303,44.462222,44.46182,44.461622,44.461579,44.461412,44.46123,44.461176,44.460881,44.460694,44.46012,44.459937,44.45976,44.459717,44.460275,44.460361,44.460763,44.462029,44.462973,44.463059,44.464234,44.464288,44.464363,44.464551,44.464551,44.464567,44.464964,44.465345,44.465382,44.465586,44.465522,44.465543,44.465677,44.466004,44.466203,44.466283,44.466181,44.466219,44.466627,44.466911,44.467463,44.467753,44.468445,44.468767,44.468917,44.468992,44.469373,44.469491,44.469749,44.469792,44.470033,44.470312,44.470585,44.471503,44.471556,44.471674,44.471921,44.472286,44.47278,44.472796,44.472704,44.472603,44.472554,44.472538,44.472452,44.47176,44.471701,44.471653,44.471658,44.471841,44.472565,44.473504,44.473901,44.474931,44.475274,44.476368,44.47684,44.477232,44.477237,44.476975,44.476948,44.47698,44.477114,44.477484,44.477769,44.477956,44.478246,44.478316,44.478579,44.47868,44.478739,44.478793,44.478857,44.479759,44.480005,44.480102,44.480359,44.481186,44.481459,44.481577,44.482339,44.482446,44.483283,44.484131,44.485365,44.486368,44.486926,44.48751,44.487666,44.48787,44.488074,44.488106,44.488079,44.487698,44.48751,44.486679,44.48589,44.48508,44.485053,44.485086,44.485558,44.485686,44.485815,44.485976,44.4864,44.487532,44.488733,44.488948,44.489576,44.490193,44.490563,44.490686,44.492016,44.492456,44.493529,44.494103,44.49421,44.494468,44.494634,44.494618,44.494355,44.494157,44.493551,44.493325,44.492998,44.492944,44.492832,44.492311,44.491512,44.491308,44.490584,44.49016,44.489983,44.489796,44.489468,44.489431,44.489479,44.489731,44.490176,44.490557,44.490761,44.490922,44.490944,44.490997,44.491314,44.491517,44.491796,44.492059,44.492413,44.492762,44.493449,44.494977,44.495369,44.495541,44.495664,44.497268,44.497397,44.497402,44.497311,44.49692,44.496855,44.496683,44.496657,44.496716,44.496882,44.497123,44.498164,44.499205,44.499248,44.49958,44.499929,44.499999,44.500514,44.50054,44.500514,44.500374,44.500551,44.500492,44.500519,44.500583,44.500669,44.501957,44.502391,44.502826,44.503099,44.503453,44.503646,44.50406,44.504392,44.504843,44.50503,44.505583,44.50583,44.505964,44.506044,44.506125,44.506205,44.507423,44.507595,44.507809,44.507868,44.507874,44.507831,44.507337,44.507182,44.50701,44.506581,44.506345,44.505991,44.505851,44.50569,44.505529,44.505352,44.505089,44.505009,44.504934,44.504886,44.504875,44.504918,44.505411,44.505674,44.505706,44.505658,44.505653,44.50568,44.505739,44.506146,44.506243,44.50672,44.506822,44.506892,44.506956,44.506983,44.506817,44.506554,44.506532,44.506543,44.506586,44.506688,44.506854,44.507053,44.507182,44.507879,44.508083,44.508238,44.508308,44.508405,44.509081,44.509633,44.509875,44.510239,44.510749,44.510792,44.510631,44.510583,44.51055,44.510427,44.510309,44.509912,44.509461,44.509456,44.509478,44.510116,44.510325,44.510411,44.510604,44.510663,44.511039,44.511178,44.511307,44.511371,44.511843,44.511897,44.511967,44.512117,44.512283,44.512353,44.512466,44.512508,44.512696,44.512841,44.513023,44.513785,44.513855,44.513984,44.514134,44.514193,44.514091,44.514107,44.514096,44.51385,44.513785,44.513732,44.513678,44.513415,44.512927,44.512503,44.512439,44.51253,44.512476,44.512498,44.512927,44.513066,44.513233,44.513265,44.513377,44.513512,44.513635,44.513694,44.51385,44.51422,44.514424,44.514617,44.514681,44.514751,44.514762,44.514772,44.514804,44.514745,44.514665,44.514461,44.514316,44.514188,44.514032,44.513769,44.51349,44.513131,44.51304,44.512846,44.512761,44.512734,44.512755,44.512846,44.512857,44.512809,44.512616,44.512321,44.512031,44.511994,44.511941]}]],[[{"lng":[5.355052,5.35491,5.354858,5.354741,5.35459,5.354429,5.353855,5.353292,5.353104,5.352627,5.352402,5.352311,5.352133,5.351946,5.351297,5.351195,5.350991,5.349687,5.349258,5.348915,5.348722,5.348496,5.348378,5.348352,5.348239,5.347751,5.34722,5.34701,5.346967,5.346796,5.346689,5.346522,5.346377,5.346056,5.345632,5.345267,5.34494,5.344661,5.34428,5.343867,5.343566,5.343218,5.342365,5.3423,5.342252,5.34229,5.343196,5.343685,5.344307,5.344736,5.345063,5.345739,5.346479,5.346678,5.347509,5.34767,5.347804,5.347896,5.347896,5.347879,5.347772,5.347542,5.34664,5.346619,5.346485,5.346297,5.34605,5.345262,5.345111,5.34509,5.344934,5.344312,5.344269,5.344199,5.343969,5.343808,5.342821,5.342714,5.342574,5.342048,5.341732,5.341496,5.341421,5.341094,5.340643,5.340546,5.340123,5.340037,5.339731,5.339715,5.339822,5.340176,5.340246,5.340332,5.340412,5.340589,5.340697,5.341206,5.341367,5.341764,5.342402,5.342531,5.343009,5.342976,5.342864,5.342531,5.342338,5.342123,5.341925,5.341367,5.341142,5.340938,5.340584,5.340187,5.34001,5.339484,5.339162,5.339017,5.338706,5.337076,5.336818,5.336561,5.335557,5.335531,5.335504,5.335439,5.33538,5.334833,5.334747,5.33435,5.333557,5.332543,5.332317,5.3317,5.32912,5.328761,5.328117,5.327822,5.327741,5.327103,5.326438,5.325891,5.324973,5.324512,5.324287,5.323879,5.323761,5.323504,5.323455,5.323445,5.323579,5.323198,5.323107,5.323064,5.322989,5.322989,5.32293,5.322763,5.32234,5.321422,5.321331,5.321352,5.321776,5.321969,5.322254,5.323573,5.323766,5.323783,5.323734,5.323343,5.321873,5.321513,5.320719,5.320097,5.319464,5.31918,5.318896,5.318563,5.3183,5.318236,5.318209,5.318032,5.317683,5.317361,5.31719,5.317098,5.317002,5.316814,5.316562,5.316224,5.315993,5.315886,5.315838,5.315768,5.315607,5.315221,5.314781,5.314352,5.314003,5.313456,5.313231,5.313021,5.312979,5.313075,5.313107,5.313172,5.313488,5.31352,5.313472,5.313252,5.313075,5.312818,5.3127,5.312539,5.312276,5.311932,5.311364,5.310801,5.310634,5.310339,5.309905,5.309631,5.309417,5.309191,5.308987,5.308784,5.308698,5.307941,5.307711,5.307121,5.306954,5.306863,5.306246,5.306118,5.305935,5.305908,5.30579,5.305806,5.305844,5.306177,5.306724,5.306793,5.306826,5.306804,5.306654,5.305581,5.305436,5.305168,5.304626,5.304567,5.304454,5.30446,5.304851,5.304996,5.305114,5.30623,5.306418,5.306482,5.306504,5.306139,5.305452,5.305189,5.304996,5.304315,5.303982,5.3038,5.303569,5.303414,5.30321,5.30314,5.303097,5.303312,5.303312,5.303339,5.30329,5.303205,5.303017,5.303011,5.303489,5.303532,5.303382,5.302845,5.302716,5.302491,5.301906,5.301692,5.301467,5.301247,5.301241,5.301193,5.301043,5.300903,5.299686,5.299417,5.298833,5.298318,5.298184,5.298071,5.297706,5.296928,5.296231,5.296,5.296006,5.297255,5.297727,5.297905,5.299986,5.300083,5.300131,5.30019,5.300211,5.300254,5.300319,5.300946,5.301048,5.301086,5.301102,5.301209,5.301322,5.30144,5.301375,5.301697,5.301933,5.302207,5.302309,5.302668,5.302765,5.302872,5.302792,5.302931,5.303146,5.303392,5.30329,5.303162,5.30291,5.302695,5.302126,5.302057,5.301896,5.301762,5.301585,5.301397,5.301064,5.300935,5.300404,5.299004,5.296816,5.295587,5.294563,5.293694,5.29349,5.293248,5.292824,5.292685,5.29261,5.292798,5.292776,5.292267,5.291644,5.290888,5.290732,5.29026,5.290073,5.29004,5.289987,5.289456,5.289316,5.289343,5.289209,5.288458,5.288329,5.288141,5.285904,5.284708,5.284123,5.283678,5.283281,5.283195,5.282927,5.282927,5.283496,5.283523,5.283308,5.283228,5.282664,5.282423,5.282482,5.282412,5.281972,5.281849,5.281849,5.281956,5.28194,5.281726,5.281425,5.280985,5.280685,5.28039,5.280256,5.280202,5.280181,5.280341,5.280304,5.280234,5.279832,5.279805,5.279891,5.279848,5.279682,5.279167,5.279065,5.278619,5.278373,5.278137,5.277761,5.277294,5.277123,5.276307,5.275948,5.275551,5.275374,5.274752,5.274526,5.274108,5.27384,5.273561,5.273427,5.273217,5.273094,5.272547,5.272246,5.271286,5.269607,5.268883,5.268534,5.267778,5.266694,5.266201,5.265906,5.265772,5.265525,5.265412,5.265241,5.26442,5.263953,5.263422,5.261968,5.261164,5.260171,5.259195,5.258315,5.257848,5.257527,5.256395,5.255987,5.255735,5.255606,5.25471,5.254549,5.254356,5.253863,5.253734,5.253165,5.252913,5.252736,5.252597,5.252087,5.251991,5.251771,5.251701,5.251475,5.251465,5.251411,5.251331,5.250794,5.250617,5.25029,5.249389,5.24911,5.24875,5.248493,5.24823,5.248117,5.247356,5.247173,5.247018,5.246964,5.247093,5.247018,5.247195,5.247286,5.247093,5.247109,5.247425,5.247543,5.247554,5.247409,5.247425,5.247484,5.247474,5.247474,5.247458,5.247479,5.24735,5.246878,5.246508,5.246331,5.245628,5.245392,5.245129,5.244722,5.243858,5.243558,5.243488,5.24352,5.243622,5.244995,5.245038,5.245001,5.244995,5.245961,5.246465,5.24669],"lat":[44.500332,44.50068,44.500917,44.501206,44.501393,44.501474,44.501495,44.501388,44.501383,44.501479,44.501463,44.501463,44.501485,44.501554,44.501957,44.50208,44.50252,44.503357,44.503502,44.503679,44.503845,44.504124,44.504231,44.504263,44.504312,44.50443,44.504848,44.504945,44.50495,44.504982,44.505057,44.505422,44.505647,44.505851,44.506361,44.506693,44.506946,44.507069,44.507176,44.507348,44.507407,44.507396,44.50731,44.507348,44.507487,44.507573,44.508276,44.508351,44.508356,44.508383,44.508464,44.508737,44.50892,44.508984,44.509252,44.50937,44.509531,44.509767,44.510057,44.510379,44.510744,44.511264,44.512669,44.512707,44.513013,44.513227,44.513431,44.514772,44.515116,44.515244,44.515464,44.516644,44.516929,44.516977,44.51695,44.516838,44.516424,44.516435,44.516484,44.51673,44.516784,44.516907,44.516897,44.516752,44.516757,44.516719,44.516441,44.516424,44.516355,44.516258,44.516092,44.51599,44.515926,44.515926,44.515974,44.516027,44.516017,44.515861,44.515856,44.515888,44.515722,44.515636,44.515067,44.514955,44.51496,44.515223,44.515448,44.515502,44.515464,44.515207,44.515067,44.514992,44.514896,44.514692,44.514488,44.514343,44.514145,44.514102,44.514102,44.514338,44.514332,44.514295,44.513941,44.513844,44.51356,44.513549,44.513571,44.514,44.514064,44.514252,44.514552,44.514783,44.514928,44.515459,44.51628,44.516285,44.516065,44.516049,44.516049,44.516076,44.516247,44.516328,44.516516,44.516644,44.516768,44.516982,44.516998,44.516918,44.51687,44.516757,44.516258,44.515496,44.515083,44.515083,44.515121,44.515341,44.516087,44.516365,44.516859,44.517637,44.517862,44.518002,44.518243,44.518313,44.518334,44.518264,44.518291,44.518334,44.518372,44.518425,44.518737,44.518758,44.518683,44.518302,44.518012,44.51798,44.518023,44.518146,44.518388,44.518517,44.51945,44.519761,44.520142,44.520678,44.521215,44.521365,44.52143,44.521505,44.521558,44.521676,44.521826,44.52203,44.522256,44.523092,44.523591,44.52409,44.524476,44.524734,44.52489,44.525034,44.525152,44.525399,44.525544,44.526075,44.526574,44.526933,44.527475,44.527658,44.52776,44.527931,44.528114,44.528559,44.528612,44.528634,44.528629,44.528698,44.529203,44.529573,44.52975,44.530195,44.530345,44.530404,44.530501,44.530662,44.53108,44.531917,44.532019,44.532534,44.53292,44.533124,44.53321,44.533215,44.533736,44.533789,44.533741,44.533274,44.532759,44.532346,44.53226,44.53196,44.531793,44.531745,44.531659,44.531574,44.53152,44.531654,44.531702,44.531879,44.5327,44.532759,44.532754,44.532266,44.531493,44.531059,44.530951,44.530866,44.530839,44.530801,44.53071,44.53064,44.530431,44.530372,44.530356,44.53056,44.531236,44.531504,44.531751,44.532078,44.532196,44.532207,44.532185,44.531493,44.531461,44.531182,44.530758,44.530511,44.530238,44.530045,44.52975,44.529701,44.529616,44.529664,44.529648,44.52954,44.529401,44.529326,44.529154,44.528709,44.528698,44.528596,44.528441,44.528355,44.528339,44.528307,44.528167,44.52799,44.527899,44.527765,44.527502,44.527191,44.526789,44.526697,44.526542,44.526413,44.526252,44.526209,44.526091,44.52607,44.526032,44.525662,44.525485,44.525008,44.524739,44.523838,44.523672,44.52313,44.523071,44.523076,44.523194,44.523452,44.524208,44.524675,44.524804,44.524863,44.5249,44.52519,44.525292,44.525292,44.524407,44.523548,44.523259,44.522223,44.521767,44.521682,44.521655,44.521569,44.521059,44.520775,44.520684,44.520464,44.520249,44.520147,44.520088,44.520045,44.519691,44.519498,44.519563,44.520003,44.520158,44.520764,44.520925,44.521226,44.521558,44.521687,44.523162,44.523919,44.524364,44.525313,44.525855,44.526526,44.526848,44.527416,44.527861,44.528012,44.528189,44.528838,44.529042,44.530227,44.530549,44.531466,44.531745,44.532502,44.533864,44.534218,44.534492,44.534835,44.535313,44.535463,44.536412,44.53689,44.538199,44.538274,44.538445,44.538483,44.538719,44.538757,44.537625,44.537308,44.536445,44.536085,44.535726,44.535093,44.534814,44.534556,44.534352,44.534127,44.534004,44.533827,44.533676,44.533558,44.533022,44.53218,44.531938,44.531751,44.530662,44.530511,44.530136,44.529911,44.529771,44.529557,44.529492,44.52887,44.528564,44.52835,44.528103,44.527888,44.527829,44.527427,44.527175,44.526805,44.526665,44.52637,44.526247,44.525592,44.525372,44.525217,44.525147,44.525045,44.525008,44.525002,44.524975,44.52408,44.523436,44.523452,44.52343,44.522974,44.522465,44.522127,44.521649,44.521097,44.520657,44.520587,44.52056,44.520453,44.520314,44.519445,44.518211,44.518039,44.517771,44.517567,44.517202,44.517031,44.517004,44.516827,44.51651,44.516376,44.516349,44.516435,44.516484,44.516596,44.517041,44.5171,44.517133,44.517165,44.517347,44.517444,44.51746,44.517476,44.517808,44.517991,44.518329,44.518635,44.518731,44.518758,44.518699,44.518715,44.518822,44.518844,44.518935,44.519101,44.519257,44.519477,44.519638,44.520276,44.52033,44.520276,44.520147,44.519734,44.519472,44.519026,44.518565,44.518141,44.518034,44.517717,44.517551,44.517299,44.516972,44.516789,44.516644,44.516419,44.516408,44.515979,44.515625,44.515411,44.515089,44.514466,44.5143,44.514005,44.513866,44.513469,44.513125,44.512122,44.511661,44.51143,44.511344,44.511242,44.51114,44.511119,44.510663,44.510357,44.509521,44.509154,44.509108]}]],[[{"lng":[5.518181,5.518358,5.518591,5.519251,5.520179,5.522266,5.523323,5.523543,5.524117,5.524304,5.524524,5.525281,5.525495,5.525871,5.526053,5.526139,5.526289,5.526606,5.526665,5.526831,5.527105,5.528011,5.528103,5.528199,5.528269,5.528371,5.528162,5.528156,5.528215,5.528473,5.528575,5.527861,5.527807,5.527319,5.526493,5.526461,5.526563,5.526638,5.526992,5.527952,5.528092,5.528623,5.528907,5.529138,5.529315,5.529508,5.529454,5.53005,5.530372,5.530978,5.532619,5.532839,5.532898,5.532957,5.53329,5.533429,5.533993,5.535049,5.535098,5.535806,5.535918,5.536208,5.537147,5.537512,5.537876,5.538332,5.538676,5.540403,5.540703,5.541288,5.541626,5.541771,5.541782,5.540864,5.540489,5.540226,5.539931,5.53977,5.538928,5.538552,5.538048,5.537957,5.537045,5.536745,5.536154,5.535972,5.535441,5.535183,5.534486,5.534454,5.534583,5.534293,5.533327,5.533274,5.533295,5.533456,5.533735,5.535516,5.535934,5.536149,5.536954,5.537227,5.53771,5.537866,5.53911,5.540253,5.541084,5.542168,5.542549,5.543048,5.543198,5.54418,5.544314,5.544432,5.544491,5.544373,5.544035,5.542989,5.542345,5.541771,5.540779,5.540484,5.539379,5.538633,5.537732,5.537699,5.537833,5.538654,5.53962,5.540864,5.541932,5.542806,5.543788,5.544432,5.544566,5.544662,5.544657,5.543836,5.54359,5.54323,5.542147,5.541927,5.541664,5.541669,5.541884,5.542007,5.542211,5.542661,5.542935,5.543048,5.543901,5.544035,5.544105,5.543938,5.543724,5.543611,5.543681,5.54375,5.54404,5.544469,5.544915,5.54543,5.546964,5.547452,5.548305,5.5486,5.548766,5.548954,5.549206,5.549608,5.549657,5.549882,5.54985,5.549598,5.549426,5.549276,5.549163,5.54912,5.549329,5.549539,5.549587,5.549442,5.549415,5.549469,5.550043,5.550359,5.550762,5.551153,5.552017,5.552993,5.553873,5.554007,5.554056,5.553991,5.553288,5.55257,5.552323,5.552076,5.551947,5.551937,5.55214,5.552189,5.552478,5.552832,5.552891,5.552908,5.552881,5.551583,5.551448,5.55133,5.551207,5.551615,5.552135,5.552473,5.552752,5.552956,5.553165,5.553621,5.553819,5.553959,5.553846,5.553852,5.554002,5.554098,5.554318,5.554372,5.554372,5.554404,5.554935,5.555059,5.555171,5.555423,5.555482,5.555987,5.556083,5.556475,5.556856,5.557108,5.557226,5.557322,5.556829,5.556781,5.556883,5.557553,5.557746,5.557805,5.55788,5.55802,5.558052,5.557998,5.558073,5.558127,5.558245,5.559114,5.559281,5.559543,5.560579,5.561271,5.561464,5.562998,5.563835,5.564237,5.564312,5.564736,5.565138,5.565498,5.566496,5.566732,5.566941,5.567064,5.56708,5.567118,5.56722,5.567767,5.568142,5.568679,5.569156,5.569387,5.57017,5.570798,5.57237,5.572493,5.572686,5.57281,5.57297,5.57318,5.573582,5.573732,5.574296,5.574489,5.574907,5.576447,5.577916,5.57812,5.578185,5.578512,5.578904,5.579027,5.579258,5.580169,5.580738,5.5818,5.582144,5.582439,5.583973,5.584166,5.584509,5.5854,5.585947,5.586618,5.586918,5.58813,5.588506,5.588516,5.588484,5.587342,5.587009,5.585443,5.584617,5.583721,5.583415,5.582954,5.580931,5.579381,5.57885,5.57871,5.57863,5.578614,5.578684,5.578769,5.579075,5.579461,5.581216,5.581441,5.5818,5.582948,5.584466,5.585035,5.585598,5.586398,5.586585,5.586993,5.587723,5.588313,5.58872,5.588989,5.589986,5.590501,5.5907,5.59107,5.591617,5.591698,5.591472,5.591419,5.591494,5.591698,5.592084,5.592615,5.5932,5.5938,5.593897,5.594063,5.594203,5.594358,5.594702,5.594868,5.596359,5.59652,5.596917,5.597041,5.597094,5.597121,5.597094,5.596772,5.59666,5.596349,5.596193,5.595925,5.595823,5.595576,5.595522,5.595501,5.595506,5.595742,5.595683,5.59556,5.595152,5.595174,5.595378,5.595624,5.596687,5.596799,5.596853,5.595989,5.595555,5.595013,5.594718,5.59424,5.59401,5.593945,5.594015,5.594455,5.594959,5.595254,5.595807,5.595957,5.59652,5.596687,5.597116,5.597389,5.598022,5.598194,5.598328,5.598714,5.599015,5.600297,5.600656,5.600758,5.600823,5.60086,5.60071,5.60064,5.600619,5.600651,5.600989,5.601096,5.601096,5.600876,5.600812,5.600865,5.600967,5.601423,5.601794,5.601933,5.602072,5.602276,5.602426,5.602523,5.602598,5.602673,5.603054,5.603237,5.603489,5.603628,5.603634,5.603698,5.603773,5.603859,5.604009,5.60432,5.604519,5.604771,5.60483,5.605189,5.605533,5.60689,5.607067,5.60712,5.606997,5.607126,5.60711,5.607029,5.606691,5.606686,5.606745,5.607271,5.608091,5.608086,5.608091,5.608209,5.608279,5.608381,5.608885,5.608842,5.60888,5.609534,5.60984,5.609883,5.609626,5.609642,5.609733,5.610055,5.6102,5.610194,5.610307,5.610382,5.610339,5.609958,5.609915,5.609953,5.610087,5.610484,5.610495,5.611112,5.611519,5.611551,5.611782,5.612088,5.61271,5.613499,5.613461,5.613638,5.615478,5.616234,5.616546,5.617018],"lat":[44.283889,44.283944,44.284033,44.284478,44.284596,44.284982,44.284725,44.284864,44.28539,44.285567,44.285674,44.286189,44.286178,44.286125,44.286001,44.285894,44.285604,44.285374,44.284885,44.284392,44.283904,44.282756,44.282198,44.282166,44.282193,44.28237,44.283582,44.283786,44.283968,44.284312,44.28458,44.287369,44.287509,44.288056,44.288769,44.288909,44.288968,44.288946,44.288592,44.288024,44.287981,44.287621,44.287391,44.28708,44.286929,44.286838,44.286865,44.286607,44.286409,44.285653,44.284574,44.284006,44.283829,44.283759,44.283625,44.28355,44.282922,44.282193,44.282144,44.281479,44.281409,44.281383,44.281484,44.281431,44.28127,44.280959,44.280755,44.280798,44.280782,44.280637,44.280422,44.280454,44.280589,44.281055,44.281168,44.281184,44.281168,44.281179,44.281694,44.28208,44.283287,44.283357,44.283716,44.284129,44.284574,44.285079,44.285712,44.2862,44.286945,44.28701,44.287417,44.288383,44.289939,44.290009,44.290175,44.290169,44.289805,44.288136,44.287734,44.287557,44.287042,44.286822,44.286023,44.285862,44.285299,44.284596,44.284242,44.283716,44.283453,44.283324,44.28326,44.283051,44.282992,44.283003,44.283088,44.283212,44.28326,44.283646,44.284086,44.284601,44.285293,44.285545,44.286811,44.287546,44.288195,44.288297,44.288362,44.287809,44.287208,44.286205,44.285701,44.285181,44.284859,44.284735,44.284735,44.28481,44.284864,44.285003,44.2851,44.285293,44.286189,44.286339,44.286634,44.286913,44.287128,44.287165,44.287155,44.286849,44.286334,44.286216,44.285679,44.285674,44.285717,44.285937,44.28665,44.28701,44.287181,44.287235,44.287273,44.287187,44.287053,44.286854,44.286092,44.285787,44.285433,44.285363,44.285341,44.285368,44.285583,44.286945,44.287074,44.287337,44.287557,44.288099,44.288549,44.289612,44.289987,44.290491,44.291312,44.29173,44.29195,44.292079,44.292165,44.292283,44.292422,44.29253,44.292546,44.292594,44.29261,44.292449,44.292428,44.292412,44.292337,44.292288,44.292251,44.292272,44.292251,44.292176,44.29202,44.291773,44.291232,44.291167,44.291022,44.290776,44.290701,44.29062,44.290534,44.290164,44.290084,44.289939,44.289456,44.28892,44.288405,44.288152,44.288018,44.287965,44.287959,44.288093,44.288238,44.288501,44.289349,44.289461,44.289612,44.289654,44.289654,44.289601,44.289145,44.289091,44.28892,44.288861,44.288764,44.288362,44.288303,44.288206,44.288158,44.287627,44.2873,44.286988,44.286897,44.286892,44.287541,44.287745,44.287949,44.288152,44.288147,44.288083,44.287278,44.286747,44.286355,44.286168,44.286082,44.286082,44.286323,44.287557,44.287847,44.2879,44.287664,44.287546,44.287562,44.288002,44.288555,44.289011,44.289054,44.289129,44.289113,44.289011,44.28893,44.288866,44.288764,44.28863,44.288115,44.28804,44.287975,44.287814,44.287777,44.287895,44.288083,44.288126,44.288013,44.288024,44.288351,44.288394,44.288957,44.28915,44.289327,44.289472,44.290078,44.290212,44.290459,44.290507,44.290502,44.290486,44.290556,44.290588,44.290631,44.291296,44.291875,44.291967,44.292068,44.292192,44.292342,44.292793,44.292916,44.292991,44.292857,44.292873,44.292959,44.292948,44.29297,44.293066,44.29319,44.293951,44.294107,44.294177,44.294246,44.294617,44.294692,44.294772,44.294574,44.294574,44.294611,44.294547,44.29445,44.294429,44.294418,44.294456,44.29452,44.294729,44.294869,44.294965,44.295164,44.295276,44.295689,44.295684,44.295738,44.295834,44.296156,44.296355,44.296473,44.296381,44.296339,44.296258,44.296333,44.296521,44.296585,44.296537,44.296521,44.296344,44.296312,44.296328,44.296424,44.296479,44.296586,44.296648,44.296678,44.296678,44.29664,44.296596,44.296403,44.29606,44.296102,44.296269,44.29695,44.297336,44.297787,44.297932,44.298817,44.298806,44.298704,44.298726,44.298769,44.298876,44.299037,44.299589,44.300008,44.300651,44.300603,44.299954,44.299793,44.299621,44.299638,44.299686,44.299772,44.300534,44.300764,44.300914,44.301327,44.301703,44.301944,44.302084,44.302395,44.302449,44.302609,44.302803,44.303071,44.303339,44.303425,44.303296,44.303301,44.303371,44.303473,44.303806,44.304369,44.304627,44.30497,44.305013,44.305002,44.305045,44.30527,44.305372,44.305378,44.305399,44.305388,44.305217,44.305125,44.30416,44.304149,44.304208,44.304273,44.304482,44.305308,44.305506,44.305662,44.305839,44.306129,44.306311,44.306381,44.306568,44.306681,44.307137,44.307298,44.30769,44.308178,44.30828,44.308344,44.30836,44.308307,44.308231,44.307899,44.307824,44.307775,44.307792,44.307872,44.307995,44.308591,44.308644,44.30865,44.308607,44.308392,44.30814,44.307985,44.307706,44.307668,44.307818,44.308146,44.309959,44.310345,44.310651,44.311021,44.311654,44.312142,44.312362,44.313172,44.313295,44.313392,44.313671,44.31454,44.314529,44.31454,44.314776,44.314803,44.314744,44.313719,44.313242,44.313161,44.312974,44.312861,44.312974,44.313317,44.313515,44.313601,44.313762,44.313923,44.313912,44.314041,44.314443,44.314551,44.315012,44.315312,44.315457,44.315951,44.316986,44.317142,44.317104,44.316965,44.316959,44.316809,44.316713,44.31682,44.3169,44.316895,44.316916,44.317437,44.317791,44.317984,44.318536]}]],[[{"lng":[6.30413,6.304193,6.30418,6.3039,6.303752,6.303752,6.303945,6.303928,6.304145,6.30433,6.304775,6.304918,6.304952,6.3048,6.304658,6.304293,6.304032,6.302615,6.302327,6.301845,6.301493,6.301095,6.300387,6.300302,6.30025,6.300273,6.300183,6.300255,6.300253,6.300427,6.300417,6.30009,6.299848,6.299697,6.30164,6.301988,6.302078,6.302185,6.302475,6.302705,6.302652,6.302497,6.301868,6.301505,6.300905,6.30043,6.299015,6.29888,6.298883,6.299385,6.299352,6.299232,6.298927,6.298747,6.298582,6.298317,6.298262,6.298063,6.29782,6.297492,6.29706,6.296853,6.296552,6.296365,6.29667,6.29655,6.295872,6.295368,6.295297,6.295365,6.295542,6.296202,6.29644,6.296407,6.296355,6.296318,6.296152,6.29594,6.295613,6.295498,6.29524,6.295303,6.295417,6.295847,6.296075,6.29664,6.296905,6.2971,6.297115,6.297078,6.297168,6.296907,6.296702,6.296622,6.296453,6.296335,6.29621,6.295648,6.295358,6.294938,6.294395,6.294188,6.293712,6.29343,6.29316,6.292775,6.29254,6.292357,6.29206,6.292067,6.29214,6.292063,6.291697,6.290855,6.290635,6.290522,6.290552,6.290732,6.290662,6.290157,6.289618,6.289505,6.289607,6.289768,6.28986,6.289975,6.29027,6.290812,6.291212,6.29164,6.291897,6.292247,6.292957,6.293085,6.293233,6.293408,6.293632,6.294122,6.294233,6.294175,6.294103,6.294175,6.295393,6.295575,6.295833,6.296262,6.296653,6.297343,6.297598,6.297808,6.298337,6.298302,6.2981,6.298017,6.29829,6.298353,6.298422,6.299568,6.299817,6.300408,6.301207,6.301618,6.301872,6.3022,6.30254,6.302833,6.304463,6.304773,6.30485,6.304775,6.304467,6.303788,6.303608,6.303232,6.302827,6.302545,6.301768,6.301192,6.300363,6.300255,6.300213,6.30012,6.300175,6.300317,6.300558,6.301482,6.301685,6.30179,6.301677,6.301833,6.302392,6.303287,6.303583,6.303957,6.304115,6.304032,6.302615,6.302088,6.301893,6.301837,6.301823,6.301906,6.301924,6.30192,6.301292,6.300943,6.299806,6.299479,6.298315,6.297902,6.297693,6.297628,6.297553,6.297628,6.29751,6.297312,6.29692,6.296759,6.296411,6.296201,6.295198,6.29463,6.294624,6.293605,6.29272,6.292484,6.291384,6.29073,6.290177,6.289646,6.288643,6.288434,6.287586,6.287506,6.287441,6.287355,6.287141,6.286964,6.28669,6.285778,6.285564,6.285435,6.28529,6.284909,6.284802,6.284239,6.284003,6.283284,6.283209,6.283123,6.283016,6.282855,6.282613,6.282007,6.281814,6.281648,6.281514,6.281428,6.281385,6.281379,6.28131,6.281213,6.281052,6.280328,6.278585,6.278397,6.277624,6.27749,6.277281,6.276444,6.276396,6.276385,6.276385,6.276374,6.276466,6.276396,6.275854,6.275613,6.275366,6.275103,6.274068,6.273896,6.273837,6.27359,6.273451,6.272732,6.271874,6.27189,6.272056,6.272351,6.272566,6.272753,6.272737,6.272646,6.27234,6.272244,6.272019,6.271343,6.271171,6.27116,6.271037,6.270838,6.270688,6.270243,6.270001,6.269942,6.269664,6.268886,6.268612,6.26821,6.268065,6.267974,6.26784,6.267829,6.267834,6.267845,6.268033,6.26807,6.268215,6.268237,6.268237,6.268408,6.268553,6.268832,6.26902,6.269116,6.26931,6.26961,6.27013,6.27049,6.270656,6.270752,6.271268,6.272287,6.272539,6.272968,6.273204,6.273209,6.273499,6.273901,6.274357,6.274776,6.27484,6.275108,6.276138,6.277506,6.27756,6.27764,6.277791,6.278016,6.278429,6.278622,6.278896,6.279475,6.279985,6.280108,6.281143,6.281347,6.281481,6.282356,6.284743,6.285247,6.285912,6.286604,6.287672,6.287978,6.288246,6.28889,6.289335,6.290317,6.291743,6.292752,6.293675,6.294951,6.295794,6.295987,6.29647,6.296813,6.297773,6.2992,6.300563,6.302488,6.303041,6.303824,6.304012,6.30428,6.305562,6.306158,6.306351,6.307526,6.307992,6.309854,6.309934,6.310159,6.310471,6.310717,6.311286,6.311399,6.311404,6.311458,6.311678,6.312026],"lat":[44.44283,44.44263,44.442405,44.441773,44.441555,44.441342,44.440347,44.43996,44.43956,44.43939,44.43912,44.438935,44.438738,44.438343,44.438212,44.438098,44.438095,44.438488,44.438617,44.439035,44.439462,44.440163,44.440682,44.440658,44.440535,44.440173,44.439237,44.438388,44.43804,44.437138,44.436927,44.436148,44.43529,44.434928,44.432687,44.432315,44.432103,44.431625,44.431195,44.430945,44.430867,44.430875,44.43111,44.431268,44.431428,44.431628,44.431777,44.431677,44.431523,44.4305,44.430257,44.430048,44.429672,44.429317,44.429075,44.427828,44.427463,44.42709,44.426707,44.425937,44.42511,44.424608,44.42431,44.42412,44.423615,44.42352,44.423187,44.42283,44.422667,44.422493,44.422338,44.421968,44.421508,44.420765,44.420282,44.419922,44.419597,44.41944,44.419243,44.419055,44.418377,44.41765,44.417438,44.416898,44.416567,44.415985,44.415377,44.415093,44.41469,44.414402,44.414013,44.413307,44.412908,44.412722,44.412597,44.412573,44.412587,44.412842,44.412787,44.41267,44.412632,44.41252,44.411988,44.411762,44.411507,44.41119,44.410768,44.410282,44.409737,44.409492,44.409315,44.409183,44.409027,44.408628,44.408463,44.40827,44.408048,44.407518,44.407298,44.406542,44.405933,44.405242,44.40515,44.405178,44.40532,44.405587,44.405843,44.406123,44.406278,44.406332,44.406308,44.406152,44.405758,44.40559,44.405315,44.40517,44.40511,44.405102,44.404997,44.404852,44.40468,44.404483,44.402887,44.402748,44.40269,44.402608,44.40239,44.401953,44.401782,44.40144,44.400537,44.400335,44.399802,44.399207,44.398027,44.397973,44.397988,44.39783,44.39771,44.397197,44.397025,44.396987,44.397057,44.397322,44.39761,44.397742,44.398168,44.398287,44.398233,44.398143,44.397958,44.397297,44.397043,44.396378,44.395948,44.395615,44.394952,44.394418,44.39382,44.393602,44.39327,44.393048,44.392792,44.392687,44.392693,44.392967,44.392897,44.39272,44.392247,44.39208,44.391683,44.390767,44.390307,44.389702,44.389402,44.389215,44.387692,44.387102,44.386627,44.386475,44.386444,44.386341,44.386258,44.386257,44.386134,44.386069,44.385774,44.385737,44.385892,44.386005,44.386112,44.386182,44.38645,44.386986,44.387121,44.38718,44.387121,44.387062,44.387035,44.387078,44.387373,44.387426,44.387426,44.387534,44.387421,44.387357,44.386831,44.386488,44.386359,44.386391,44.38667,44.386665,44.386246,44.386042,44.38557,44.385495,44.385425,44.385436,44.385538,44.386139,44.386166,44.386139,44.386069,44.385769,44.385737,44.385694,44.385806,44.386321,44.386707,44.386831,44.386906,44.386933,44.386879,44.386563,44.386514,44.386541,44.386611,44.386702,44.386815,44.387255,44.387367,44.387437,44.387485,44.387544,44.387904,44.387888,44.387737,44.387754,44.387904,44.388676,44.388789,44.388869,44.388864,44.388987,44.389594,44.389712,44.390141,44.39028,44.390355,44.390393,44.39043,44.390505,44.390581,44.391251,44.39146,44.392244,44.392877,44.392979,44.393161,44.393359,44.393649,44.394239,44.394427,44.394389,44.39381,44.393654,44.393456,44.393198,44.393172,44.393166,44.39315,44.393172,44.393241,44.393644,44.394164,44.394212,44.394266,44.394298,44.39432,44.394405,44.3944,44.394368,44.394078,44.393933,44.393756,44.393638,44.393075,44.392528,44.391761,44.391707,44.391702,44.391337,44.391128,44.390843,44.390575,44.39006,44.389486,44.388891,44.388376,44.387786,44.387437,44.387341,44.38704,44.386826,44.386772,44.386589,44.386321,44.386316,44.385999,44.385447,44.385066,44.384454,44.384363,44.384256,44.383998,44.382899,44.382808,44.382668,44.382443,44.382378,44.382593,44.382593,44.382518,44.38247,44.382266,44.382228,44.382073,44.382083,44.382105,44.382228,44.382276,44.382234,44.382078,44.381965,44.381906,44.38182,44.381708,44.381375,44.381209,44.380962,44.380721,44.38064,44.380517,44.380737,44.380705,44.380796,44.381069,44.381069,44.380817,44.380361,44.380002,44.379288,44.378688,44.378178,44.37798,44.377271,44.375887,44.375437,44.375297,44.374074,44.373506,44.372014,44.371961,44.371821,44.371805,44.371757,44.371419,44.371322,44.371322,44.371285,44.371263,44.371301]}]],[[{"lng":[6.57791,6.57785,6.577358,6.577125,6.576977,6.576895,6.576363,6.575697,6.575085,6.57484,6.57477,6.574817,6.575877,6.576543,6.576807,6.577173,6.577173,6.577145,6.577278,6.57733,6.577527,6.578098,6.578478,6.578512,6.578412,6.578218,6.577732,6.57674,6.576377,6.575772,6.574865,6.574627,6.574153,6.573388,6.572633,6.572208,6.570835,6.570603,6.570305,6.57003,6.569333,6.569048,6.568828,6.568662,6.568462,6.568043,6.56798,6.567983,6.567815,6.567253,6.566863,6.566638,6.566452,6.565972,6.56589,6.565978,6.566238,6.566505,6.566847,6.567085,6.567363,6.567522,6.567712,6.567925,6.567718,6.56732,6.567345,6.567685,6.567732,6.56776,6.567917,6.568633,6.568712,6.569477,6.56997,6.570328,6.570522,6.570512,6.570477,6.570258,6.57049,6.571948,6.57249,6.5726,6.572813,6.573232,6.57353,6.57353,6.573733,6.573907,6.574175,6.574278,6.574557,6.574863,6.575423,6.576887,6.576972,6.577238,6.57872,6.579003,6.57904,6.579027,6.579667,6.581035,6.581807,6.582122,6.58337,6.583775,6.584213,6.585135,6.58524,6.585293,6.585407,6.58546,6.585357,6.58429,6.583478,6.582742,6.582343,6.581982,6.581782,6.581822,6.582015,6.582842,6.583745,6.584055,6.584497,6.584783,6.58501,6.585468,6.586143,6.586482,6.586687,6.58679,6.587115,6.587358,6.587472,6.587603,6.587727,6.587813,6.588258,6.588565,6.588878,6.589397,6.589718,6.589763,6.589543,6.589295,6.589053,6.589168,6.589192,6.589833,6.589882,6.58984,6.589552,6.589442,6.589132,6.589035,6.588855,6.588903,6.589102,6.589318,6.589645,6.590033,6.590182,6.590252,6.590202,6.590113,6.589937,6.589788,6.589557,6.589063,6.58908,6.589268,6.589813,6.590262,6.590407,6.591063,6.59131,6.591645,6.59188,6.59209,6.59236,6.592662,6.593693,6.594568,6.595232,6.596387,6.59733,6.598212,6.598648,6.599,6.600125,6.60071,6.60133,6.601608,6.602218,6.603038,6.603337,6.603578,6.60362,6.60358,6.603217,6.603075,6.603082,6.603217,6.603618,6.603693,6.603637,6.60344,6.602135,6.601923,6.60182,6.601813,6.601873,6.601803,6.601558,6.601397,6.60141,6.601995,6.602517,6.602548,6.602277,6.601933,6.601888,6.60132,6.600838,6.600565,6.600313,6.599932,6.599562,6.59858,6.597712,6.597233,6.59668,6.59632,6.596367,6.596673,6.596625,6.596378,6.595593,6.595275,6.595167,6.595168,6.595865,6.595677,6.593495,6.592047,6.591477,6.59134,6.591085,6.590408,6.590087,6.58956,6.589542,6.589502,6.589367,6.589448,6.589675,6.589667,6.589113,6.58902,6.58903,6.589547,6.589532,6.589467,6.589098,6.588843,6.588502,6.588232,6.588095,6.587567,6.587432,6.587447,6.58764,6.587568,6.587282,6.587072,6.586817,6.586533,6.586307,6.586008,6.585715,6.585402,6.58496,6.584377,6.584415,6.58459,6.584553,6.584307,6.584153,6.58397,6.583912,6.584002,6.583942,6.583873,6.583815,6.58368,6.583793,6.58371,6.583323,6.583267,6.583115,6.582997,6.583057,6.583368,6.583325,6.583192,6.582645,6.58184,6.58171,6.581763,6.582008,6.582053,6.58192,6.581178,6.581078,6.58101,6.580945,6.580683,6.580623,6.580453,6.580243,6.580043,6.57973,6.579343,6.579255,6.579215,6.5793,6.579767,6.579593,6.579275,6.578767,6.578168,6.577942,6.577817,6.57763,6.576908,6.57645,6.574635,6.574342,6.57357,6.572732,6.57233,6.571952,6.57129,6.570477,6.570222,6.570135,6.569467,6.56938,6.568953,6.568488,6.568022,6.568027,6.568142,6.568042,6.566785,6.566388,6.565993,6.565242,6.565125,6.565097,6.565225,6.565195,6.565003,6.564333,6.564022,6.563922,6.563678,6.56396,6.564245,6.564317,6.564687,6.564842,6.564887,6.564798,6.564827,6.565148,6.565535,6.565767,6.565982,6.566418,6.56716,6.568332,6.568525,6.568647,6.568653,6.568568,6.568332,6.56809,6.567938,6.56799,6.568133,6.568677,6.568983,6.569287,6.569555,6.570213,6.570868,6.571453,6.571698,6.57192,6.57256,6.572543,6.572595,6.572758,6.572815,6.572992,6.572915,6.572698,6.572691],"lat":[44.649957,44.649885,44.649348,44.649162,44.649103,44.649112,44.648928,44.64884,44.648597,44.648665,44.648753,44.648872,44.649733,44.650198,44.650397,44.650718,44.650892,44.651158,44.651527,44.651723,44.651933,44.652248,44.652373,44.652462,44.652535,44.652523,44.652377,44.651893,44.651778,44.651805,44.651408,44.651153,44.651047,44.650752,44.650305,44.650158,44.649783,44.649638,44.649398,44.649312,44.649253,44.649058,44.648817,44.647745,44.647467,44.646993,44.646788,44.646485,44.6462,44.645658,44.645488,44.645445,44.645492,44.645787,44.645927,44.646105,44.64653,44.647223,44.647843,44.648847,44.649225,44.649687,44.650013,44.65077,44.651225,44.651643,44.651718,44.651965,44.652095,44.653235,44.653363,44.653665,44.653858,44.654093,44.6542,44.654283,44.654335,44.654458,44.654523,44.654907,44.655198,44.656272,44.656572,44.656703,44.65743,44.657902,44.658153,44.658395,44.658527,44.658523,44.658493,44.658577,44.659323,44.659562,44.659923,44.661197,44.66163,44.661962,44.662777,44.662822,44.662878,44.663018,44.663483,44.663637,44.66389,44.664077,44.664502,44.664682,44.66484,44.665323,44.665493,44.665628,44.665655,44.665565,44.665407,44.664385,44.663853,44.663123,44.66287,44.662282,44.662067,44.662018,44.662088,44.662797,44.663032,44.663025,44.662985,44.663045,44.663183,44.663543,44.663757,44.664007,44.664323,44.664478,44.664723,44.665088,44.665217,44.665575,44.665608,44.665635,44.666025,44.6666,44.666828,44.667237,44.667565,44.66751,44.667213,44.666518,44.666187,44.666117,44.666123,44.666592,44.666532,44.666392,44.665907,44.665312,44.664693,44.664398,44.664128,44.664088,44.664085,44.664168,44.664527,44.665033,44.665378,44.665323,44.665125,44.664807,44.663813,44.663458,44.663213,44.662997,44.66292,44.662948,44.66321,44.663515,44.6637,44.665157,44.665333,44.665608,44.665813,44.66582,44.66576,44.665758,44.666072,44.666473,44.666595,44.666687,44.666625,44.66694,44.667213,44.66758,44.668863,44.669867,44.670485,44.670677,44.67099,44.671743,44.672412,44.673188,44.674062,44.674665,44.67619,44.676693,44.676977,44.677238,44.677777,44.678098,44.678432,44.678742,44.680078,44.680418,44.680787,44.68115,44.681693,44.68205,44.682757,44.68304,44.683273,44.684323,44.685167,44.685447,44.686268,44.687642,44.687685,44.688845,44.690045,44.691358,44.691917,44.692322,44.692693,44.693962,44.694997,44.695648,44.696227,44.697368,44.697637,44.698135,44.698378,44.698598,44.699108,44.699762,44.70012,44.700698,44.706537,44.706562,44.706575,44.706623,44.706443,44.706508,44.70682,44.707265,44.707393,44.707515,44.707528,44.707595,44.708007,44.70815,44.708293,44.708413,44.708712,44.708893,44.709178,44.709688,44.709762,44.709825,44.709913,44.709902,44.709718,44.70957,44.709572,44.7099,44.710275,44.71046,44.71077,44.710883,44.710962,44.710928,44.710708,44.710387,44.710328,44.710368,44.7105,44.7108,44.71165,44.712445,44.712702,44.71318,44.713507,44.713752,44.713875,44.713882,44.713805,44.713187,44.713167,44.713185,44.713327,44.714007,44.714508,44.714703,44.715197,44.715145,44.714273,44.713832,44.713323,44.711775,44.711708,44.711785,44.712923,44.713913,44.714402,44.714627,44.714865,44.715067,44.715265,44.71595,44.716095,44.716445,44.7172,44.717903,44.718117,44.718333,44.718415,44.71834,44.718208,44.718173,44.718227,44.718332,44.718635,44.71993,44.720722,44.721047,44.721417,44.721737,44.721938,44.722202,44.722567,44.723242,44.723943,44.725838,44.725825,44.725753,44.72571,44.725777,44.72592,44.726343,44.727038,44.727348,44.727392,44.728378,44.728813,44.729767,44.730392,44.731507,44.731807,44.732323,44.732543,44.733825,44.734252,44.73444,44.734747,44.734835,44.734958,44.7354,44.735533,44.73578,44.736003,44.736242,44.736402,44.73753,44.738217,44.73861,44.738735,44.73867,44.738582,44.738437,44.738192,44.738098,44.737808,44.737565,44.737493,44.737487,44.73761,44.737982,44.738072,44.738177,44.738322,44.738603,44.738777,44.73889,44.739003,44.739162,44.739688,44.739825,44.739928,44.739928,44.73986,44.73973,44.73924,44.738967,44.738917,44.738935,44.739043,44.739832,44.740132,44.740322,44.740598,44.741198,44.741537,44.741957,44.742907,44.743199]}]],[[{"lng":[6.900294,6.900514,6.901104,6.901211,6.901452,6.901517,6.901865,6.902155,6.904022,6.904172,6.905846,6.905969,6.904671,6.90428,6.904215,6.904199,6.905213,6.905406,6.905782,6.905889,6.906254,6.907648,6.908528,6.908925,6.909065,6.909617,6.909966,6.910411,6.911387,6.911677,6.912004,6.912401,6.91253,6.912804,6.912889,6.913147,6.913866,6.914831,6.915556,6.916457,6.916516,6.916575,6.916473,6.915615,6.915191,6.914558,6.913919,6.913673,6.912503,6.912331,6.911822,6.911564,6.911286,6.911028,6.910974,6.910996,6.911693,6.912079,6.912396,6.913308,6.913796,6.914123,6.914483,6.914601,6.914949,6.91577,6.91628,6.916983,6.917031,6.9171,6.915792,6.915073,6.913308,6.913109,6.91216,6.911945,6.910953,6.910942,6.910754,6.910529,6.910272,6.910068,6.909622,6.909231,6.908255,6.908024,6.907096,6.907058,6.907761,6.90797,6.908641,6.908957,6.909247,6.910003,6.910502,6.910829,6.913871,6.916763,6.917433,6.917921,6.918007,6.918125,6.918334,6.918544,6.918989,6.919278,6.919606,6.919922,6.920003,6.920083,6.919332,6.91798,6.9179,6.91783,6.917793,6.917819,6.918329,6.918806,6.918962,6.919053,6.919413,6.919391,6.919123,6.918839,6.918426,6.918447,6.919375,6.919504,6.919734,6.920394,6.920781,6.920775,6.921022,6.921215,6.921403,6.921564,6.921714,6.922304,6.923087,6.925689,6.926451,6.927711,6.928173,6.928323,6.928655,6.929197,6.929653,6.929911,6.93041,6.930528,6.930603,6.930678,6.930951,6.931139,6.931187,6.931166,6.930742,6.930667,6.930635,6.930683,6.930758,6.931096,6.931922,6.932287,6.932405,6.932555,6.93255,6.932609,6.934181,6.934476,6.934835,6.935629,6.935855,6.936192,6.936466,6.936568,6.936943,6.937104,6.937298,6.938311,6.93903,6.939272,6.939272,6.939835,6.940484,6.940527,6.940527,6.940135,6.940103,6.940189,6.940307,6.940355,6.940162,6.940216,6.940715,6.941573,6.94248,6.943215,6.943477,6.943703,6.943874,6.944164,6.945049,6.94543,6.946782,6.948075,6.948252,6.948305,6.948064,6.948273,6.948337,6.948236,6.948327,6.948879,6.949931,6.950172,6.950269,6.950269,6.950269,6.950338,6.950285,6.950279,6.950156,6.949609,6.94941,6.949426,6.949786,6.949807,6.949722,6.94867,6.948455,6.948364,6.948391,6.948439,6.94919,6.949292,6.949426,6.949748,6.949845,6.94985,6.949748,6.949791,6.950204,6.950585,6.951079,6.951288,6.951481,6.95161,6.951615,6.951438,6.951122,6.950945,6.950923,6.950923,6.950923,6.951175,6.951476,6.951481,6.951438,6.951213,6.951116,6.951068,6.95191,6.951953,6.951792,6.951283,6.950977,6.950768,6.950639,6.94999,6.949754,6.949679,6.949598,6.94999,6.949947,6.949941,6.949936,6.94963,6.94948,6.949185,6.94918,6.94903,6.948847,6.948531,6.948515,6.948289,6.948171,6.948193,6.947533,6.947522,6.947645,6.947855,6.947731,6.947806,6.947501,6.947404,6.947195,6.94616,6.946111,6.946084,6.946068,6.946115],"lat":[43.95072,43.950688,43.950693,43.950682,43.950564,43.950527,43.95028,43.950108,43.949792,43.949786,43.950339,43.950248,43.949658,43.949529,43.949497,43.949357,43.94962,43.949733,43.949974,43.950012,43.949996,43.950033,43.950763,43.950897,43.950918,43.951213,43.951278,43.951235,43.950945,43.950704,43.950537,43.950462,43.950462,43.950537,43.950575,43.950602,43.950527,43.950768,43.950731,43.950773,43.950763,43.950671,43.950591,43.950618,43.950586,43.950435,43.950215,43.95014,43.949797,43.949802,43.950033,43.950071,43.950194,43.950199,43.95013,43.950081,43.949776,43.949518,43.949411,43.949577,43.949373,43.94925,43.949234,43.949239,43.949245,43.94925,43.949309,43.949529,43.949529,43.949432,43.948966,43.948644,43.948268,43.948236,43.947882,43.947839,43.947775,43.947775,43.947764,43.947705,43.94756,43.94741,43.947163,43.947051,43.947067,43.94704,43.946573,43.94645,43.946605,43.946643,43.946595,43.946611,43.946659,43.946879,43.946975,43.947013,43.946959,43.947362,43.947496,43.947657,43.947678,43.947646,43.947469,43.947174,43.946804,43.946643,43.946203,43.945259,43.944873,43.944636,43.945522,43.946798,43.94682,43.946798,43.946739,43.946659,43.946246,43.945731,43.945452,43.945141,43.944336,43.944063,43.943789,43.943639,43.943333,43.943156,43.94241,43.942212,43.942056,43.941917,43.941895,43.941895,43.941885,43.941917,43.941992,43.942029,43.942035,43.941938,43.941831,43.941885,43.941885,43.941536,43.941514,43.941488,43.941327,43.941268,43.941316,43.941262,43.940871,43.940731,43.940399,43.940302,43.940232,43.940168,43.940023,43.939953,43.939562,43.939471,43.939379,43.939192,43.939117,43.93895,43.938634,43.938188,43.938087,43.937722,43.936965,43.936869,43.936579,43.936289,43.936086,43.935893,43.935624,43.935501,43.935522,43.935544,43.935356,43.935324,43.935329,43.935045,43.934922,43.934771,43.934771,43.934428,43.934256,43.934165,43.934101,43.933645,43.93357,43.933194,43.933028,43.932862,43.932572,43.932438,43.932379,43.931773,43.931622,43.931714,43.931848,43.931907,43.931928,43.93188,43.931907,43.931746,43.931757,43.931601,43.931537,43.931456,43.931204,43.930807,43.930142,43.929852,43.929632,43.929616,43.929268,43.929166,43.929107,43.92908,43.929074,43.928339,43.928125,43.928114,43.927921,43.927411,43.926773,43.926564,43.92599,43.925936,43.925797,43.92526,43.925067,43.924761,43.92401,43.923919,43.92371,43.923629,43.92341,43.922809,43.922508,43.922111,43.921779,43.921645,43.921323,43.921189,43.921333,43.921414,43.921339,43.921189,43.921146,43.920888,43.920545,43.920309,43.920067,43.920057,43.920014,43.91915,43.918528,43.91826,43.91804,43.91738,43.917096,43.916634,43.914521,43.91421,43.913861,43.913566,43.913491,43.913496,43.913507,43.913609,43.913587,43.913539,43.91341,43.912847,43.912547,43.912536,43.912477,43.912241,43.911892,43.911377,43.910733,43.910444,43.910283,43.909816,43.909328,43.908791,43.908067,43.907702,43.906388,43.906206,43.906018,43.905846,43.905122,43.904715,43.902891,43.902622,43.902317,43.901619,43.901566,43.901276,43.901094,43.900338]}]],[[{"lng":[6.77335,6.774434,6.775104,6.77718,6.778205,6.778334,6.779557,6.780474,6.780785,6.781161,6.781633,6.78218,6.782684,6.783226,6.783645,6.78453,6.785179,6.785817,6.786085,6.786241,6.786364,6.786826,6.78711,6.787131,6.787303,6.78748,6.787877,6.788236,6.78895,6.788982,6.789154,6.789867,6.789926,6.789932,6.790093,6.790012,6.790109,6.790452,6.791332,6.791943,6.792072,6.792179,6.792437,6.792544,6.79256,6.79256,6.792565,6.792694,6.792721,6.792979,6.793515,6.793692,6.79388,6.794137,6.794491,6.794835,6.794985,6.794894,6.794942,6.795183,6.794894,6.794915,6.795441,6.795098,6.795494,6.795553,6.795435,6.795065,6.794025,6.793917,6.793869,6.793853,6.793885,6.793976,6.794094,6.794089,6.793944,6.79388,6.793311,6.792346,6.792067,6.791997,6.7919,6.791777,6.791788,6.792431,6.792839,6.793783,6.794255,6.794288,6.794277,6.7941,6.794062,6.79418,6.794196,6.794561,6.795001,6.795006,6.794953,6.795039,6.795028,6.795044,6.795173,6.795553,6.795591,6.795827,6.795832,6.795537,6.795586,6.796117,6.796342,6.7966,6.796991,6.797549,6.797984,6.798043,6.798021,6.797544,6.796959,6.796428,6.796262,6.795666,6.793998,6.791584,6.791316,6.790849,6.790264,6.790114,6.790103,6.790194,6.790189,6.790135,6.790076,6.789347,6.78903,6.788762,6.788515,6.788242,6.788033,6.788016,6.788022,6.788462,6.78903,6.789336,6.789486,6.790216,6.790522,6.79065,6.790763,6.791208,6.791332,6.791332,6.791294,6.790897,6.790881,6.790908,6.791326,6.791385,6.791096,6.791074,6.791144,6.791278,6.791466,6.791933,6.79241,6.792925,6.793241,6.793488,6.79425,6.794545,6.79536,6.795747,6.796133,6.796267,6.796685,6.796986,6.797281,6.79764,6.797903,6.798241,6.798279,6.798273,6.798252,6.798204,6.795779,6.79558,6.795441,6.79536,6.795355,6.795629,6.795956,6.797018,6.797458,6.798343,6.798332,6.798515,6.79918,6.799984,6.800559,6.80073,6.80264,6.802828,6.802828,6.80271,6.80176,6.801358,6.800725,6.800467,6.800483,6.800526,6.801047,6.802082,6.802565,6.803246,6.803327,6.803327,6.803235,6.803117,6.802796,6.802399,6.801894,6.801594,6.801395,6.801438,6.802157,6.802447,6.802672,6.802774,6.802838,6.803439,6.804576,6.805215,6.805762,6.8058,6.80441,6.80352,6.802887,6.802511,6.801889,6.801808,6.801808,6.802463,6.802726,6.803005,6.803439,6.803766,6.804636,6.807216,6.807613,6.807897,6.808273,6.80853,6.809077,6.809179,6.809238,6.809185,6.809056,6.80926,6.809367,6.809356,6.809329,6.809136,6.808702,6.808664,6.808669,6.808922,6.809099,6.809308,6.809404,6.809522,6.80993,6.81155,6.812553,6.812602,6.812591,6.812205,6.811657,6.811207,6.810611,6.81037,6.809555,6.809512,6.809581,6.810204,6.811738,6.812162,6.812886,6.813159,6.813637,6.814082,6.814479,6.814608,6.814678,6.814656,6.814576,6.814152,6.813685,6.81346,6.813379,6.813122,6.812553,6.812328,6.811953,6.811287,6.810263,6.809469,6.809399,6.810016,6.810531,6.812714,6.812956,6.812548,6.811904,6.811572,6.811668,6.811657,6.811625,6.811336,6.811239,6.810896,6.81066,6.810456,6.810333,6.809887,6.809769,6.809791,6.810483,6.810858,6.811352,6.811486,6.811802,6.811979,6.812205,6.812307,6.812215,6.812253,6.812274,6.812173,6.811995,6.811325,6.812194,6.812274,6.812317,6.811749,6.811539,6.811405,6.8111,6.810917],"lat":[43.876326,43.876975,43.877447,43.878804,43.879411,43.879529,43.880923,43.882254,43.882527,43.882758,43.883058,43.883396,43.883809,43.884158,43.884383,43.885,43.88581,43.886245,43.886384,43.886422,43.886416,43.886288,43.886341,43.886379,43.886969,43.887414,43.887715,43.887876,43.888112,43.888165,43.888305,43.888562,43.888841,43.888932,43.889227,43.889464,43.889823,43.89029,43.891234,43.891824,43.892173,43.892285,43.89236,43.89243,43.8928,43.892789,43.892816,43.893342,43.893626,43.89434,43.895429,43.896008,43.896067,43.896046,43.895971,43.896196,43.896716,43.896995,43.897119,43.897542,43.897843,43.898025,43.899007,43.899136,43.899441,43.899972,43.900267,43.900659,43.900986,43.901051,43.901222,43.901791,43.901968,43.902188,43.902526,43.902574,43.902681,43.902703,43.902606,43.902478,43.902488,43.902558,43.902735,43.903341,43.903427,43.90436,43.904822,43.905331,43.905643,43.905766,43.905879,43.906179,43.906286,43.907102,43.90774,43.907906,43.908073,43.909194,43.909451,43.909746,43.910036,43.910079,43.910133,43.910192,43.910202,43.91053,43.91068,43.911066,43.911216,43.911313,43.911313,43.911307,43.911248,43.911232,43.911307,43.91135,43.911425,43.911796,43.912096,43.912767,43.91289,43.912906,43.91296,43.912986,43.913035,43.913282,43.913389,43.913458,43.913571,43.913893,43.914097,43.914167,43.914183,43.914006,43.913941,43.913941,43.914006,43.914167,43.914338,43.914392,43.914623,43.915363,43.915932,43.916318,43.916683,43.91768,43.918002,43.918388,43.918646,43.919333,43.919638,43.919848,43.920019,43.920185,43.92025,43.920314,43.920636,43.92128,43.921698,43.921843,43.922363,43.922659,43.922809,43.923345,43.92364,43.923914,43.924171,43.924295,43.924434,43.924434,43.924343,43.924407,43.924654,43.924756,43.925362,43.925604,43.925743,43.926328,43.926843,43.927175,43.92725,43.927916,43.928093,43.928286,43.927604,43.927401,43.927309,43.927326,43.927438,43.927658,43.927792,43.928533,43.928779,43.929117,43.929112,43.929182,43.929487,43.929949,43.930523,43.930823,43.932465,43.932695,43.932738,43.932728,43.932331,43.932234,43.932143,43.93217,43.932277,43.932347,43.932679,43.933468,43.93372,43.933897,43.933972,43.934026,43.934058,43.934042,43.933892,43.933897,43.933972,43.933897,43.933897,43.934042,43.934165,43.934331,43.934669,43.93497,43.935077,43.935592,43.936134,43.936413,43.936472,43.936509,43.936896,43.936965,43.936858,43.936826,43.93688,43.936923,43.936992,43.937427,43.937743,43.937953,43.938076,43.938167,43.938237,43.938188,43.938151,43.938199,43.938349,43.938333,43.937963,43.937979,43.938113,43.938323,43.93851,43.939047,43.939492,43.939793,43.939927,43.940168,43.940404,43.940463,43.940522,43.940721,43.940919,43.941638,43.941917,43.94211,43.942443,43.942587,43.942652,43.942705,43.942759,43.942834,43.942856,43.942915,43.943043,43.943054,43.942877,43.942925,43.943049,43.943183,43.943419,43.94344,43.943381,43.943333,43.943145,43.943113,43.942968,43.942968,43.942995,43.94307,43.943145,43.943295,43.943408,43.943564,43.943666,43.943751,43.9441,43.944218,43.944245,43.944164,43.944164,43.944218,43.944234,43.944481,43.944594,43.944814,43.944889,43.944996,43.945146,43.945409,43.945844,43.945945,43.945999,43.946139,43.946155,43.946101,43.946112,43.94623,43.94623,43.946241,43.946262,43.946353,43.946375,43.946417,43.946541,43.94653,43.946369,43.946342,43.946348,43.94646,43.946755,43.946847,43.947276,43.947405,43.947442,43.947603,43.948016,43.948054,43.948123,43.948177,43.948182,43.948166,43.948118,43.948166]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"red","weight":3,"opacity":0.5,"fill":false,"fillColor":"red","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[43.876326,44.819732],"lng":[5.243488,6.951953]}},"evals":[],"jsHooks":[]}</script>
<p>The <em>Stamen.TonerLite</em> theme is very clear for identifying where the stages are whilst the <em>OpenTopoMap</em> and <em>Stamen.TerrainBackground</em> themes are using for showing relief, particularly in mountainous or hilly stages.</p>
<p>As well as previewing all the stage routes in the features collection, we can extract the linestring geometry for a single route:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="working-with-route-data.html#cb60-1" aria-hidden="true" tabindex="-1"></a>kml_geom <span class="ot">=</span> kml_df[<span class="dv">1</span>, ]<span class="sc">$</span>geometry</span>
<span id="cb60-2"><a href="working-with-route-data.html#cb60-2" aria-hidden="true" tabindex="-1"></a>kml_geom</span></code></pre></div>
<pre><code>## Geometry set for 1 feature 
## geometry type:  LINESTRING
## dimension:      XY
## bbox:           xmin: 5.883753 ymin: 44.73562 xmax: 5.940715 ymax: 44.81973
## geographic CRS: WGS 84</code></pre>
<pre><code>## LINESTRING (5.894486 44.73562, 5.894618 44.7358...</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="working-with-route-data.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># kml_df[kml_df$Name==&#39;SS 1&#39; , ] # Get row</span></span></code></pre></div>
<p>We can now generate a quick map preview of that particular stage:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="working-with-route-data.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>(stages_kml[<span class="dv">1</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="working-with-route-data.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(<span class="st">&quot;OpenTopoMap&quot;</span>, <span class="at">group =</span> <span class="st">&quot;OSM&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="working-with-route-data.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolylines</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">weight =</span> <span class="dv">5</span>)</span></code></pre></div>
<div id="htmlwidget-d9b7165447c2f375cc1d" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-d9b7165447c2f375cc1d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenTopoMap",null,"OSM",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolylines","args":[[[[{"lng":[5.894486,5.894618,5.894778,5.894805,5.894672,5.894407,5.893912,5.893578,5.89172,5.891433,5.891298,5.891362,5.891597,5.891862,5.892002,5.892008,5.891335,5.891103,5.890532,5.890608,5.890752,5.890765,5.890347,5.890073,5.889517,5.888297,5.888073,5.887965,5.887875,5.887657,5.88689,5.88652,5.886002,5.885592,5.885238,5.885072,5.88518,5.885023,5.884815,5.884872,5.885,5.884995,5.884855,5.884797,5.884568,5.883923,5.883837,5.883753,5.883783,5.88435,5.884825,5.885332,5.8858,5.886523,5.886617,5.886647,5.886798,5.887068,5.88712,5.887133,5.88729,5.887937,5.888073,5.888083,5.888248,5.888592,5.88934,5.889938,5.890837,5.891675,5.892485,5.893257,5.89399,5.89436,5.894845,5.895225,5.895593,5.896387,5.897093,5.897828,5.898207,5.898468,5.898717,5.900633,5.901327,5.901892,5.902313,5.90256,5.903095,5.903202,5.903262,5.90323,5.90317,5.903258,5.90362,5.903788,5.904052,5.904285,5.904627,5.905452,5.906387,5.907607,5.907985,5.908453,5.908712,5.909033,5.909068,5.908958,5.909072,5.909323,5.90987,5.910563,5.911877,5.912927,5.913292,5.91384,5.914295,5.9149,5.915582,5.915852,5.916025,5.916333,5.916562,5.91679,5.917125,5.9179,5.9184,5.918885,5.919097,5.919548,5.919783,5.920475,5.920688,5.92087,5.920875,5.920827,5.920995,5.921395,5.921412,5.920982,5.921027,5.921287,5.92148,5.921745,5.922175,5.922148,5.921965,5.9214,5.92114,5.92095,5.920675,5.9202,5.919993,5.919103,5.918942,5.918908,5.91899,5.919562,5.919752,5.92002,5.921048,5.92208,5.922703,5.922657,5.922437,5.92197,5.921622,5.920627,5.920498,5.920517,5.920718,5.920915,5.920888,5.920757,5.920453,5.920268,5.920187,5.92016,5.920012,5.918987,5.91837,5.918117,5.917647,5.91742,5.917013,5.916813,5.916697,5.91671,5.916878,5.917182,5.917687,5.918422,5.91845,5.918353,5.918148,5.917752,5.917443,5.91733,5.91714,5.916813,5.91629,5.915897,5.914883,5.914543,5.914068,5.913522,5.913033,5.912768,5.912445,5.912283,5.912147,5.912072,5.912133,5.912568,5.912832,5.912825,5.912773,5.91281,5.912988,5.913285,5.913622,5.913927,5.914192,5.914358,5.91436,5.914188,5.913967,5.913828,5.913823,5.913948,5.91417,5.914197,5.914305,5.91427,5.914095,5.91375,5.913197,5.913027,5.913002,5.913017,5.912968,5.912898,5.912798,5.912717,5.912788,5.913113,5.912883,5.912682,5.912222,5.911108,5.910588,5.910152,5.90938,5.90938,5.909433,5.909318,5.908048,5.908023,5.908007,5.908057,5.909883,5.909967,5.91064,5.910868,5.911248,5.91177,5.911905,5.912322,5.912872,5.912878,5.912767,5.912632,5.912555,5.912577,5.912693,5.91328,5.913268,5.913135,5.912285,5.91167,5.910647,5.910585,5.910753,5.91095,5.910808,5.908725,5.908577,5.908197,5.90758,5.907173,5.90739,5.907838,5.907972,5.90799,5.907885,5.905927,5.905868,5.905638,5.905362,5.900993,5.901082,5.903422,5.9037,5.90425,5.904528,5.904733,5.90656,5.90689,5.908113,5.90843,5.908685,5.908988,5.909205,5.909415,5.909985,5.910178,5.910315,5.910322,5.910107,5.909825,5.90947,5.909243,5.90924,5.909368,5.909533,5.909942,5.9103,5.91113,5.911322,5.91144,5.911567,5.911702,5.911883,5.912622,5.912777,5.912923,5.912922,5.912788,5.912355,5.911995,5.911683,5.911475,5.911032,5.910925,5.910842,5.910702,5.910555,5.910327,5.910068,5.909375,5.907205,5.907203,5.907607,5.907998,5.90805,5.907942,5.907455,5.907487,5.907668,5.908275,5.908487,5.910033,5.911102,5.91225,5.91285,5.913228,5.91413,5.914372,5.914657,5.915142,5.915562,5.915683,5.915785,5.915827,5.91597,5.916547,5.917078,5.917288,5.917522,5.917802,5.918248,5.918513,5.919397,5.920775,5.921145,5.922952,5.924433,5.926068,5.926332,5.926693,5.927,5.927723,5.928357,5.929227,5.930022,5.93052,5.931418,5.931788,5.932423,5.933035,5.933205,5.933252,5.93317,5.93295,5.932512,5.932275,5.932185,5.932282,5.93308,5.934547,5.935048,5.935415,5.935765,5.935815,5.936858,5.937347,5.938643,5.93957,5.940715],"lat":[44.735616,44.735796,44.73602,44.736208,44.736365,44.736417,44.73641,44.736497,44.737378,44.737608,44.737893,44.738188,44.738433,44.738658,44.738918,44.739387,44.741625,44.741962,44.742657,44.74279,44.742898,44.743062,44.74377,44.743987,44.744232,44.74453,44.744737,44.745003,44.745667,44.745898,44.746435,44.746815,44.747272,44.74733,44.747517,44.748068,44.748778,44.749218,44.749597,44.749812,44.750048,44.750315,44.750867,44.750932,44.750988,44.751062,44.751127,44.751353,44.751575,44.753332,44.753957,44.754798,44.75512,44.755598,44.755822,44.756077,44.756328,44.756687,44.756955,44.75802,44.758138,44.758372,44.75855,44.759195,44.75932,44.759498,44.760225,44.76047,44.760835,44.76128,44.76183,44.762027,44.762045,44.762152,44.76235,44.76246,44.762647,44.763272,44.763717,44.764305,44.764535,44.764783,44.764887,44.765207,44.765412,44.765695,44.76592,44.765963,44.765932,44.765985,44.766065,44.766243,44.766387,44.766508,44.766705,44.766948,44.767515,44.76774,44.767895,44.768142,44.768365,44.768782,44.768843,44.768835,44.768937,44.769163,44.769257,44.76962,44.769793,44.769933,44.770123,44.770462,44.770788,44.771277,44.77134,44.771315,44.771228,44.771043,44.770973,44.771028,44.771188,44.771963,44.772965,44.77316,44.77328,44.773465,44.773702,44.773825,44.773983,44.774365,44.774362,44.774198,44.774252,44.774432,44.774467,44.774512,44.774672,44.775088,44.775253,44.776207,44.777338,44.777908,44.77814,44.778312,44.778505,44.778628,44.77868,44.77858,44.778478,44.7783,44.777967,44.777552,44.777358,44.776912,44.776952,44.777008,44.777157,44.777622,44.778018,44.778758,44.77972,44.781063,44.781725,44.781883,44.781998,44.782127,44.78215,44.782042,44.782128,44.782252,44.782398,44.782522,44.782598,44.782627,44.782563,44.782457,44.7823,44.781642,44.781512,44.781063,44.78094,44.780973,44.781227,44.781407,44.781885,44.781898,44.781787,44.781712,44.781588,44.78139,44.780877,44.780423,44.780263,44.780123,44.780053,44.780027,44.779868,44.779863,44.779973,44.780237,44.78046,44.780543,44.780592,44.780512,44.780267,44.780218,44.779988,44.779862,44.77955,44.779287,44.779275,44.77937,44.779522,44.779962,44.780192,44.780358,44.780543,44.780757,44.780927,44.781007,44.780978,44.780932,44.780993,44.781143,44.781225,44.78133,44.781453,44.781653,44.781892,44.78233,44.782543,44.782932,44.78315,44.783198,44.78321,44.78316,44.783293,44.783433,44.783637,44.783867,44.783905,44.783902,44.783795,44.783398,44.783165,44.782805,44.782575,44.782473,44.782417,44.782327,44.78216,44.781902,44.7811,44.780938,44.780742,44.780678,44.780717,44.780727,44.780783,44.781145,44.79076,44.790812,44.790758,44.790833,44.791168,44.791373,44.791545,44.792348,44.793062,44.793258,44.793328,44.793388,44.793523,44.793947,44.79429,44.795408,44.795598,44.795728,44.796073,44.796227,44.796453,44.796518,44.79795,44.79971,44.799782,44.80001,44.799948,44.799553,44.799285,44.799187,44.799322,44.799532,44.799738,44.799898,44.80007,44.802173,44.804155,44.809063,44.80906,44.809308,44.80942,44.811205,44.811485,44.812413,44.812887,44.81303,44.813443,44.813468,44.813323,44.813375,44.81352,44.813737,44.813768,44.813678,44.813305,44.81325,44.813323,44.813395,44.813653,44.813977,44.814555,44.814698,44.814817,44.81489,44.814838,44.814518,44.814175,44.81372,44.813743,44.813867,44.814092,44.81409,44.813998,44.813553,44.813527,44.813592,44.813657,44.813743,44.813948,44.814327,44.814623,44.814665,44.814595,44.814623,44.814687,44.815028,44.815663,44.815937,44.816035,44.81612,44.816173,44.816267,44.816475,44.816692,44.816845,44.817043,44.817663,44.817827,44.817975,44.818295,44.818302,44.818165,44.818338,44.818103,44.818068,44.818143,44.818452,44.818645,44.819067,44.819351,44.819288,44.819158,44.818613,44.81839,44.818192,44.817657,44.817015,44.816947,44.817012,44.817302,44.81782,44.817922,44.818122,44.818235,44.818285,44.81815,44.818208,44.818157,44.818283,44.818502,44.818532,44.818432,44.818453,44.818528,44.818495,44.818455,44.818573,44.818555,44.818448,44.818557,44.818683,44.818867,44.819062,44.819217,44.819327,44.81937,44.819463,44.819537,44.819582,44.819732,44.819687,44.819545,44.819312,44.819283,44.818918,44.818875,44.81897,44.818925,44.819117]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"red","weight":5,"opacity":0.5,"fill":false,"fillColor":"red","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[44.735616,44.819732],"lng":[5.883753,5.940715]}},"evals":[],"jsHooks":[]}</script>
<p>We can also highlight the stage start and end points as simple circle markers, as pin “balloon” markers, in this case with a fixed label to annotate the stage start and finish:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="working-with-route-data.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a palette that maps factor levels to colors</span></span>
<span id="cb65-2"><a href="working-with-route-data.html#cb65-2" aria-hidden="true" tabindex="-1"></a>pal <span class="ot">&lt;-</span> <span class="fu">colorFactor</span>(<span class="fu">c</span>(<span class="st">&quot;darkgreen&quot;</span>, <span class="st">&quot;darkred&quot;</span>),</span>
<span id="cb65-3"><a href="working-with-route-data.html#cb65-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">domain =</span> <span class="fu">c</span>(<span class="st">&quot;start&quot;</span>, <span class="st">&quot;stop&quot;</span>))</span>
<span id="cb65-4"><a href="working-with-route-data.html#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="working-with-route-data.html#cb65-5" aria-hidden="true" tabindex="-1"></a>m <span class="ot">=</span> <span class="fu">leaflet</span>(stages_kml[<span class="dv">1</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb65-6"><a href="working-with-route-data.html#cb65-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">addProviderTiles</span>(<span class="st">&quot;OpenTopoMap&quot;</span>, <span class="at">group =</span> <span class="st">&quot;OSM&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb65-7"><a href="working-with-route-data.html#cb65-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">addPolylines</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">weight =</span> <span class="dv">5</span>)</span>
<span id="cb65-8"><a href="working-with-route-data.html#cb65-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-9"><a href="working-with-route-data.html#cb65-9" aria-hidden="true" tabindex="-1"></a>m <span class="sc">%&gt;%</span></span>
<span id="cb65-10"><a href="working-with-route-data.html#cb65-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="sc">~</span>X, <span class="sc">~</span>Y, <span class="co">#popup = ~label,</span></span>
<span id="cb65-11"><a href="working-with-route-data.html#cb65-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">label =</span> <span class="sc">~</span>label,</span>
<span id="cb65-12"><a href="working-with-route-data.html#cb65-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">labelOptions =</span> <span class="fu">labelOptions</span>(<span class="at">noHide =</span> T,</span>
<span id="cb65-13"><a href="working-with-route-data.html#cb65-13" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">direction =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb65-14"><a href="working-with-route-data.html#cb65-14" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb65-15"><a href="working-with-route-data.html#cb65-15" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">&quot;color&quot;</span> <span class="ot">=</span> <span class="st">&#39;black&#39;</span>,</span>
<span id="cb65-16"><a href="working-with-route-data.html#cb65-16" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">&quot;font-family&quot;</span> <span class="ot">=</span> <span class="st">&quot;serif&quot;</span>,</span>
<span id="cb65-17"><a href="working-with-route-data.html#cb65-17" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">&quot;font-style&quot;</span> <span class="ot">=</span> <span class="st">&quot;italic&quot;</span>,</span>
<span id="cb65-18"><a href="working-with-route-data.html#cb65-18" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">&quot;box-shadow&quot;</span> <span class="ot">=</span> <span class="st">&quot;3px 3px rgba(0,0,0,0.25)&quot;</span>,</span>
<span id="cb65-19"><a href="working-with-route-data.html#cb65-19" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">&quot;font-size&quot;</span> <span class="ot">=</span> <span class="st">&quot;12px&quot;</span>,</span>
<span id="cb65-20"><a href="working-with-route-data.html#cb65-20" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">&quot;border-color&quot;</span> <span class="ot">=</span> <span class="st">&quot;rgba(0,0,0,0.5)&quot;</span></span>
<span id="cb65-21"><a href="working-with-route-data.html#cb65-21" aria-hidden="true" tabindex="-1"></a>                                          )),</span>
<span id="cb65-22"><a href="working-with-route-data.html#cb65-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">data=</span>first_and_last) <span class="sc">%&gt;%</span></span>
<span id="cb65-23"><a href="working-with-route-data.html#cb65-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(<span class="sc">~</span>X, <span class="sc">~</span>Y,  <span class="at">radius =</span><span class="dv">10</span>, <span class="at">color =</span> <span class="sc">~</span><span class="fu">pal</span>(typ),</span>
<span id="cb65-24"><a href="working-with-route-data.html#cb65-24" aria-hidden="true" tabindex="-1"></a>                   <span class="at">stroke =</span> <span class="cn">FALSE</span>, <span class="at">fillOpacity =</span> <span class="fl">0.5</span>,</span>
<span id="cb65-25"><a href="working-with-route-data.html#cb65-25" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data=</span>first_and_last)</span></code></pre></div>
<div id="htmlwidget-21f2143599d3f69b76f5" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-21f2143599d3f69b76f5">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenTopoMap",null,"OSM",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolylines","args":[[[[{"lng":[5.894486,5.894618,5.894778,5.894805,5.894672,5.894407,5.893912,5.893578,5.89172,5.891433,5.891298,5.891362,5.891597,5.891862,5.892002,5.892008,5.891335,5.891103,5.890532,5.890608,5.890752,5.890765,5.890347,5.890073,5.889517,5.888297,5.888073,5.887965,5.887875,5.887657,5.88689,5.88652,5.886002,5.885592,5.885238,5.885072,5.88518,5.885023,5.884815,5.884872,5.885,5.884995,5.884855,5.884797,5.884568,5.883923,5.883837,5.883753,5.883783,5.88435,5.884825,5.885332,5.8858,5.886523,5.886617,5.886647,5.886798,5.887068,5.88712,5.887133,5.88729,5.887937,5.888073,5.888083,5.888248,5.888592,5.88934,5.889938,5.890837,5.891675,5.892485,5.893257,5.89399,5.89436,5.894845,5.895225,5.895593,5.896387,5.897093,5.897828,5.898207,5.898468,5.898717,5.900633,5.901327,5.901892,5.902313,5.90256,5.903095,5.903202,5.903262,5.90323,5.90317,5.903258,5.90362,5.903788,5.904052,5.904285,5.904627,5.905452,5.906387,5.907607,5.907985,5.908453,5.908712,5.909033,5.909068,5.908958,5.909072,5.909323,5.90987,5.910563,5.911877,5.912927,5.913292,5.91384,5.914295,5.9149,5.915582,5.915852,5.916025,5.916333,5.916562,5.91679,5.917125,5.9179,5.9184,5.918885,5.919097,5.919548,5.919783,5.920475,5.920688,5.92087,5.920875,5.920827,5.920995,5.921395,5.921412,5.920982,5.921027,5.921287,5.92148,5.921745,5.922175,5.922148,5.921965,5.9214,5.92114,5.92095,5.920675,5.9202,5.919993,5.919103,5.918942,5.918908,5.91899,5.919562,5.919752,5.92002,5.921048,5.92208,5.922703,5.922657,5.922437,5.92197,5.921622,5.920627,5.920498,5.920517,5.920718,5.920915,5.920888,5.920757,5.920453,5.920268,5.920187,5.92016,5.920012,5.918987,5.91837,5.918117,5.917647,5.91742,5.917013,5.916813,5.916697,5.91671,5.916878,5.917182,5.917687,5.918422,5.91845,5.918353,5.918148,5.917752,5.917443,5.91733,5.91714,5.916813,5.91629,5.915897,5.914883,5.914543,5.914068,5.913522,5.913033,5.912768,5.912445,5.912283,5.912147,5.912072,5.912133,5.912568,5.912832,5.912825,5.912773,5.91281,5.912988,5.913285,5.913622,5.913927,5.914192,5.914358,5.91436,5.914188,5.913967,5.913828,5.913823,5.913948,5.91417,5.914197,5.914305,5.91427,5.914095,5.91375,5.913197,5.913027,5.913002,5.913017,5.912968,5.912898,5.912798,5.912717,5.912788,5.913113,5.912883,5.912682,5.912222,5.911108,5.910588,5.910152,5.90938,5.90938,5.909433,5.909318,5.908048,5.908023,5.908007,5.908057,5.909883,5.909967,5.91064,5.910868,5.911248,5.91177,5.911905,5.912322,5.912872,5.912878,5.912767,5.912632,5.912555,5.912577,5.912693,5.91328,5.913268,5.913135,5.912285,5.91167,5.910647,5.910585,5.910753,5.91095,5.910808,5.908725,5.908577,5.908197,5.90758,5.907173,5.90739,5.907838,5.907972,5.90799,5.907885,5.905927,5.905868,5.905638,5.905362,5.900993,5.901082,5.903422,5.9037,5.90425,5.904528,5.904733,5.90656,5.90689,5.908113,5.90843,5.908685,5.908988,5.909205,5.909415,5.909985,5.910178,5.910315,5.910322,5.910107,5.909825,5.90947,5.909243,5.90924,5.909368,5.909533,5.909942,5.9103,5.91113,5.911322,5.91144,5.911567,5.911702,5.911883,5.912622,5.912777,5.912923,5.912922,5.912788,5.912355,5.911995,5.911683,5.911475,5.911032,5.910925,5.910842,5.910702,5.910555,5.910327,5.910068,5.909375,5.907205,5.907203,5.907607,5.907998,5.90805,5.907942,5.907455,5.907487,5.907668,5.908275,5.908487,5.910033,5.911102,5.91225,5.91285,5.913228,5.91413,5.914372,5.914657,5.915142,5.915562,5.915683,5.915785,5.915827,5.91597,5.916547,5.917078,5.917288,5.917522,5.917802,5.918248,5.918513,5.919397,5.920775,5.921145,5.922952,5.924433,5.926068,5.926332,5.926693,5.927,5.927723,5.928357,5.929227,5.930022,5.93052,5.931418,5.931788,5.932423,5.933035,5.933205,5.933252,5.93317,5.93295,5.932512,5.932275,5.932185,5.932282,5.93308,5.934547,5.935048,5.935415,5.935765,5.935815,5.936858,5.937347,5.938643,5.93957,5.940715],"lat":[44.735616,44.735796,44.73602,44.736208,44.736365,44.736417,44.73641,44.736497,44.737378,44.737608,44.737893,44.738188,44.738433,44.738658,44.738918,44.739387,44.741625,44.741962,44.742657,44.74279,44.742898,44.743062,44.74377,44.743987,44.744232,44.74453,44.744737,44.745003,44.745667,44.745898,44.746435,44.746815,44.747272,44.74733,44.747517,44.748068,44.748778,44.749218,44.749597,44.749812,44.750048,44.750315,44.750867,44.750932,44.750988,44.751062,44.751127,44.751353,44.751575,44.753332,44.753957,44.754798,44.75512,44.755598,44.755822,44.756077,44.756328,44.756687,44.756955,44.75802,44.758138,44.758372,44.75855,44.759195,44.75932,44.759498,44.760225,44.76047,44.760835,44.76128,44.76183,44.762027,44.762045,44.762152,44.76235,44.76246,44.762647,44.763272,44.763717,44.764305,44.764535,44.764783,44.764887,44.765207,44.765412,44.765695,44.76592,44.765963,44.765932,44.765985,44.766065,44.766243,44.766387,44.766508,44.766705,44.766948,44.767515,44.76774,44.767895,44.768142,44.768365,44.768782,44.768843,44.768835,44.768937,44.769163,44.769257,44.76962,44.769793,44.769933,44.770123,44.770462,44.770788,44.771277,44.77134,44.771315,44.771228,44.771043,44.770973,44.771028,44.771188,44.771963,44.772965,44.77316,44.77328,44.773465,44.773702,44.773825,44.773983,44.774365,44.774362,44.774198,44.774252,44.774432,44.774467,44.774512,44.774672,44.775088,44.775253,44.776207,44.777338,44.777908,44.77814,44.778312,44.778505,44.778628,44.77868,44.77858,44.778478,44.7783,44.777967,44.777552,44.777358,44.776912,44.776952,44.777008,44.777157,44.777622,44.778018,44.778758,44.77972,44.781063,44.781725,44.781883,44.781998,44.782127,44.78215,44.782042,44.782128,44.782252,44.782398,44.782522,44.782598,44.782627,44.782563,44.782457,44.7823,44.781642,44.781512,44.781063,44.78094,44.780973,44.781227,44.781407,44.781885,44.781898,44.781787,44.781712,44.781588,44.78139,44.780877,44.780423,44.780263,44.780123,44.780053,44.780027,44.779868,44.779863,44.779973,44.780237,44.78046,44.780543,44.780592,44.780512,44.780267,44.780218,44.779988,44.779862,44.77955,44.779287,44.779275,44.77937,44.779522,44.779962,44.780192,44.780358,44.780543,44.780757,44.780927,44.781007,44.780978,44.780932,44.780993,44.781143,44.781225,44.78133,44.781453,44.781653,44.781892,44.78233,44.782543,44.782932,44.78315,44.783198,44.78321,44.78316,44.783293,44.783433,44.783637,44.783867,44.783905,44.783902,44.783795,44.783398,44.783165,44.782805,44.782575,44.782473,44.782417,44.782327,44.78216,44.781902,44.7811,44.780938,44.780742,44.780678,44.780717,44.780727,44.780783,44.781145,44.79076,44.790812,44.790758,44.790833,44.791168,44.791373,44.791545,44.792348,44.793062,44.793258,44.793328,44.793388,44.793523,44.793947,44.79429,44.795408,44.795598,44.795728,44.796073,44.796227,44.796453,44.796518,44.79795,44.79971,44.799782,44.80001,44.799948,44.799553,44.799285,44.799187,44.799322,44.799532,44.799738,44.799898,44.80007,44.802173,44.804155,44.809063,44.80906,44.809308,44.80942,44.811205,44.811485,44.812413,44.812887,44.81303,44.813443,44.813468,44.813323,44.813375,44.81352,44.813737,44.813768,44.813678,44.813305,44.81325,44.813323,44.813395,44.813653,44.813977,44.814555,44.814698,44.814817,44.81489,44.814838,44.814518,44.814175,44.81372,44.813743,44.813867,44.814092,44.81409,44.813998,44.813553,44.813527,44.813592,44.813657,44.813743,44.813948,44.814327,44.814623,44.814665,44.814595,44.814623,44.814687,44.815028,44.815663,44.815937,44.816035,44.81612,44.816173,44.816267,44.816475,44.816692,44.816845,44.817043,44.817663,44.817827,44.817975,44.818295,44.818302,44.818165,44.818338,44.818103,44.818068,44.818143,44.818452,44.818645,44.819067,44.819351,44.819288,44.819158,44.818613,44.81839,44.818192,44.817657,44.817015,44.816947,44.817012,44.817302,44.81782,44.817922,44.818122,44.818235,44.818285,44.81815,44.818208,44.818157,44.818283,44.818502,44.818532,44.818432,44.818453,44.818528,44.818495,44.818455,44.818573,44.818555,44.818448,44.818557,44.818683,44.818867,44.819062,44.819217,44.819327,44.81937,44.819463,44.819537,44.819582,44.819732,44.819687,44.819545,44.819312,44.819283,44.818918,44.818875,44.81897,44.818925,44.819117]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"red","weight":5,"opacity":0.5,"fill":false,"fillColor":"red","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[[44.735616,44.819117],[5.894486,5.940715],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["SS1 stage start","SS1 stage end"],{"interactive":false,"permanent":true,"direction":"bottom","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"style":{"color":"black","font-family":"serif","font-style":"italic","box-shadow":"3px 3px rgba(0,0,0,0.25)","font-size":"12px","border-color":"rgba(0,0,0,0.5)"},"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[44.735616,44.819117],[5.894486,5.940715],10,null,null,{"interactive":true,"className":"","stroke":false,"color":["#006400","#8B0000"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#006400","#8B0000"],"fillOpacity":0.5},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[44.735616,44.819732],"lng":[5.883753,5.940715]}},"evals":[],"jsHooks":[]}</script>
<p>As well as using default markers, we can define custom markers:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="working-with-route-data.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># https://fontawesome.com/v4.7.0/icons/ </span></span>
<span id="cb66-2"><a href="working-with-route-data.html#cb66-2" aria-hidden="true" tabindex="-1"></a>start_stop_markers <span class="ot">&lt;-</span> <span class="fu">awesomeIconList</span>(</span>
<span id="cb66-3"><a href="working-with-route-data.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;start&quot;</span> <span class="ot">=</span> <span class="fu">makeAwesomeIcon</span>(</span>
<span id="cb66-4"><a href="working-with-route-data.html#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">icon =</span> <span class="st">&quot;play-circle&quot;</span>,</span>
<span id="cb66-5"><a href="working-with-route-data.html#cb66-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">markerColor =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb66-6"><a href="working-with-route-data.html#cb66-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">library =</span> <span class="st">&quot;fa&quot;</span></span>
<span id="cb66-7"><a href="working-with-route-data.html#cb66-7" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb66-8"><a href="working-with-route-data.html#cb66-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;stop&quot;</span> <span class="ot">=</span> <span class="fu">makeAwesomeIcon</span>(</span>
<span id="cb66-9"><a href="working-with-route-data.html#cb66-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">icon =</span> <span class="st">&quot;stop-circle&quot;</span>,</span>
<span id="cb66-10"><a href="working-with-route-data.html#cb66-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">markerColor =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb66-11"><a href="working-with-route-data.html#cb66-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">library =</span> <span class="st">&quot;fa&quot;</span></span>
<span id="cb66-12"><a href="working-with-route-data.html#cb66-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb66-13"><a href="working-with-route-data.html#cb66-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>We can add the markers directly to our earlier created leaflet map object:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="working-with-route-data.html#cb67-1" aria-hidden="true" tabindex="-1"></a>m <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="working-with-route-data.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addAwesomeMarkers</span>(<span class="sc">~</span>X, <span class="sc">~</span>Y,</span>
<span id="cb67-3"><a href="working-with-route-data.html#cb67-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">icon =</span> <span class="sc">~</span> start_stop_markers[typ],</span>
<span id="cb67-4"><a href="working-with-route-data.html#cb67-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">label =</span> <span class="sc">~</span> label,</span>
<span id="cb67-5"><a href="working-with-route-data.html#cb67-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">data=</span>first_and_last)</span></code></pre></div>
<div id="htmlwidget-01155c617a2d80fbd943" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-01155c617a2d80fbd943">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenTopoMap",null,"OSM",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolylines","args":[[[[{"lng":[5.894486,5.894618,5.894778,5.894805,5.894672,5.894407,5.893912,5.893578,5.89172,5.891433,5.891298,5.891362,5.891597,5.891862,5.892002,5.892008,5.891335,5.891103,5.890532,5.890608,5.890752,5.890765,5.890347,5.890073,5.889517,5.888297,5.888073,5.887965,5.887875,5.887657,5.88689,5.88652,5.886002,5.885592,5.885238,5.885072,5.88518,5.885023,5.884815,5.884872,5.885,5.884995,5.884855,5.884797,5.884568,5.883923,5.883837,5.883753,5.883783,5.88435,5.884825,5.885332,5.8858,5.886523,5.886617,5.886647,5.886798,5.887068,5.88712,5.887133,5.88729,5.887937,5.888073,5.888083,5.888248,5.888592,5.88934,5.889938,5.890837,5.891675,5.892485,5.893257,5.89399,5.89436,5.894845,5.895225,5.895593,5.896387,5.897093,5.897828,5.898207,5.898468,5.898717,5.900633,5.901327,5.901892,5.902313,5.90256,5.903095,5.903202,5.903262,5.90323,5.90317,5.903258,5.90362,5.903788,5.904052,5.904285,5.904627,5.905452,5.906387,5.907607,5.907985,5.908453,5.908712,5.909033,5.909068,5.908958,5.909072,5.909323,5.90987,5.910563,5.911877,5.912927,5.913292,5.91384,5.914295,5.9149,5.915582,5.915852,5.916025,5.916333,5.916562,5.91679,5.917125,5.9179,5.9184,5.918885,5.919097,5.919548,5.919783,5.920475,5.920688,5.92087,5.920875,5.920827,5.920995,5.921395,5.921412,5.920982,5.921027,5.921287,5.92148,5.921745,5.922175,5.922148,5.921965,5.9214,5.92114,5.92095,5.920675,5.9202,5.919993,5.919103,5.918942,5.918908,5.91899,5.919562,5.919752,5.92002,5.921048,5.92208,5.922703,5.922657,5.922437,5.92197,5.921622,5.920627,5.920498,5.920517,5.920718,5.920915,5.920888,5.920757,5.920453,5.920268,5.920187,5.92016,5.920012,5.918987,5.91837,5.918117,5.917647,5.91742,5.917013,5.916813,5.916697,5.91671,5.916878,5.917182,5.917687,5.918422,5.91845,5.918353,5.918148,5.917752,5.917443,5.91733,5.91714,5.916813,5.91629,5.915897,5.914883,5.914543,5.914068,5.913522,5.913033,5.912768,5.912445,5.912283,5.912147,5.912072,5.912133,5.912568,5.912832,5.912825,5.912773,5.91281,5.912988,5.913285,5.913622,5.913927,5.914192,5.914358,5.91436,5.914188,5.913967,5.913828,5.913823,5.913948,5.91417,5.914197,5.914305,5.91427,5.914095,5.91375,5.913197,5.913027,5.913002,5.913017,5.912968,5.912898,5.912798,5.912717,5.912788,5.913113,5.912883,5.912682,5.912222,5.911108,5.910588,5.910152,5.90938,5.90938,5.909433,5.909318,5.908048,5.908023,5.908007,5.908057,5.909883,5.909967,5.91064,5.910868,5.911248,5.91177,5.911905,5.912322,5.912872,5.912878,5.912767,5.912632,5.912555,5.912577,5.912693,5.91328,5.913268,5.913135,5.912285,5.91167,5.910647,5.910585,5.910753,5.91095,5.910808,5.908725,5.908577,5.908197,5.90758,5.907173,5.90739,5.907838,5.907972,5.90799,5.907885,5.905927,5.905868,5.905638,5.905362,5.900993,5.901082,5.903422,5.9037,5.90425,5.904528,5.904733,5.90656,5.90689,5.908113,5.90843,5.908685,5.908988,5.909205,5.909415,5.909985,5.910178,5.910315,5.910322,5.910107,5.909825,5.90947,5.909243,5.90924,5.909368,5.909533,5.909942,5.9103,5.91113,5.911322,5.91144,5.911567,5.911702,5.911883,5.912622,5.912777,5.912923,5.912922,5.912788,5.912355,5.911995,5.911683,5.911475,5.911032,5.910925,5.910842,5.910702,5.910555,5.910327,5.910068,5.909375,5.907205,5.907203,5.907607,5.907998,5.90805,5.907942,5.907455,5.907487,5.907668,5.908275,5.908487,5.910033,5.911102,5.91225,5.91285,5.913228,5.91413,5.914372,5.914657,5.915142,5.915562,5.915683,5.915785,5.915827,5.91597,5.916547,5.917078,5.917288,5.917522,5.917802,5.918248,5.918513,5.919397,5.920775,5.921145,5.922952,5.924433,5.926068,5.926332,5.926693,5.927,5.927723,5.928357,5.929227,5.930022,5.93052,5.931418,5.931788,5.932423,5.933035,5.933205,5.933252,5.93317,5.93295,5.932512,5.932275,5.932185,5.932282,5.93308,5.934547,5.935048,5.935415,5.935765,5.935815,5.936858,5.937347,5.938643,5.93957,5.940715],"lat":[44.735616,44.735796,44.73602,44.736208,44.736365,44.736417,44.73641,44.736497,44.737378,44.737608,44.737893,44.738188,44.738433,44.738658,44.738918,44.739387,44.741625,44.741962,44.742657,44.74279,44.742898,44.743062,44.74377,44.743987,44.744232,44.74453,44.744737,44.745003,44.745667,44.745898,44.746435,44.746815,44.747272,44.74733,44.747517,44.748068,44.748778,44.749218,44.749597,44.749812,44.750048,44.750315,44.750867,44.750932,44.750988,44.751062,44.751127,44.751353,44.751575,44.753332,44.753957,44.754798,44.75512,44.755598,44.755822,44.756077,44.756328,44.756687,44.756955,44.75802,44.758138,44.758372,44.75855,44.759195,44.75932,44.759498,44.760225,44.76047,44.760835,44.76128,44.76183,44.762027,44.762045,44.762152,44.76235,44.76246,44.762647,44.763272,44.763717,44.764305,44.764535,44.764783,44.764887,44.765207,44.765412,44.765695,44.76592,44.765963,44.765932,44.765985,44.766065,44.766243,44.766387,44.766508,44.766705,44.766948,44.767515,44.76774,44.767895,44.768142,44.768365,44.768782,44.768843,44.768835,44.768937,44.769163,44.769257,44.76962,44.769793,44.769933,44.770123,44.770462,44.770788,44.771277,44.77134,44.771315,44.771228,44.771043,44.770973,44.771028,44.771188,44.771963,44.772965,44.77316,44.77328,44.773465,44.773702,44.773825,44.773983,44.774365,44.774362,44.774198,44.774252,44.774432,44.774467,44.774512,44.774672,44.775088,44.775253,44.776207,44.777338,44.777908,44.77814,44.778312,44.778505,44.778628,44.77868,44.77858,44.778478,44.7783,44.777967,44.777552,44.777358,44.776912,44.776952,44.777008,44.777157,44.777622,44.778018,44.778758,44.77972,44.781063,44.781725,44.781883,44.781998,44.782127,44.78215,44.782042,44.782128,44.782252,44.782398,44.782522,44.782598,44.782627,44.782563,44.782457,44.7823,44.781642,44.781512,44.781063,44.78094,44.780973,44.781227,44.781407,44.781885,44.781898,44.781787,44.781712,44.781588,44.78139,44.780877,44.780423,44.780263,44.780123,44.780053,44.780027,44.779868,44.779863,44.779973,44.780237,44.78046,44.780543,44.780592,44.780512,44.780267,44.780218,44.779988,44.779862,44.77955,44.779287,44.779275,44.77937,44.779522,44.779962,44.780192,44.780358,44.780543,44.780757,44.780927,44.781007,44.780978,44.780932,44.780993,44.781143,44.781225,44.78133,44.781453,44.781653,44.781892,44.78233,44.782543,44.782932,44.78315,44.783198,44.78321,44.78316,44.783293,44.783433,44.783637,44.783867,44.783905,44.783902,44.783795,44.783398,44.783165,44.782805,44.782575,44.782473,44.782417,44.782327,44.78216,44.781902,44.7811,44.780938,44.780742,44.780678,44.780717,44.780727,44.780783,44.781145,44.79076,44.790812,44.790758,44.790833,44.791168,44.791373,44.791545,44.792348,44.793062,44.793258,44.793328,44.793388,44.793523,44.793947,44.79429,44.795408,44.795598,44.795728,44.796073,44.796227,44.796453,44.796518,44.79795,44.79971,44.799782,44.80001,44.799948,44.799553,44.799285,44.799187,44.799322,44.799532,44.799738,44.799898,44.80007,44.802173,44.804155,44.809063,44.80906,44.809308,44.80942,44.811205,44.811485,44.812413,44.812887,44.81303,44.813443,44.813468,44.813323,44.813375,44.81352,44.813737,44.813768,44.813678,44.813305,44.81325,44.813323,44.813395,44.813653,44.813977,44.814555,44.814698,44.814817,44.81489,44.814838,44.814518,44.814175,44.81372,44.813743,44.813867,44.814092,44.81409,44.813998,44.813553,44.813527,44.813592,44.813657,44.813743,44.813948,44.814327,44.814623,44.814665,44.814595,44.814623,44.814687,44.815028,44.815663,44.815937,44.816035,44.81612,44.816173,44.816267,44.816475,44.816692,44.816845,44.817043,44.817663,44.817827,44.817975,44.818295,44.818302,44.818165,44.818338,44.818103,44.818068,44.818143,44.818452,44.818645,44.819067,44.819351,44.819288,44.819158,44.818613,44.81839,44.818192,44.817657,44.817015,44.816947,44.817012,44.817302,44.81782,44.817922,44.818122,44.818235,44.818285,44.81815,44.818208,44.818157,44.818283,44.818502,44.818532,44.818432,44.818453,44.818528,44.818495,44.818455,44.818573,44.818555,44.818448,44.818557,44.818683,44.818867,44.819062,44.819217,44.819327,44.81937,44.819463,44.819537,44.819582,44.819732,44.819687,44.819545,44.819312,44.819283,44.818918,44.818875,44.81897,44.818925,44.819117]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"red","weight":5,"opacity":0.5,"fill":false,"fillColor":"red","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addAwesomeMarkers","args":[[44.735616,44.819117],[5.894486,5.940715],{"icon":["play-circle","stop-circle"],"markerColor":["blue","red"],"iconColor":"white","spin":false,"squareMarker":false,"iconRotate":0,"prefix":"fa"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["SS1 stage start","SS1 stage end"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[44.735616,44.819732],"lng":[5.883753,5.940715]}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="working-with-route-data.html#cb68-1" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<div id="htmlwidget-b07f820ffe7e1599102e" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-b07f820ffe7e1599102e">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenTopoMap",null,"OSM",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolylines","args":[[[[{"lng":[5.894486,5.894618,5.894778,5.894805,5.894672,5.894407,5.893912,5.893578,5.89172,5.891433,5.891298,5.891362,5.891597,5.891862,5.892002,5.892008,5.891335,5.891103,5.890532,5.890608,5.890752,5.890765,5.890347,5.890073,5.889517,5.888297,5.888073,5.887965,5.887875,5.887657,5.88689,5.88652,5.886002,5.885592,5.885238,5.885072,5.88518,5.885023,5.884815,5.884872,5.885,5.884995,5.884855,5.884797,5.884568,5.883923,5.883837,5.883753,5.883783,5.88435,5.884825,5.885332,5.8858,5.886523,5.886617,5.886647,5.886798,5.887068,5.88712,5.887133,5.88729,5.887937,5.888073,5.888083,5.888248,5.888592,5.88934,5.889938,5.890837,5.891675,5.892485,5.893257,5.89399,5.89436,5.894845,5.895225,5.895593,5.896387,5.897093,5.897828,5.898207,5.898468,5.898717,5.900633,5.901327,5.901892,5.902313,5.90256,5.903095,5.903202,5.903262,5.90323,5.90317,5.903258,5.90362,5.903788,5.904052,5.904285,5.904627,5.905452,5.906387,5.907607,5.907985,5.908453,5.908712,5.909033,5.909068,5.908958,5.909072,5.909323,5.90987,5.910563,5.911877,5.912927,5.913292,5.91384,5.914295,5.9149,5.915582,5.915852,5.916025,5.916333,5.916562,5.91679,5.917125,5.9179,5.9184,5.918885,5.919097,5.919548,5.919783,5.920475,5.920688,5.92087,5.920875,5.920827,5.920995,5.921395,5.921412,5.920982,5.921027,5.921287,5.92148,5.921745,5.922175,5.922148,5.921965,5.9214,5.92114,5.92095,5.920675,5.9202,5.919993,5.919103,5.918942,5.918908,5.91899,5.919562,5.919752,5.92002,5.921048,5.92208,5.922703,5.922657,5.922437,5.92197,5.921622,5.920627,5.920498,5.920517,5.920718,5.920915,5.920888,5.920757,5.920453,5.920268,5.920187,5.92016,5.920012,5.918987,5.91837,5.918117,5.917647,5.91742,5.917013,5.916813,5.916697,5.91671,5.916878,5.917182,5.917687,5.918422,5.91845,5.918353,5.918148,5.917752,5.917443,5.91733,5.91714,5.916813,5.91629,5.915897,5.914883,5.914543,5.914068,5.913522,5.913033,5.912768,5.912445,5.912283,5.912147,5.912072,5.912133,5.912568,5.912832,5.912825,5.912773,5.91281,5.912988,5.913285,5.913622,5.913927,5.914192,5.914358,5.91436,5.914188,5.913967,5.913828,5.913823,5.913948,5.91417,5.914197,5.914305,5.91427,5.914095,5.91375,5.913197,5.913027,5.913002,5.913017,5.912968,5.912898,5.912798,5.912717,5.912788,5.913113,5.912883,5.912682,5.912222,5.911108,5.910588,5.910152,5.90938,5.90938,5.909433,5.909318,5.908048,5.908023,5.908007,5.908057,5.909883,5.909967,5.91064,5.910868,5.911248,5.91177,5.911905,5.912322,5.912872,5.912878,5.912767,5.912632,5.912555,5.912577,5.912693,5.91328,5.913268,5.913135,5.912285,5.91167,5.910647,5.910585,5.910753,5.91095,5.910808,5.908725,5.908577,5.908197,5.90758,5.907173,5.90739,5.907838,5.907972,5.90799,5.907885,5.905927,5.905868,5.905638,5.905362,5.900993,5.901082,5.903422,5.9037,5.90425,5.904528,5.904733,5.90656,5.90689,5.908113,5.90843,5.908685,5.908988,5.909205,5.909415,5.909985,5.910178,5.910315,5.910322,5.910107,5.909825,5.90947,5.909243,5.90924,5.909368,5.909533,5.909942,5.9103,5.91113,5.911322,5.91144,5.911567,5.911702,5.911883,5.912622,5.912777,5.912923,5.912922,5.912788,5.912355,5.911995,5.911683,5.911475,5.911032,5.910925,5.910842,5.910702,5.910555,5.910327,5.910068,5.909375,5.907205,5.907203,5.907607,5.907998,5.90805,5.907942,5.907455,5.907487,5.907668,5.908275,5.908487,5.910033,5.911102,5.91225,5.91285,5.913228,5.91413,5.914372,5.914657,5.915142,5.915562,5.915683,5.915785,5.915827,5.91597,5.916547,5.917078,5.917288,5.917522,5.917802,5.918248,5.918513,5.919397,5.920775,5.921145,5.922952,5.924433,5.926068,5.926332,5.926693,5.927,5.927723,5.928357,5.929227,5.930022,5.93052,5.931418,5.931788,5.932423,5.933035,5.933205,5.933252,5.93317,5.93295,5.932512,5.932275,5.932185,5.932282,5.93308,5.934547,5.935048,5.935415,5.935765,5.935815,5.936858,5.937347,5.938643,5.93957,5.940715],"lat":[44.735616,44.735796,44.73602,44.736208,44.736365,44.736417,44.73641,44.736497,44.737378,44.737608,44.737893,44.738188,44.738433,44.738658,44.738918,44.739387,44.741625,44.741962,44.742657,44.74279,44.742898,44.743062,44.74377,44.743987,44.744232,44.74453,44.744737,44.745003,44.745667,44.745898,44.746435,44.746815,44.747272,44.74733,44.747517,44.748068,44.748778,44.749218,44.749597,44.749812,44.750048,44.750315,44.750867,44.750932,44.750988,44.751062,44.751127,44.751353,44.751575,44.753332,44.753957,44.754798,44.75512,44.755598,44.755822,44.756077,44.756328,44.756687,44.756955,44.75802,44.758138,44.758372,44.75855,44.759195,44.75932,44.759498,44.760225,44.76047,44.760835,44.76128,44.76183,44.762027,44.762045,44.762152,44.76235,44.76246,44.762647,44.763272,44.763717,44.764305,44.764535,44.764783,44.764887,44.765207,44.765412,44.765695,44.76592,44.765963,44.765932,44.765985,44.766065,44.766243,44.766387,44.766508,44.766705,44.766948,44.767515,44.76774,44.767895,44.768142,44.768365,44.768782,44.768843,44.768835,44.768937,44.769163,44.769257,44.76962,44.769793,44.769933,44.770123,44.770462,44.770788,44.771277,44.77134,44.771315,44.771228,44.771043,44.770973,44.771028,44.771188,44.771963,44.772965,44.77316,44.77328,44.773465,44.773702,44.773825,44.773983,44.774365,44.774362,44.774198,44.774252,44.774432,44.774467,44.774512,44.774672,44.775088,44.775253,44.776207,44.777338,44.777908,44.77814,44.778312,44.778505,44.778628,44.77868,44.77858,44.778478,44.7783,44.777967,44.777552,44.777358,44.776912,44.776952,44.777008,44.777157,44.777622,44.778018,44.778758,44.77972,44.781063,44.781725,44.781883,44.781998,44.782127,44.78215,44.782042,44.782128,44.782252,44.782398,44.782522,44.782598,44.782627,44.782563,44.782457,44.7823,44.781642,44.781512,44.781063,44.78094,44.780973,44.781227,44.781407,44.781885,44.781898,44.781787,44.781712,44.781588,44.78139,44.780877,44.780423,44.780263,44.780123,44.780053,44.780027,44.779868,44.779863,44.779973,44.780237,44.78046,44.780543,44.780592,44.780512,44.780267,44.780218,44.779988,44.779862,44.77955,44.779287,44.779275,44.77937,44.779522,44.779962,44.780192,44.780358,44.780543,44.780757,44.780927,44.781007,44.780978,44.780932,44.780993,44.781143,44.781225,44.78133,44.781453,44.781653,44.781892,44.78233,44.782543,44.782932,44.78315,44.783198,44.78321,44.78316,44.783293,44.783433,44.783637,44.783867,44.783905,44.783902,44.783795,44.783398,44.783165,44.782805,44.782575,44.782473,44.782417,44.782327,44.78216,44.781902,44.7811,44.780938,44.780742,44.780678,44.780717,44.780727,44.780783,44.781145,44.79076,44.790812,44.790758,44.790833,44.791168,44.791373,44.791545,44.792348,44.793062,44.793258,44.793328,44.793388,44.793523,44.793947,44.79429,44.795408,44.795598,44.795728,44.796073,44.796227,44.796453,44.796518,44.79795,44.79971,44.799782,44.80001,44.799948,44.799553,44.799285,44.799187,44.799322,44.799532,44.799738,44.799898,44.80007,44.802173,44.804155,44.809063,44.80906,44.809308,44.80942,44.811205,44.811485,44.812413,44.812887,44.81303,44.813443,44.813468,44.813323,44.813375,44.81352,44.813737,44.813768,44.813678,44.813305,44.81325,44.813323,44.813395,44.813653,44.813977,44.814555,44.814698,44.814817,44.81489,44.814838,44.814518,44.814175,44.81372,44.813743,44.813867,44.814092,44.81409,44.813998,44.813553,44.813527,44.813592,44.813657,44.813743,44.813948,44.814327,44.814623,44.814665,44.814595,44.814623,44.814687,44.815028,44.815663,44.815937,44.816035,44.81612,44.816173,44.816267,44.816475,44.816692,44.816845,44.817043,44.817663,44.817827,44.817975,44.818295,44.818302,44.818165,44.818338,44.818103,44.818068,44.818143,44.818452,44.818645,44.819067,44.819351,44.819288,44.819158,44.818613,44.81839,44.818192,44.817657,44.817015,44.816947,44.817012,44.817302,44.81782,44.817922,44.818122,44.818235,44.818285,44.81815,44.818208,44.818157,44.818283,44.818502,44.818532,44.818432,44.818453,44.818528,44.818495,44.818455,44.818573,44.818555,44.818448,44.818557,44.818683,44.818867,44.819062,44.819217,44.819327,44.81937,44.819463,44.819537,44.819582,44.819732,44.819687,44.819545,44.819312,44.819283,44.818918,44.818875,44.81897,44.818925,44.819117]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"red","weight":5,"opacity":0.5,"fill":false,"fillColor":"red","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[44.735616,44.819732],"lng":[5.883753,5.940715]}},"evals":[],"jsHooks":[]}</script>
<p>We can save a map to an image file using the <code>mapview</code> package:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="working-with-route-data.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapview)</span>
<span id="cb69-2"><a href="working-with-route-data.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="co"># mapview also provides tools for generating leaflet maps from R</span></span>
<span id="cb69-3"><a href="working-with-route-data.html#cb69-3" aria-hidden="true" tabindex="-1"></a>image_fn <span class="ot">=</span> <span class="st">&quot;demomap.png&quot;</span></span>
<span id="cb69-4"><a href="working-with-route-data.html#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="working-with-route-data.html#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mapshot</span>(m, <span class="at">file =</span> image_fn)</span></code></pre></div>
<p>We can then review the saved image captured from the map:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="working-with-route-data.html#cb70-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(image_fn)</span></code></pre></div>
<p><img src="demomap.png" width="496" /></p>
</div>
<div id="creating-buffer-regions-around-features" class="section level2" number="4.8">
<h2><span class="header-section-number">4.8</span> Creating Buffer regions around features</h2>
<p>One thing we note from the map is that the display is cropped quite close to the extent of the displayed stage. It would be useful to provide a small buffer around the stage to provide a margin that allows us to see the start and stop clearly.</p>
<p>We can get the bounds of the stage quite simply:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="working-with-route-data.html#cb71-1" aria-hidden="true" tabindex="-1"></a>stage_bbox <span class="ot">=</span> <span class="fu">st_bbox</span>(stages_kml[<span class="dv">1</span>])</span>
<span id="cb71-2"><a href="working-with-route-data.html#cb71-2" aria-hidden="true" tabindex="-1"></a>stage_bbox</span></code></pre></div>
<pre><code>##      xmin      ymin      xmax      ymax 
##  5.883753 44.735616  5.940715 44.819732</code></pre>
<p>A convenient way of representing the bounding box is to use the <em>extent()</em> function from the <code>raster</code> package to create an <code>Extent</code> class object:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="working-with-route-data.html#cb73-1" aria-hidden="true" tabindex="-1"></a>raster<span class="sc">::</span><span class="fu">extent</span>(stage_bbox)</span></code></pre></div>
<pre><code>## class      : Extent 
## xmin       : 5.883753 
## xmax       : 5.940715 
## ymin       : 44.73562 
## ymax       : 44.81973</code></pre>
<p>In some functions, we may be able to pass an <em>extent</em> object in directly as a function argument.</p>
<p>We can also create a dataframe containing those limits:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="working-with-route-data.html#cb75-1" aria-hidden="true" tabindex="-1"></a>ex.df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span> <span class="fu">c</span>(stage_bbox[[<span class="st">&#39;xmin&#39;</span>]], stage_bbox[[<span class="st">&#39;xmax&#39;</span>]]), </span>
<span id="cb75-2"><a href="working-with-route-data.html#cb75-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y=</span> <span class="fu">c</span>(stage_bbox[[<span class="st">&#39;ymin&#39;</span>]], stage_bbox[[<span class="st">&#39;ymax&#39;</span>]]))</span>
<span id="cb75-3"><a href="working-with-route-data.html#cb75-3" aria-hidden="true" tabindex="-1"></a>ex.df</span></code></pre></div>
<pre><code>##          x        y
## 1 5.883753 44.73562
## 2 5.940715 44.81973</code></pre>
<p>The contents of the dataframe representation can be cast as a spatial points object containing two features, whose extent matches the original extent:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="working-with-route-data.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For SpatialPoints</span></span>
<span id="cb77-2"><a href="working-with-route-data.html#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sp)</span>
<span id="cb77-3"><a href="working-with-route-data.html#cb77-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-4"><a href="working-with-route-data.html#cb77-4" aria-hidden="true" tabindex="-1"></a>bb_sp <span class="ot">=</span> <span class="fu">SpatialPoints</span>(ex.df)</span>
<span id="cb77-5"><a href="working-with-route-data.html#cb77-5" aria-hidden="true" tabindex="-1"></a>bb_sp</span></code></pre></div>
<pre><code>## class       : SpatialPoints 
## features    : 2 
## extent      : 5.883753, 5.940715, 44.73562, 44.81973  (xmin, xmax, ymin, ymax)
## crs         : NA</code></pre>
<p>This is useful because we can create a “buffer” region around those points that will “push out” the extent and give us some co-ordinates that represent a buffered area around the original path.</p>
<p>Let’s add a buffer around the trace of five hundred meters:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="working-with-route-data.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spatialEco)</span>
<span id="cb79-2"><a href="working-with-route-data.html#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="working-with-route-data.html#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="co">#In passing, recall that WGS84 (latlon) is st_crs(4326) </span></span>
<span id="cb79-4"><a href="working-with-route-data.html#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="fu">proj4string</span>(bb_sp) <span class="ot">&lt;-</span> <span class="st">&#39;+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs&#39;</span> </span>
<span id="cb79-5"><a href="working-with-route-data.html#cb79-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-6"><a href="working-with-route-data.html#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new, buffered region</span></span>
<span id="cb79-7"><a href="working-with-route-data.html#cb79-7" aria-hidden="true" tabindex="-1"></a>stage_bbox <span class="ot">=</span> <span class="fu">st_bbox</span>(<span class="fu">geo.buffer</span>(<span class="at">x=</span>bb_sp, <span class="at">r=</span><span class="dv">500</span>))</span>
<span id="cb79-8"><a href="working-with-route-data.html#cb79-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-9"><a href="working-with-route-data.html#cb79-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Also update the dataframe of points with these bounds</span></span>
<span id="cb79-10"><a href="working-with-route-data.html#cb79-10" aria-hidden="true" tabindex="-1"></a>ex.df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span> <span class="fu">c</span>(stage_bbox[[<span class="st">&#39;xmin&#39;</span>]], stage_bbox[[<span class="st">&#39;xmax&#39;</span>]]), </span>
<span id="cb79-11"><a href="working-with-route-data.html#cb79-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y=</span> <span class="fu">c</span>(stage_bbox[[<span class="st">&#39;ymin&#39;</span>]], stage_bbox[[<span class="st">&#39;ymax&#39;</span>]]))</span>
<span id="cb79-12"><a href="working-with-route-data.html#cb79-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-13"><a href="working-with-route-data.html#cb79-13" aria-hidden="true" tabindex="-1"></a>stage_bbox</span></code></pre></div>
<pre><code>##      xmin      ymin      xmax      ymax 
##  5.877441 44.731117  5.947037 44.824231</code></pre>
<p>We can pass these new bounds into the leaflet widget to try to encourage it to show a little more of the map, although noting that it doesn’t always force the issue if the buffer isn’t big enough…</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="working-with-route-data.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>(stages_kml[<span class="dv">1</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb81-2"><a href="working-with-route-data.html#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fitBounds</span>(stage_bbox[[<span class="st">&#39;xmin&#39;</span>]], stage_bbox[[<span class="st">&#39;ymin&#39;</span>]],</span>
<span id="cb81-3"><a href="working-with-route-data.html#cb81-3" aria-hidden="true" tabindex="-1"></a>            stage_bbox[[<span class="st">&#39;xmax&#39;</span>]], stage_bbox[[<span class="st">&#39;ymax&#39;</span>]])  <span class="sc">%&gt;%</span> </span>
<span id="cb81-4"><a href="working-with-route-data.html#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#fitBounds(5.879966, 44.732916,</span></span>
<span id="cb81-5"><a href="working-with-route-data.html#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#          5.944508, 44.822432)  %&gt;% </span></span>
<span id="cb81-6"><a href="working-with-route-data.html#cb81-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(<span class="st">&quot;OpenTopoMap&quot;</span>, <span class="at">group =</span> <span class="st">&quot;OSM&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb81-7"><a href="working-with-route-data.html#cb81-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolylines</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">weight =</span> <span class="dv">5</span>)</span></code></pre></div>
<div id="htmlwidget-5e4bd210548459c91a2c" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-5e4bd210548459c91a2c">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"fitBounds":[44.7311166258799,5.87744055378197,44.824231304012,5.94703661742219,[]],"calls":[{"method":"addProviderTiles","args":["OpenTopoMap",null,"OSM",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolylines","args":[[[[{"lng":[5.894486,5.894618,5.894778,5.894805,5.894672,5.894407,5.893912,5.893578,5.89172,5.891433,5.891298,5.891362,5.891597,5.891862,5.892002,5.892008,5.891335,5.891103,5.890532,5.890608,5.890752,5.890765,5.890347,5.890073,5.889517,5.888297,5.888073,5.887965,5.887875,5.887657,5.88689,5.88652,5.886002,5.885592,5.885238,5.885072,5.88518,5.885023,5.884815,5.884872,5.885,5.884995,5.884855,5.884797,5.884568,5.883923,5.883837,5.883753,5.883783,5.88435,5.884825,5.885332,5.8858,5.886523,5.886617,5.886647,5.886798,5.887068,5.88712,5.887133,5.88729,5.887937,5.888073,5.888083,5.888248,5.888592,5.88934,5.889938,5.890837,5.891675,5.892485,5.893257,5.89399,5.89436,5.894845,5.895225,5.895593,5.896387,5.897093,5.897828,5.898207,5.898468,5.898717,5.900633,5.901327,5.901892,5.902313,5.90256,5.903095,5.903202,5.903262,5.90323,5.90317,5.903258,5.90362,5.903788,5.904052,5.904285,5.904627,5.905452,5.906387,5.907607,5.907985,5.908453,5.908712,5.909033,5.909068,5.908958,5.909072,5.909323,5.90987,5.910563,5.911877,5.912927,5.913292,5.91384,5.914295,5.9149,5.915582,5.915852,5.916025,5.916333,5.916562,5.91679,5.917125,5.9179,5.9184,5.918885,5.919097,5.919548,5.919783,5.920475,5.920688,5.92087,5.920875,5.920827,5.920995,5.921395,5.921412,5.920982,5.921027,5.921287,5.92148,5.921745,5.922175,5.922148,5.921965,5.9214,5.92114,5.92095,5.920675,5.9202,5.919993,5.919103,5.918942,5.918908,5.91899,5.919562,5.919752,5.92002,5.921048,5.92208,5.922703,5.922657,5.922437,5.92197,5.921622,5.920627,5.920498,5.920517,5.920718,5.920915,5.920888,5.920757,5.920453,5.920268,5.920187,5.92016,5.920012,5.918987,5.91837,5.918117,5.917647,5.91742,5.917013,5.916813,5.916697,5.91671,5.916878,5.917182,5.917687,5.918422,5.91845,5.918353,5.918148,5.917752,5.917443,5.91733,5.91714,5.916813,5.91629,5.915897,5.914883,5.914543,5.914068,5.913522,5.913033,5.912768,5.912445,5.912283,5.912147,5.912072,5.912133,5.912568,5.912832,5.912825,5.912773,5.91281,5.912988,5.913285,5.913622,5.913927,5.914192,5.914358,5.91436,5.914188,5.913967,5.913828,5.913823,5.913948,5.91417,5.914197,5.914305,5.91427,5.914095,5.91375,5.913197,5.913027,5.913002,5.913017,5.912968,5.912898,5.912798,5.912717,5.912788,5.913113,5.912883,5.912682,5.912222,5.911108,5.910588,5.910152,5.90938,5.90938,5.909433,5.909318,5.908048,5.908023,5.908007,5.908057,5.909883,5.909967,5.91064,5.910868,5.911248,5.91177,5.911905,5.912322,5.912872,5.912878,5.912767,5.912632,5.912555,5.912577,5.912693,5.91328,5.913268,5.913135,5.912285,5.91167,5.910647,5.910585,5.910753,5.91095,5.910808,5.908725,5.908577,5.908197,5.90758,5.907173,5.90739,5.907838,5.907972,5.90799,5.907885,5.905927,5.905868,5.905638,5.905362,5.900993,5.901082,5.903422,5.9037,5.90425,5.904528,5.904733,5.90656,5.90689,5.908113,5.90843,5.908685,5.908988,5.909205,5.909415,5.909985,5.910178,5.910315,5.910322,5.910107,5.909825,5.90947,5.909243,5.90924,5.909368,5.909533,5.909942,5.9103,5.91113,5.911322,5.91144,5.911567,5.911702,5.911883,5.912622,5.912777,5.912923,5.912922,5.912788,5.912355,5.911995,5.911683,5.911475,5.911032,5.910925,5.910842,5.910702,5.910555,5.910327,5.910068,5.909375,5.907205,5.907203,5.907607,5.907998,5.90805,5.907942,5.907455,5.907487,5.907668,5.908275,5.908487,5.910033,5.911102,5.91225,5.91285,5.913228,5.91413,5.914372,5.914657,5.915142,5.915562,5.915683,5.915785,5.915827,5.91597,5.916547,5.917078,5.917288,5.917522,5.917802,5.918248,5.918513,5.919397,5.920775,5.921145,5.922952,5.924433,5.926068,5.926332,5.926693,5.927,5.927723,5.928357,5.929227,5.930022,5.93052,5.931418,5.931788,5.932423,5.933035,5.933205,5.933252,5.93317,5.93295,5.932512,5.932275,5.932185,5.932282,5.93308,5.934547,5.935048,5.935415,5.935765,5.935815,5.936858,5.937347,5.938643,5.93957,5.940715],"lat":[44.735616,44.735796,44.73602,44.736208,44.736365,44.736417,44.73641,44.736497,44.737378,44.737608,44.737893,44.738188,44.738433,44.738658,44.738918,44.739387,44.741625,44.741962,44.742657,44.74279,44.742898,44.743062,44.74377,44.743987,44.744232,44.74453,44.744737,44.745003,44.745667,44.745898,44.746435,44.746815,44.747272,44.74733,44.747517,44.748068,44.748778,44.749218,44.749597,44.749812,44.750048,44.750315,44.750867,44.750932,44.750988,44.751062,44.751127,44.751353,44.751575,44.753332,44.753957,44.754798,44.75512,44.755598,44.755822,44.756077,44.756328,44.756687,44.756955,44.75802,44.758138,44.758372,44.75855,44.759195,44.75932,44.759498,44.760225,44.76047,44.760835,44.76128,44.76183,44.762027,44.762045,44.762152,44.76235,44.76246,44.762647,44.763272,44.763717,44.764305,44.764535,44.764783,44.764887,44.765207,44.765412,44.765695,44.76592,44.765963,44.765932,44.765985,44.766065,44.766243,44.766387,44.766508,44.766705,44.766948,44.767515,44.76774,44.767895,44.768142,44.768365,44.768782,44.768843,44.768835,44.768937,44.769163,44.769257,44.76962,44.769793,44.769933,44.770123,44.770462,44.770788,44.771277,44.77134,44.771315,44.771228,44.771043,44.770973,44.771028,44.771188,44.771963,44.772965,44.77316,44.77328,44.773465,44.773702,44.773825,44.773983,44.774365,44.774362,44.774198,44.774252,44.774432,44.774467,44.774512,44.774672,44.775088,44.775253,44.776207,44.777338,44.777908,44.77814,44.778312,44.778505,44.778628,44.77868,44.77858,44.778478,44.7783,44.777967,44.777552,44.777358,44.776912,44.776952,44.777008,44.777157,44.777622,44.778018,44.778758,44.77972,44.781063,44.781725,44.781883,44.781998,44.782127,44.78215,44.782042,44.782128,44.782252,44.782398,44.782522,44.782598,44.782627,44.782563,44.782457,44.7823,44.781642,44.781512,44.781063,44.78094,44.780973,44.781227,44.781407,44.781885,44.781898,44.781787,44.781712,44.781588,44.78139,44.780877,44.780423,44.780263,44.780123,44.780053,44.780027,44.779868,44.779863,44.779973,44.780237,44.78046,44.780543,44.780592,44.780512,44.780267,44.780218,44.779988,44.779862,44.77955,44.779287,44.779275,44.77937,44.779522,44.779962,44.780192,44.780358,44.780543,44.780757,44.780927,44.781007,44.780978,44.780932,44.780993,44.781143,44.781225,44.78133,44.781453,44.781653,44.781892,44.78233,44.782543,44.782932,44.78315,44.783198,44.78321,44.78316,44.783293,44.783433,44.783637,44.783867,44.783905,44.783902,44.783795,44.783398,44.783165,44.782805,44.782575,44.782473,44.782417,44.782327,44.78216,44.781902,44.7811,44.780938,44.780742,44.780678,44.780717,44.780727,44.780783,44.781145,44.79076,44.790812,44.790758,44.790833,44.791168,44.791373,44.791545,44.792348,44.793062,44.793258,44.793328,44.793388,44.793523,44.793947,44.79429,44.795408,44.795598,44.795728,44.796073,44.796227,44.796453,44.796518,44.79795,44.79971,44.799782,44.80001,44.799948,44.799553,44.799285,44.799187,44.799322,44.799532,44.799738,44.799898,44.80007,44.802173,44.804155,44.809063,44.80906,44.809308,44.80942,44.811205,44.811485,44.812413,44.812887,44.81303,44.813443,44.813468,44.813323,44.813375,44.81352,44.813737,44.813768,44.813678,44.813305,44.81325,44.813323,44.813395,44.813653,44.813977,44.814555,44.814698,44.814817,44.81489,44.814838,44.814518,44.814175,44.81372,44.813743,44.813867,44.814092,44.81409,44.813998,44.813553,44.813527,44.813592,44.813657,44.813743,44.813948,44.814327,44.814623,44.814665,44.814595,44.814623,44.814687,44.815028,44.815663,44.815937,44.816035,44.81612,44.816173,44.816267,44.816475,44.816692,44.816845,44.817043,44.817663,44.817827,44.817975,44.818295,44.818302,44.818165,44.818338,44.818103,44.818068,44.818143,44.818452,44.818645,44.819067,44.819351,44.819288,44.819158,44.818613,44.81839,44.818192,44.817657,44.817015,44.816947,44.817012,44.817302,44.81782,44.817922,44.818122,44.818235,44.818285,44.81815,44.818208,44.818157,44.818283,44.818502,44.818532,44.818432,44.818453,44.818528,44.818495,44.818455,44.818573,44.818555,44.818448,44.818557,44.818683,44.818867,44.819062,44.819217,44.819327,44.81937,44.819463,44.819537,44.819582,44.819732,44.819687,44.819545,44.819312,44.819283,44.818918,44.818875,44.81897,44.818925,44.819117]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"red","weight":5,"opacity":0.5,"fill":false,"fillColor":"red","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[44.735616,44.819732],"lng":[5.883753,5.940715]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="adding-additional-features-to-leaflet-maps" class="section level2" number="4.9">
<h2><span class="header-section-number">4.9</span> Adding Additional Features to <code>leaflet</code> maps</h2>
<p>Several packages exist that allow us to add additional controls and features to interactive <em>leaflet</em> maps, including “minimap” navigational support, the ability to add logos and charts to maps, and support for arbitrary HTML and chart content within popups.</p>
<div id="add-minimap-navigation" class="section level3" number="4.9.1">
<h3><span class="header-section-number">4.9.1</span> Add “minimap” navigation</h3>
<p>To support navigation(?!), we can also add a “minimap”, with it’s own location and display settings, as well as its own tileset, to show more clearly where in the world is being displayed by the current view.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="working-with-route-data.html#cb82-1" aria-hidden="true" tabindex="-1"></a>m <span class="sc">%&gt;%</span></span>
<span id="cb82-2"><a href="working-with-route-data.html#cb82-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">addMiniMap</span>( <span class="at">tiles=</span><span class="st">&quot;Stamen.TonerLite&quot;</span>, <span class="at">toggleDisplay =</span> <span class="cn">TRUE</span>,</span>
<span id="cb82-3"><a href="working-with-route-data.html#cb82-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">&quot;bottomleft&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-adeb5f6e3ce3a17f0de7" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-adeb5f6e3ce3a17f0de7">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenTopoMap",null,"OSM",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolylines","args":[[[[{"lng":[5.894486,5.894618,5.894778,5.894805,5.894672,5.894407,5.893912,5.893578,5.89172,5.891433,5.891298,5.891362,5.891597,5.891862,5.892002,5.892008,5.891335,5.891103,5.890532,5.890608,5.890752,5.890765,5.890347,5.890073,5.889517,5.888297,5.888073,5.887965,5.887875,5.887657,5.88689,5.88652,5.886002,5.885592,5.885238,5.885072,5.88518,5.885023,5.884815,5.884872,5.885,5.884995,5.884855,5.884797,5.884568,5.883923,5.883837,5.883753,5.883783,5.88435,5.884825,5.885332,5.8858,5.886523,5.886617,5.886647,5.886798,5.887068,5.88712,5.887133,5.88729,5.887937,5.888073,5.888083,5.888248,5.888592,5.88934,5.889938,5.890837,5.891675,5.892485,5.893257,5.89399,5.89436,5.894845,5.895225,5.895593,5.896387,5.897093,5.897828,5.898207,5.898468,5.898717,5.900633,5.901327,5.901892,5.902313,5.90256,5.903095,5.903202,5.903262,5.90323,5.90317,5.903258,5.90362,5.903788,5.904052,5.904285,5.904627,5.905452,5.906387,5.907607,5.907985,5.908453,5.908712,5.909033,5.909068,5.908958,5.909072,5.909323,5.90987,5.910563,5.911877,5.912927,5.913292,5.91384,5.914295,5.9149,5.915582,5.915852,5.916025,5.916333,5.916562,5.91679,5.917125,5.9179,5.9184,5.918885,5.919097,5.919548,5.919783,5.920475,5.920688,5.92087,5.920875,5.920827,5.920995,5.921395,5.921412,5.920982,5.921027,5.921287,5.92148,5.921745,5.922175,5.922148,5.921965,5.9214,5.92114,5.92095,5.920675,5.9202,5.919993,5.919103,5.918942,5.918908,5.91899,5.919562,5.919752,5.92002,5.921048,5.92208,5.922703,5.922657,5.922437,5.92197,5.921622,5.920627,5.920498,5.920517,5.920718,5.920915,5.920888,5.920757,5.920453,5.920268,5.920187,5.92016,5.920012,5.918987,5.91837,5.918117,5.917647,5.91742,5.917013,5.916813,5.916697,5.91671,5.916878,5.917182,5.917687,5.918422,5.91845,5.918353,5.918148,5.917752,5.917443,5.91733,5.91714,5.916813,5.91629,5.915897,5.914883,5.914543,5.914068,5.913522,5.913033,5.912768,5.912445,5.912283,5.912147,5.912072,5.912133,5.912568,5.912832,5.912825,5.912773,5.91281,5.912988,5.913285,5.913622,5.913927,5.914192,5.914358,5.91436,5.914188,5.913967,5.913828,5.913823,5.913948,5.91417,5.914197,5.914305,5.91427,5.914095,5.91375,5.913197,5.913027,5.913002,5.913017,5.912968,5.912898,5.912798,5.912717,5.912788,5.913113,5.912883,5.912682,5.912222,5.911108,5.910588,5.910152,5.90938,5.90938,5.909433,5.909318,5.908048,5.908023,5.908007,5.908057,5.909883,5.909967,5.91064,5.910868,5.911248,5.91177,5.911905,5.912322,5.912872,5.912878,5.912767,5.912632,5.912555,5.912577,5.912693,5.91328,5.913268,5.913135,5.912285,5.91167,5.910647,5.910585,5.910753,5.91095,5.910808,5.908725,5.908577,5.908197,5.90758,5.907173,5.90739,5.907838,5.907972,5.90799,5.907885,5.905927,5.905868,5.905638,5.905362,5.900993,5.901082,5.903422,5.9037,5.90425,5.904528,5.904733,5.90656,5.90689,5.908113,5.90843,5.908685,5.908988,5.909205,5.909415,5.909985,5.910178,5.910315,5.910322,5.910107,5.909825,5.90947,5.909243,5.90924,5.909368,5.909533,5.909942,5.9103,5.91113,5.911322,5.91144,5.911567,5.911702,5.911883,5.912622,5.912777,5.912923,5.912922,5.912788,5.912355,5.911995,5.911683,5.911475,5.911032,5.910925,5.910842,5.910702,5.910555,5.910327,5.910068,5.909375,5.907205,5.907203,5.907607,5.907998,5.90805,5.907942,5.907455,5.907487,5.907668,5.908275,5.908487,5.910033,5.911102,5.91225,5.91285,5.913228,5.91413,5.914372,5.914657,5.915142,5.915562,5.915683,5.915785,5.915827,5.91597,5.916547,5.917078,5.917288,5.917522,5.917802,5.918248,5.918513,5.919397,5.920775,5.921145,5.922952,5.924433,5.926068,5.926332,5.926693,5.927,5.927723,5.928357,5.929227,5.930022,5.93052,5.931418,5.931788,5.932423,5.933035,5.933205,5.933252,5.93317,5.93295,5.932512,5.932275,5.932185,5.932282,5.93308,5.934547,5.935048,5.935415,5.935765,5.935815,5.936858,5.937347,5.938643,5.93957,5.940715],"lat":[44.735616,44.735796,44.73602,44.736208,44.736365,44.736417,44.73641,44.736497,44.737378,44.737608,44.737893,44.738188,44.738433,44.738658,44.738918,44.739387,44.741625,44.741962,44.742657,44.74279,44.742898,44.743062,44.74377,44.743987,44.744232,44.74453,44.744737,44.745003,44.745667,44.745898,44.746435,44.746815,44.747272,44.74733,44.747517,44.748068,44.748778,44.749218,44.749597,44.749812,44.750048,44.750315,44.750867,44.750932,44.750988,44.751062,44.751127,44.751353,44.751575,44.753332,44.753957,44.754798,44.75512,44.755598,44.755822,44.756077,44.756328,44.756687,44.756955,44.75802,44.758138,44.758372,44.75855,44.759195,44.75932,44.759498,44.760225,44.76047,44.760835,44.76128,44.76183,44.762027,44.762045,44.762152,44.76235,44.76246,44.762647,44.763272,44.763717,44.764305,44.764535,44.764783,44.764887,44.765207,44.765412,44.765695,44.76592,44.765963,44.765932,44.765985,44.766065,44.766243,44.766387,44.766508,44.766705,44.766948,44.767515,44.76774,44.767895,44.768142,44.768365,44.768782,44.768843,44.768835,44.768937,44.769163,44.769257,44.76962,44.769793,44.769933,44.770123,44.770462,44.770788,44.771277,44.77134,44.771315,44.771228,44.771043,44.770973,44.771028,44.771188,44.771963,44.772965,44.77316,44.77328,44.773465,44.773702,44.773825,44.773983,44.774365,44.774362,44.774198,44.774252,44.774432,44.774467,44.774512,44.774672,44.775088,44.775253,44.776207,44.777338,44.777908,44.77814,44.778312,44.778505,44.778628,44.77868,44.77858,44.778478,44.7783,44.777967,44.777552,44.777358,44.776912,44.776952,44.777008,44.777157,44.777622,44.778018,44.778758,44.77972,44.781063,44.781725,44.781883,44.781998,44.782127,44.78215,44.782042,44.782128,44.782252,44.782398,44.782522,44.782598,44.782627,44.782563,44.782457,44.7823,44.781642,44.781512,44.781063,44.78094,44.780973,44.781227,44.781407,44.781885,44.781898,44.781787,44.781712,44.781588,44.78139,44.780877,44.780423,44.780263,44.780123,44.780053,44.780027,44.779868,44.779863,44.779973,44.780237,44.78046,44.780543,44.780592,44.780512,44.780267,44.780218,44.779988,44.779862,44.77955,44.779287,44.779275,44.77937,44.779522,44.779962,44.780192,44.780358,44.780543,44.780757,44.780927,44.781007,44.780978,44.780932,44.780993,44.781143,44.781225,44.78133,44.781453,44.781653,44.781892,44.78233,44.782543,44.782932,44.78315,44.783198,44.78321,44.78316,44.783293,44.783433,44.783637,44.783867,44.783905,44.783902,44.783795,44.783398,44.783165,44.782805,44.782575,44.782473,44.782417,44.782327,44.78216,44.781902,44.7811,44.780938,44.780742,44.780678,44.780717,44.780727,44.780783,44.781145,44.79076,44.790812,44.790758,44.790833,44.791168,44.791373,44.791545,44.792348,44.793062,44.793258,44.793328,44.793388,44.793523,44.793947,44.79429,44.795408,44.795598,44.795728,44.796073,44.796227,44.796453,44.796518,44.79795,44.79971,44.799782,44.80001,44.799948,44.799553,44.799285,44.799187,44.799322,44.799532,44.799738,44.799898,44.80007,44.802173,44.804155,44.809063,44.80906,44.809308,44.80942,44.811205,44.811485,44.812413,44.812887,44.81303,44.813443,44.813468,44.813323,44.813375,44.81352,44.813737,44.813768,44.813678,44.813305,44.81325,44.813323,44.813395,44.813653,44.813977,44.814555,44.814698,44.814817,44.81489,44.814838,44.814518,44.814175,44.81372,44.813743,44.813867,44.814092,44.81409,44.813998,44.813553,44.813527,44.813592,44.813657,44.813743,44.813948,44.814327,44.814623,44.814665,44.814595,44.814623,44.814687,44.815028,44.815663,44.815937,44.816035,44.81612,44.816173,44.816267,44.816475,44.816692,44.816845,44.817043,44.817663,44.817827,44.817975,44.818295,44.818302,44.818165,44.818338,44.818103,44.818068,44.818143,44.818452,44.818645,44.819067,44.819351,44.819288,44.819158,44.818613,44.81839,44.818192,44.817657,44.817015,44.816947,44.817012,44.817302,44.81782,44.817922,44.818122,44.818235,44.818285,44.81815,44.818208,44.818157,44.818283,44.818502,44.818532,44.818432,44.818453,44.818528,44.818495,44.818455,44.818573,44.818555,44.818448,44.818557,44.818683,44.818867,44.819062,44.819217,44.819327,44.81937,44.819463,44.819537,44.819582,44.819732,44.819687,44.819545,44.819312,44.819283,44.818918,44.818875,44.81897,44.818925,44.819117]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"red","weight":5,"opacity":0.5,"fill":false,"fillColor":"red","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMiniMap","args":[null,"Stamen.TonerLite","bottomleft",150,150,19,19,-5,false,false,false,true,false,false,{"color":"#ff7800","weight":1,"clickable":false},{"color":"#000000","weight":1,"clickable":false,"opacity":0,"fillOpacity":0},{"hideText":"Hide MiniMap","showText":"Show MiniMap"},[]]}],"limits":{"lat":[44.735616,44.819732],"lng":[5.883753,5.940715]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="add-custom-symbol-legends" class="section level3" number="4.9.2">
<h3><span class="header-section-number">4.9.2</span> Add Custom Symbol Legends</h3>
<p>We could add eg rally signs to start and end of stage (and if we have richer detail, radio points, etc). The <a href="https://roh.engineering/post/2021-02-04-introduction-to-leaflegend/"><code>leaflegend</code></a> R package provides several utilities for creating custom icons.</p>
<p>Rally stage symbols can be found in various custom fonts such as <a href="https://www.dafont.com/rally-symbols.font"><em>dafont/rally-symbols</em></a> or <a href="https://www.wfonts.com/font/rally-symbols"><em>wfonts/rally-symbols</em></a>.</p>
<div id="adding-a-logo" class="section level4" number="4.9.2.1">
<h4><span class="header-section-number">4.9.2.1</span> Adding a Logo</h4>
<p>The <a href="https://github.com/r-spatial/leafem"><code>r-spatial::leafem</code> package</a> adds several extension features to leaflet maps. For example, we can add a logo to the map:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="working-with-route-data.html#cb83-1" aria-hidden="true" tabindex="-1"></a>img <span class="ot">&lt;-</span> <span class="st">&quot;https://acm.mc/wp-content/uploads/2020/04/Plaque-rouge-2021.png&quot;</span></span>
<span id="cb83-2"><a href="working-with-route-data.html#cb83-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a href="working-with-route-data.html#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Can we control the size? Or do we have to make a square logo?</span></span>
<span id="cb83-4"><a href="working-with-route-data.html#cb83-4" aria-hidden="true" tabindex="-1"></a>m <span class="sc">%&gt;%</span> leafem<span class="sc">::</span><span class="fu">addLogo</span>(img)</span></code></pre></div>
<div id="htmlwidget-56530efab878cc4eddf2" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-56530efab878cc4eddf2">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenTopoMap",null,"OSM",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolylines","args":[[[[{"lng":[5.894486,5.894618,5.894778,5.894805,5.894672,5.894407,5.893912,5.893578,5.89172,5.891433,5.891298,5.891362,5.891597,5.891862,5.892002,5.892008,5.891335,5.891103,5.890532,5.890608,5.890752,5.890765,5.890347,5.890073,5.889517,5.888297,5.888073,5.887965,5.887875,5.887657,5.88689,5.88652,5.886002,5.885592,5.885238,5.885072,5.88518,5.885023,5.884815,5.884872,5.885,5.884995,5.884855,5.884797,5.884568,5.883923,5.883837,5.883753,5.883783,5.88435,5.884825,5.885332,5.8858,5.886523,5.886617,5.886647,5.886798,5.887068,5.88712,5.887133,5.88729,5.887937,5.888073,5.888083,5.888248,5.888592,5.88934,5.889938,5.890837,5.891675,5.892485,5.893257,5.89399,5.89436,5.894845,5.895225,5.895593,5.896387,5.897093,5.897828,5.898207,5.898468,5.898717,5.900633,5.901327,5.901892,5.902313,5.90256,5.903095,5.903202,5.903262,5.90323,5.90317,5.903258,5.90362,5.903788,5.904052,5.904285,5.904627,5.905452,5.906387,5.907607,5.907985,5.908453,5.908712,5.909033,5.909068,5.908958,5.909072,5.909323,5.90987,5.910563,5.911877,5.912927,5.913292,5.91384,5.914295,5.9149,5.915582,5.915852,5.916025,5.916333,5.916562,5.91679,5.917125,5.9179,5.9184,5.918885,5.919097,5.919548,5.919783,5.920475,5.920688,5.92087,5.920875,5.920827,5.920995,5.921395,5.921412,5.920982,5.921027,5.921287,5.92148,5.921745,5.922175,5.922148,5.921965,5.9214,5.92114,5.92095,5.920675,5.9202,5.919993,5.919103,5.918942,5.918908,5.91899,5.919562,5.919752,5.92002,5.921048,5.92208,5.922703,5.922657,5.922437,5.92197,5.921622,5.920627,5.920498,5.920517,5.920718,5.920915,5.920888,5.920757,5.920453,5.920268,5.920187,5.92016,5.920012,5.918987,5.91837,5.918117,5.917647,5.91742,5.917013,5.916813,5.916697,5.91671,5.916878,5.917182,5.917687,5.918422,5.91845,5.918353,5.918148,5.917752,5.917443,5.91733,5.91714,5.916813,5.91629,5.915897,5.914883,5.914543,5.914068,5.913522,5.913033,5.912768,5.912445,5.912283,5.912147,5.912072,5.912133,5.912568,5.912832,5.912825,5.912773,5.91281,5.912988,5.913285,5.913622,5.913927,5.914192,5.914358,5.91436,5.914188,5.913967,5.913828,5.913823,5.913948,5.91417,5.914197,5.914305,5.91427,5.914095,5.91375,5.913197,5.913027,5.913002,5.913017,5.912968,5.912898,5.912798,5.912717,5.912788,5.913113,5.912883,5.912682,5.912222,5.911108,5.910588,5.910152,5.90938,5.90938,5.909433,5.909318,5.908048,5.908023,5.908007,5.908057,5.909883,5.909967,5.91064,5.910868,5.911248,5.91177,5.911905,5.912322,5.912872,5.912878,5.912767,5.912632,5.912555,5.912577,5.912693,5.91328,5.913268,5.913135,5.912285,5.91167,5.910647,5.910585,5.910753,5.91095,5.910808,5.908725,5.908577,5.908197,5.90758,5.907173,5.90739,5.907838,5.907972,5.90799,5.907885,5.905927,5.905868,5.905638,5.905362,5.900993,5.901082,5.903422,5.9037,5.90425,5.904528,5.904733,5.90656,5.90689,5.908113,5.90843,5.908685,5.908988,5.909205,5.909415,5.909985,5.910178,5.910315,5.910322,5.910107,5.909825,5.90947,5.909243,5.90924,5.909368,5.909533,5.909942,5.9103,5.91113,5.911322,5.91144,5.911567,5.911702,5.911883,5.912622,5.912777,5.912923,5.912922,5.912788,5.912355,5.911995,5.911683,5.911475,5.911032,5.910925,5.910842,5.910702,5.910555,5.910327,5.910068,5.909375,5.907205,5.907203,5.907607,5.907998,5.90805,5.907942,5.907455,5.907487,5.907668,5.908275,5.908487,5.910033,5.911102,5.91225,5.91285,5.913228,5.91413,5.914372,5.914657,5.915142,5.915562,5.915683,5.915785,5.915827,5.91597,5.916547,5.917078,5.917288,5.917522,5.917802,5.918248,5.918513,5.919397,5.920775,5.921145,5.922952,5.924433,5.926068,5.926332,5.926693,5.927,5.927723,5.928357,5.929227,5.930022,5.93052,5.931418,5.931788,5.932423,5.933035,5.933205,5.933252,5.93317,5.93295,5.932512,5.932275,5.932185,5.932282,5.93308,5.934547,5.935048,5.935415,5.935765,5.935815,5.936858,5.937347,5.938643,5.93957,5.940715],"lat":[44.735616,44.735796,44.73602,44.736208,44.736365,44.736417,44.73641,44.736497,44.737378,44.737608,44.737893,44.738188,44.738433,44.738658,44.738918,44.739387,44.741625,44.741962,44.742657,44.74279,44.742898,44.743062,44.74377,44.743987,44.744232,44.74453,44.744737,44.745003,44.745667,44.745898,44.746435,44.746815,44.747272,44.74733,44.747517,44.748068,44.748778,44.749218,44.749597,44.749812,44.750048,44.750315,44.750867,44.750932,44.750988,44.751062,44.751127,44.751353,44.751575,44.753332,44.753957,44.754798,44.75512,44.755598,44.755822,44.756077,44.756328,44.756687,44.756955,44.75802,44.758138,44.758372,44.75855,44.759195,44.75932,44.759498,44.760225,44.76047,44.760835,44.76128,44.76183,44.762027,44.762045,44.762152,44.76235,44.76246,44.762647,44.763272,44.763717,44.764305,44.764535,44.764783,44.764887,44.765207,44.765412,44.765695,44.76592,44.765963,44.765932,44.765985,44.766065,44.766243,44.766387,44.766508,44.766705,44.766948,44.767515,44.76774,44.767895,44.768142,44.768365,44.768782,44.768843,44.768835,44.768937,44.769163,44.769257,44.76962,44.769793,44.769933,44.770123,44.770462,44.770788,44.771277,44.77134,44.771315,44.771228,44.771043,44.770973,44.771028,44.771188,44.771963,44.772965,44.77316,44.77328,44.773465,44.773702,44.773825,44.773983,44.774365,44.774362,44.774198,44.774252,44.774432,44.774467,44.774512,44.774672,44.775088,44.775253,44.776207,44.777338,44.777908,44.77814,44.778312,44.778505,44.778628,44.77868,44.77858,44.778478,44.7783,44.777967,44.777552,44.777358,44.776912,44.776952,44.777008,44.777157,44.777622,44.778018,44.778758,44.77972,44.781063,44.781725,44.781883,44.781998,44.782127,44.78215,44.782042,44.782128,44.782252,44.782398,44.782522,44.782598,44.782627,44.782563,44.782457,44.7823,44.781642,44.781512,44.781063,44.78094,44.780973,44.781227,44.781407,44.781885,44.781898,44.781787,44.781712,44.781588,44.78139,44.780877,44.780423,44.780263,44.780123,44.780053,44.780027,44.779868,44.779863,44.779973,44.780237,44.78046,44.780543,44.780592,44.780512,44.780267,44.780218,44.779988,44.779862,44.77955,44.779287,44.779275,44.77937,44.779522,44.779962,44.780192,44.780358,44.780543,44.780757,44.780927,44.781007,44.780978,44.780932,44.780993,44.781143,44.781225,44.78133,44.781453,44.781653,44.781892,44.78233,44.782543,44.782932,44.78315,44.783198,44.78321,44.78316,44.783293,44.783433,44.783637,44.783867,44.783905,44.783902,44.783795,44.783398,44.783165,44.782805,44.782575,44.782473,44.782417,44.782327,44.78216,44.781902,44.7811,44.780938,44.780742,44.780678,44.780717,44.780727,44.780783,44.781145,44.79076,44.790812,44.790758,44.790833,44.791168,44.791373,44.791545,44.792348,44.793062,44.793258,44.793328,44.793388,44.793523,44.793947,44.79429,44.795408,44.795598,44.795728,44.796073,44.796227,44.796453,44.796518,44.79795,44.79971,44.799782,44.80001,44.799948,44.799553,44.799285,44.799187,44.799322,44.799532,44.799738,44.799898,44.80007,44.802173,44.804155,44.809063,44.80906,44.809308,44.80942,44.811205,44.811485,44.812413,44.812887,44.81303,44.813443,44.813468,44.813323,44.813375,44.81352,44.813737,44.813768,44.813678,44.813305,44.81325,44.813323,44.813395,44.813653,44.813977,44.814555,44.814698,44.814817,44.81489,44.814838,44.814518,44.814175,44.81372,44.813743,44.813867,44.814092,44.81409,44.813998,44.813553,44.813527,44.813592,44.813657,44.813743,44.813948,44.814327,44.814623,44.814665,44.814595,44.814623,44.814687,44.815028,44.815663,44.815937,44.816035,44.81612,44.816173,44.816267,44.816475,44.816692,44.816845,44.817043,44.817663,44.817827,44.817975,44.818295,44.818302,44.818165,44.818338,44.818103,44.818068,44.818143,44.818452,44.818645,44.819067,44.819351,44.819288,44.819158,44.818613,44.81839,44.818192,44.817657,44.817015,44.816947,44.817012,44.817302,44.81782,44.817922,44.818122,44.818235,44.818285,44.81815,44.818208,44.818157,44.818283,44.818502,44.818532,44.818432,44.818453,44.818528,44.818495,44.818455,44.818573,44.818555,44.818448,44.818557,44.818683,44.818867,44.819062,44.819217,44.819327,44.81937,44.819463,44.819537,44.819582,44.819732,44.819687,44.819545,44.819312,44.819283,44.818918,44.818875,44.81897,44.818925,44.819117]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"red","weight":5,"opacity":0.5,"fill":false,"fillColor":"red","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[44.735616,44.819732],"lng":[5.883753,5.940715]}},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (function(el, x, data) {\n                     // we need a new div element because we have to handle\n                     // the mouseover output seperately\n                     // debugger;\n                     function addElement () {\n                     // generate new div Element\n                     var newDiv = $(document.createElement('div'));\n                     // append at end of leaflet htmlwidget container\n                     $(el).append(newDiv);\n                     //provide ID and style\n                     newDiv.addClass('logo');\nnewDiv.css({\n                        'position': 'absolute',\n                        'top': '13px',\n                        'left': '50px',\n                        'background-color': 'transparent',\n                        'border': '0px solid black',\n                        'width': '60px',\n                        'height': '60px',\n});return newDiv;\n                     }// check for already existing logo class to not duplicate\n                    var logo = $(el).find('.logo');\n                    if(!logo.length) {\n                    logo = addElement();logo.html('<img src=\"https://acm.mc/wp-content/uploads/2020/04/Plaque-rouge-2021.png\", width=60, height=60, style=\"opacity:1;filter:alpha(opacity=100);\"><\/a>');\n                       var map = HTMLWidgets.find('#' + el.id).getMap();\n                       };\n                       }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
</div>
<div id="adding-mini-charts-to-maps" class="section level3" number="4.9.3">
<h3><span class="header-section-number">4.9.3</span> Adding Mini-Charts to Maps</h3>
<p>The <a href="https://cran.r-project.org/web/packages/leaflet.minicharts/vignettes/introduction.html"><code>leaflet.minicharts</code></a> R package allows simple charts to be displayed at specific locations on a map.</p>
</div>
<div id="adding-html-content-to-popups" class="section level3" number="4.9.4">
<h3><span class="header-section-number">4.9.4</span> Adding HTML content to popups</h3>
<p>The <a href="https://github.com/r-spatial/leafpop"><code>leafpop</code></a> R package allows us to add HTML tables, images or graphs to <code>leaflet</code> or <code>mapview</code> popups, as well as <code>ggplot2</code> graphics and <code>htmlwidgets</code>.</p>
<p>This packages might be useful for adding stage results displays to maps, for example.</p>
</div>
</div>
<div id="using-mapview-to-create-leaflet-maps" class="section level2" number="4.10">
<h2><span class="header-section-number">4.10</span> Using <code>mapview</code> To Create <em>leaflet</em> Maps</h2>
<p>As well as using the <code>leaflet</code> package to generate <em>leaflet</em> maps, the <a href="https://r-spatial.github.io/mapview/"><code>mapview</code> R package</a> provides an alternative way of .</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="working-with-route-data.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapview)</span>
<span id="cb84-2"><a href="working-with-route-data.html#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="working-with-route-data.html#cb84-3" aria-hidden="true" tabindex="-1"></a>mv <span class="ot">=</span> <span class="fu">mapview</span>(geojson_sf)</span>
<span id="cb84-4"><a href="working-with-route-data.html#cb84-4" aria-hidden="true" tabindex="-1"></a>mv</span></code></pre></div>
<div id="htmlwidget-ace812aea6e658b7eecd" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-ace812aea6e658b7eecd">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["line",430]},{"method":"addFlatGeoBuf","args":["geojson_sf","geojson_sf",null,true,"mvFeatureId",{"radius":6,"stroke":true,"color":"#6666FF","weight":2,"opacity":0.9,"fill":false,"fillColor":null,"fillOpacity":1},{"className":"","pane":"line"},"mapview-popup",{"radius":{"to":[3,15],"from":[3,15]},"weight":{"to":[1,10],"from":[1,10]},"opacity":{"to":[0,1],"from":[0,1]},"fillOpacity":{"to":[0,1],"from":[0,1]}}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[5.243488,43.876326,6.951953,44.819732,"geojson_sf","Zoom to geojson_sf","<strong> geojson_sf <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"geojson_sf",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["geojson_sf"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"geojson_sf"}]}],"fitBounds":[43.876326,5.243488,44.819732,6.951953,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p>The <code>r-spatial/leafem</code> package that we can use to enrich maps using the <code>leaflet</code> package was in part developed as an abstraction of functions contained within the <code>mapview</code> package; both <code>mapview</code> and <code>leafem</code> are maintained by the <a href="https://github.com/r-spatial"><em>r-spatial</em> Github organisation</a>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="importing-the-stage-route-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introducing-map-projections.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toc_depth": 3,
"toolbar": {
"position": "fixed"
},
"search": true,
"info": true
});
});
</script>

</body>

</html>
